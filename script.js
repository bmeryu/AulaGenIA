document.addEventListener("DOMContentLoaded",()=>{const e=firebase.auth(),t=new firebase.auth.GoogleAuthProvider,n=document.querySelector(".w-full.max-w-md h2"),o=document.getElementById("google-signin-btn"),s=document.querySelector(".my-6.flex.items-center"),i=document.querySelector(".mb-8.flex"),a=document.getElementById("login-form-container"),l=document.getElementById("register-form-container"),d=document.getElementById("userInfo"),c=document.getElementById("userName"),r=document.getElementById("logoutBtn");o&&o.addEventListener("click",()=>{console.log("Botón de Google presionado. Intentando iniciar sesión..."),e.signInWithPopup(t).catch(e=>{console.error("Error durante el inicio de sesión con Google:",e),alert("Hubo un problema al intentar iniciar sesión. Por favor, revisa la consola para más detalles.")})}),r&&r.addEventListener("click",()=>{e.signOut()}),e.onAuthStateChanged(e=>{console.log("Cambio de estado de Auth detectado. Usuario:",e?e.displayName:"Ninguno"),(e=>{e?(n&&(n.style.display="none"),o&&(o.style.display="none"),s&&(s.style.display="none"),i&&(i.style.display="none"),a&&(a.style.display="none"),l&&(l.style.display="none"),c.textContent=`¡Bienvenido, ${e.displayName}!`,d.style.display="block"):(n&&(n.style.display="block"),o&&(o.style.display="flex"),s&&(s.style.display="flex"),i&&(i.style.display="flex"),a&&(a.style.display="block"),l&&(l.style.display="none"),d.style.display="none")})(e)});const m=document.getElementById("login-tab"),y=document.getElementById("register-tab");y&&y.addEventListener("click",()=>{m.classList.remove("active-tab"),y.classList.add("active-tab"),a.classList.add("hidden"),l.classList.remove("hidden")}),m&&m.addEventListener("click",()=>{y.classList.remove("active-tab"),m.classList.add("active-tab"),l.classList.add("hidden"),a.classList.remove("hidden")}),lucide.createIcons(),window.cookieconsent&&window.cookieconsent.initialise({palette:{popup:{background:"#1f2937"},button:{background:"#14b8a6"}},theme:"classic",position:"bottom",type:"opt-in",content:{message:"Usamos cookies para mejorar tu experiencia.",dismiss:"Aceptar",deny:"Rechazar",link:"Más info",href:"/politica-cookies.html"}})});
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√≥veda de Prompts AGIA | Oferta Black Friday</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts & Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        
        /* Custom Scrollbar */
        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        
        .blur-locked { filter: blur(4px); user-select: none; pointer-events: none; }
        
        /* Highlight Classes for Prompts - AGIA SYSTEM */
        .hl-rol { background-color: #dbeafe; color: #1e40af; border-bottom: 2px solid #60a5fa; padding: 0 4px; border-radius: 4px; cursor: help; font-weight: 600; }
        .hl-contexto { background-color: #d1fae5; color: #065f46; border-bottom: 2px solid #34d399; padding: 0 4px; border-radius: 4px; cursor: help; font-weight: 600; }
        .hl-meta { background-color: #fef3c7; color: #92400e; border-bottom: 2px solid #fbbf24; padding: 0 4px; border-radius: 4px; cursor: help; font-weight: 600; }
        .hl-limites { background-color: #fee2e2; color: #b91c1c; border-bottom: 2px solid #f87171; padding: 0 4px; border-radius: 4px; cursor: help; font-weight: 600; }
        .hl-formato { background-color: #f3e8ff; color: #6b21a8; border-bottom: 2px solid #a855f7; padding: 0 4px; border-radius: 4px; cursor: help; font-weight: 600; }

        .prose-sm p { margin-bottom: 0.5em; }
        .prose-sm ul, .prose-sm ol { margin-left: 1.2em; margin-bottom: 0.5em; }
        .prose-sm li { margin-bottom: 0.2em; }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden text-slate-800">

    <!-- BLACK FRIDAY BANNER -->
    <div class="bg-black text-white text-center py-2 px-4 text-xs md:text-sm font-bold tracking-wide z-50 flex justify-center items-center gap-2">
        <span class="material-symbols-outlined text-sm text-yellow-400">local_fire_department</span>
        <span>BLACK FRIDAY: Desbloquea la B√≥veda Completa por solo $9.990</span>
        <a href="#" onclick="openPaywall()" class="underline text-yellow-400 hover:text-yellow-300 ml-2">Ver Oferta</a>
    </div>

    <!-- Header -->
    <header class="bg-white border-b border-slate-200 shadow-sm z-20 flex-none relative">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-4">
                    <!-- Logo Placeholder -->
                    <div class="h-10 w-10 bg-indigo-600 rounded-lg flex items-center justify-center text-white font-black text-xl">AG</div>
                    <div class="border-l border-slate-200 pl-4">
                        <h1 class="text-lg font-extrabold text-slate-900 tracking-tight">B√≥veda de Prompts <span class="text-indigo-600">AGIA</span></h1>
                        <p class="text-xs text-slate-500 font-medium">Librer√≠a de Ingenier√≠a de Prompts</p>
                    </div>
                </div>
                <!-- Bot√≥n Compra Header -->
                <button onclick="openPaywall()" class="hidden md:flex bg-gradient-to-r from-slate-900 to-slate-800 text-white px-4 py-2 rounded-lg text-xs font-bold hover:shadow-lg transition-all items-center gap-2 border border-slate-700">
                    <span class="material-symbols-outlined text-sm text-yellow-400">lock_open</span>
                    DESBLOQUEAR TODO
                </button>
            </div>

            <!-- Category Navigation -->
            <div class="overflow-x-auto custom-scroll pb-2">
                <div class="flex space-x-2 min-w-max" id="category-nav">
                    <!-- Injected by JS -->
                </div>
            </div>
        </div>
    </header>

    <!-- Main Layout -->
    <div class="flex flex-1 overflow-hidden max-w-7xl mx-auto w-full relative">
        
        <!-- Sidebar -->
        <aside class="w-full md:w-80 flex flex-col bg-white border-r border-slate-200 flex-none z-10 transition-all duration-300 absolute md:relative h-full transform -translate-x-full md:translate-x-0 shadow-xl md:shadow-none" id="sidebar">
            <div class="p-3 border-b border-slate-100">
                <div class="relative">
                    <span class="material-symbols-outlined absolute left-3 top-2.5 text-slate-400 text-lg">search</span>
                    <input type="text" id="searchInput" placeholder="Buscar prompt..." 
                        class="w-full pl-10 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 transition-all"
                        onkeyup="filterCases()">
                </div>
            </div>
            <div class="flex-1 overflow-y-auto custom-scroll p-2 space-y-1" id="case-list">
                <!-- Cases injected by JS -->
            </div>
            <div class="p-3 border-t border-slate-100 text-xs text-center text-slate-400 bg-slate-50">
                B√≥veda cargada con <span id="count-display" class="font-bold">0</span> prompts
            </div>
        </aside>

        <!-- Mobile Toggle -->
        <button onclick="toggleSidebar()" class="md:hidden absolute bottom-6 left-6 z-40 bg-indigo-600 text-white p-4 rounded-full shadow-lg hover:bg-indigo-700 transition-colors">
            <span class="material-symbols-outlined">menu_open</span>
        </button>

        <!-- Main Content -->
        <main class="flex-1 flex flex-col bg-slate-50/50 overflow-hidden relative w-full">
            
            <!-- Case Detail -->
            <div id="case-detail" class="flex-1 overflow-y-auto custom-scroll p-4 md:p-8 pb-24">
                <div class="max-w-4xl mx-auto fade-in">
                    
                    <!-- Title Header -->
                    <div class="flex items-center gap-4 mb-6 border-b border-slate-200 pb-6">
                        <div id="detail-icon-bg" class="w-16 h-16 rounded-2xl flex items-center justify-center shadow-md border border-white bg-white">
                            <span id="detail-icon" class="material-symbols-outlined text-3xl"></span>
                        </div>
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-1">
                                <span id="detail-category-badge" class="text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded-full bg-slate-200 text-slate-600">Categor√≠a</span>
                                <span class="text-[10px] font-medium text-slate-400 flex items-center gap-1 bg-white px-2 py-0.5 rounded border border-slate-100">
                                    <span class="material-symbols-outlined text-[10px] text-green-500">verified</span> Estructura AGIA
                                </span>
                            </div>
                            <h2 id="detail-title" class="text-2xl md:text-3xl font-bold text-slate-800 leading-tight">T√≠tulo del Caso</h2>
                            <p id="detail-problem" class="text-sm text-slate-500 mt-1 font-medium"></p>
                        </div>
                    </div>

                    <!-- AGIA LEGEND -->
                    <div class="mb-4 bg-white rounded-xl border border-slate-200 p-3 overflow-x-auto">
                        <div class="flex justify-between items-center min-w-max gap-4 md:gap-0">
                            <!-- ROL -->
                            <div class="flex items-center gap-2">
                                <div class="w-6 h-6 rounded bg-blue-100 text-blue-600 flex items-center justify-center text-[10px] font-bold hl-rol border-none">1</div>
                                <span class="text-[10px] font-bold uppercase text-slate-500">Rol</span>
                            </div>
                            <div class="w-8 h-[1px] bg-slate-200 hidden md:block"></div>
                            <!-- CONTEXTO -->
                            <div class="flex items-center gap-2">
                                <div class="w-6 h-6 rounded bg-emerald-100 text-emerald-600 flex items-center justify-center text-[10px] font-bold hl-contexto border-none">2</div>
                                <span class="text-[10px] font-bold uppercase text-slate-500">Contexto (Adjuntar)</span>
                            </div>
                            <div class="w-8 h-[1px] bg-slate-200 hidden md:block"></div>
                            <!-- META -->
                            <div class="flex items-center gap-2">
                                <div class="w-6 h-6 rounded bg-amber-100 text-amber-600 flex items-center justify-center text-[10px] font-bold hl-meta border-none">3</div>
                                <span class="text-[10px] font-bold uppercase text-slate-500">Meta</span>
                            </div>
                            <div class="w-8 h-[1px] bg-slate-200 hidden md:block"></div>
                            <!-- LIMITES -->
                            <div class="flex items-center gap-2">
                                <div class="w-6 h-6 rounded bg-red-100 text-red-600 flex items-center justify-center text-[10px] font-bold hl-limites border-none">4</div>
                                <span class="text-[10px] font-bold uppercase text-slate-500">L√≠mites</span>
                            </div>
                            <div class="w-8 h-[1px] bg-slate-200 hidden md:block"></div>
                            <!-- FORMATO -->
                            <div class="flex items-center gap-2">
                                <div class="w-6 h-6 rounded bg-purple-100 text-purple-600 flex items-center justify-center text-[10px] font-bold hl-formato border-none">5</div>
                                <span class="text-[10px] font-bold uppercase text-slate-500">Formato</span>
                            </div>
                        </div>
                    </div>

                    <!-- PROMPT BOX (HERO) -->
                    <div class="bg-slate-900 rounded-2xl p-1 shadow-2xl mb-8 border border-slate-700 relative group">
                        <div class="absolute top-0 right-0 w-32 h-32 bg-indigo-500 opacity-20 rounded-full -mr-10 -mt-10 blur-3xl group-hover:opacity-30 transition-opacity"></div>
                        
                        <!-- Header Prompt Box -->
                        <div class="bg-slate-800/50 rounded-t-xl px-4 py-3 flex justify-between items-center border-b border-slate-700">
                            <div class="flex items-center gap-2">
                                <span class="material-symbols-outlined text-yellow-400 text-sm">auto_awesome</span>
                                <span class="text-xs font-bold text-slate-300 tracking-wider">PROMPT MAESTRO</span>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="copyPrompt()" class="flex items-center gap-2 text-xs bg-indigo-600 text-white hover:bg-indigo-500 px-4 py-1.5 rounded-lg font-bold transition-all shadow-lg hover:shadow-indigo-500/25 ring-1 ring-white/10">
                                    <span class="material-symbols-outlined text-sm">content_copy</span> 
                                    <span>COPIAR</span>
                                </button>
                            </div>
                        </div>

                        <!-- Content Prompt Box -->
                        <div class="p-6 relative">
                            <p id="detail-prompt-rendered" class="font-mono text-sm md:text-base text-slate-200 leading-relaxed whitespace-pre-wrap select-all">...</p>
                        </div>
                    </div>

                    <!-- COMPARISON GRID -->
                    <div class="mb-8">
                        <div id="comparison-container" class="grid md:grid-cols-2 gap-6 bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                            <!-- Bad Prompt -->
                            <div>
                                <h3 class="text-xs font-bold text-slate-400 uppercase mb-2 flex items-center gap-1">
                                    <span class="material-symbols-outlined text-sm">close</span> Lo que escribe la mayor√≠a
                                </h3>
                                <div class="bg-slate-50 p-4 rounded-lg border border-slate-100 text-sm text-slate-500 italic font-mono">
                                    <p id="detail-bad-prompt">"..."</p>
                                </div>
                                <div class="mt-2 flex flex-wrap gap-2" id="deficiency-badges"></div>
                            </div>
                            <!-- Result Preview -->
                            <div class="border-l border-slate-100 pl-4 md:pl-6">
                                <h3 class="text-xs font-bold text-slate-400 uppercase mb-2 flex items-center gap-2">
                                    <span class="material-symbols-outlined text-sm text-indigo-500">check_circle</span> Resultado Estimado
                                </h3>
                                <!-- Contenedor con scroll si es muy ancho -->
                                <div class="overflow-x-auto">
                                    <div id="preview-response" class="text-xs text-slate-700 prose-sm bg-indigo-50/50 p-4 rounded-lg border border-indigo-50">
                                        <!-- JS injects preview here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- AGIA MODEL IMAGE (Reference) -->
                    <div class="mb-8 pt-8 border-t border-slate-200 opacity-80 hover:opacity-100 transition-opacity">
                         <h3 class="text-xs font-bold text-slate-400 uppercase mb-4 flex items-center gap-1">
                            <span class="material-symbols-outlined text-sm">schema</span> Referencia: La Estructura Maestra
                         </h3>
                         <div class="bg-white p-2 rounded-xl border border-slate-200 shadow-sm">
                             <img src="https://aulagenia.cl/maestro-prompts.png" alt="Modelo AGIA - Estructura Maestra" class="w-full h-auto rounded-lg">
                         </div>
                    </div>

                </div>
            </div>
        </main>
    </div>

    <!-- PAYWALL MODAL -->
    <div id="paywall-modal" class="fixed inset-0 z-[60] hidden">
        <div class="absolute inset-0 bg-slate-900/80 backdrop-blur-sm transition-opacity" onclick="closePaywall()"></div>
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-md p-4">
            <div class="bg-white rounded-2xl shadow-2xl overflow-hidden relative animate-in fade-in zoom-in duration-300">
                <button onclick="closePaywall()" class="absolute top-3 right-3 text-slate-400 hover:text-slate-600 bg-white rounded-full p-1 z-10">
                    <span class="material-symbols-outlined">close</span>
                </button>
                
                <div class="bg-slate-900 p-8 text-center relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-40 h-40 bg-indigo-600 rounded-full blur-3xl opacity-30 -mr-10 -mt-10"></div>
                    <span class="material-symbols-outlined text-5xl text-yellow-400 mb-2 relative z-10">lock</span>
                    <h3 class="text-white font-bold text-xl relative z-10">Contenido Premium</h3>
                    <p class="text-indigo-200 text-sm relative z-10">Este prompt es parte de la B√≥veda Privada.</p>
                </div>

                <div class="p-6 text-center">
                    <p class="text-slate-600 text-sm mb-6">
                        Est√°s viendo la versi√≥n gratuita. Accede a los <span class="font-bold text-slate-900">100+ casos avanzados</span> y copia mis f√≥rmulas validadas.
                    </p>
                    
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-6">
                        <p class="text-xs font-bold text-yellow-800 uppercase tracking-wide">üî• Oferta Black Friday</p>
                        <p class="text-2xl font-black text-slate-900">$9.990 <span class="text-sm font-normal text-slate-500 line-through">$19.990</span></p>
                        <p class="text-[10px] text-slate-500">Pago √∫nico. Acceso de por vida.</p>
                    </div>

                    <a id="payment-btn" href="#" target="_blank" class="block w-full bg-indigo-600 text-white py-3 rounded-xl font-bold hover:bg-indigo-700 hover:scale-[1.02] transition-all shadow-lg shadow-indigo-200 mb-3 flex items-center justify-center gap-2">
                        <span>DESBLOQUEAR B√ìVEDA AHORA</span>
                        <span class="material-symbols-outlined text-sm">arrow_forward</span>
                    </a>
                    
                    <p class="text-[10px] text-slate-400">Garant√≠a de satisfacci√≥n. Pago seguro v√≠a Mercado Pago.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==========================================
        // CONFIGURACI√ìN DE VENTA
        // ==========================================
        const LINK_MERCADO_PAGO = "#"; 
        document.getElementById('payment-btn').href = LINK_MERCADO_PAGO;

        // --- HELPERS PARA AGIA MARKUP ---
        function renderAGIA(text) {
            let html = text
                .replace(/{r}(.*?){\/r}/g, '<span class="hl-rol" title="ROL: ¬øQui√©n act√∫a?">$1</span>')
                .replace(/{c}(.*?){\/c}/g, '<span class="hl-contexto" title="CONTEXTO: Antecedentes y archivos (Verde)">$1</span>')
                .replace(/{m}(.*?){\/m}/g, '<span class="hl-meta" title="META: Objetivo principal">$1</span>')
                .replace(/{l}(.*?){\/l}/g, '<span class="hl-limites" title="LIMITES: Restricciones y reglas">$1</span>')
                .replace(/{f}(.*?){\/f}/g, '<span class="hl-formato" title="FORMATO: Estructura de salida">$1</span>')
                .replace(/\n/g, '<br>');
            return html;
        }

        function cleanAGIA(text) {
            return text.replace(/{[rcmlf]}/g, '').replace(/{\/[rcmlf]}/g, '');
        }

        // --- DATA ENGINE ---
        const categoryConfig = {
            office: { label: "Oficina & Excel", color: "emerald", icon: "table_view" },
            finance: { label: "Finanzas & Dinero", color: "cyan", icon: "attach_money" },
            marketing: { label: "Marketing & RRSS", color: "pink", icon: "campaign" },
            personal: { label: "Vida & Hogar", color: "blue", icon: "home" },
            tech: { label: "Tecnolog√≠a & C√≥digo", color: "violet", icon: "terminal" },
            education: { label: "Educaci√≥n", color: "amber", icon: "school" }
        };

        const createCase = (id, cat, title, icon, problem, badPrompt, goodPromptTagged, goodResPreview, locked = false, deficiencies = []) => ({
            id, category: cat, title, icon, problem, 
            badPrompt, 
            agiaPromptTagged: goodPromptTagged, 
            previewResponse: goodResPreview,
            locked: locked, 
            deficiencies: deficiencies.length ? deficiencies : ["Sin Rol", "Contexto Vago"]
        });

        // --- BASE DE DATOS DE PROMPTS AGIA (Optimizada y Realista) ---
        const allCases = [
            
            // ==========================================================
            // CATEGOR√çA: OFICINA & EXCEL (20 CASOS POWER)
            // ==========================================================
            
            // 1. Limpieza de Data (Cl√°sico)
            createCase(22, 'office', 'El Limpiador de Data', 'cleaning_services', 'Base de datos sucia (Nombres, May√∫sculas).', 
                'Arregla esta lista.', 
                '{r}Act√∫a como Experto en Excel y Limpieza de Datos.{/r} {c}Te adjunto (pega aqu√≠ tu tabla) una lista de nombres con formatos mezclados y espacios extra.{/c} {m}Genera una f√≥rmula para dejar todo como "Nombre Propio" y eliminar espacios vac√≠os.{/m} {l}Solo f√≥rmulas, nada de macros.{/l} {f}Bloque de c√≥digo con la f√≥rmula y explicaci√≥n breve.{/f}',
                '<div class="font-mono text-xs bg-slate-800 text-green-400 p-2 rounded mb-2">=NOMPROPIO(ESPACIOS(A2))</div>',
                false, ["Sin Instrucci√≥n", "Vago"]),

            // 2. Email Diplom√°tico (Negociaci√≥n)
            createCase(23, 'office', 'El "No" Diplom√°tico', 'block', 'Decir que NO al cliente sin perderlo.', 
                'Dile que no voy a hacer el cambio gratis.', 
                '{r}Act√∫a como Gerente de Cuentas Senior.{/r} {c}El cliente pide un cambio fuera del contrato original. Tenemos buena relaci√≥n.{/c} {m}Escribe un correo rechazando el trabajo gratis pero ofreciendo una cotizaci√≥n.{/m} {l}Tono emp√°tico, firme y profesional.{/l} {f}Estructura: Agradecer -> Explicar L√≠mite -> Ofrecer Soluci√≥n -> Cierre.{/f}',
                '<div class="bg-white p-2 text-xs italic text-slate-600">"Entiendo la necesidad... para mantener los est√°ndares de calidad, esto requiere un presupuesto adicional..."</div>',
                false, ["Agresivo", "Sin Alternativa"]),

            // 3. Resumir Reuni√≥n (Adjunto Texto)
            createCase(201, 'office', 'Acta de Reuni√≥n Instant√°nea', 'history_edu', 'Tengo notas desordenadas de una reuni√≥n larga.', 
                'Resume esto.', 
                '{r}Act√∫a como Secretario Ejecutivo Eficiente.{/r} {c}Adjunto la transcripci√≥n desordenada de nuestra reuni√≥n de equipo.{/c} {m}Crea un Acta de Reuni√≥n profesional.{/m} {l}Ignora chistes o comentarios irrelevantes.{/l} {f}Formato: 1. Acuerdos Tomados 2. Tareas (Qui√©n hace qu√© y para cu√°ndo).{/f}',
                '<p class="font-bold">Acuerdos:</p><ul class="list-disc ml-4 text-xs"><li>Se aprueba presupuesto 2024.</li></ul><p class="font-bold mt-2">Tareas:</p><ul class="list-disc ml-4 text-xs"><li>Juan: Enviar reporte (Viernes).</li></ul>',
                false, ["Sin Formato", "Muy Largo"]),

            // 4. Analizar PDF Largo (Adjunto PDF)
            createCase(202, 'office', 'Analista de Reportes PDF', 'picture_as_pdf', 'Me enviaron un PDF de 50 p√°ginas y no tengo tiempo.', 
                'De qu√© trata este pdf.', 
                '{r}Act√∫a como Analista de Negocios Senior.{/r} {c}Adjunto este reporte anual en PDF.{/c} {m}Extrae los 5 puntos cr√≠ticos que debo saber para mi reuni√≥n con el directorio.{/m} {l}M√°ximo 1 p√°gina de lectura.{/l} {f}Lista numerada con los hallazgos clave y riesgos.{/f}',
                '<ol class="list-decimal ml-4 text-xs"><li>Los ingresos cayeron un 5% en Q3.</li><li>Riesgo alto de cadena de suministro en Asia.</li></ol>',
                false, ["Muy General", "Pierde Detalles"]),

            // 5. De Excel a PowerPoint (Adjunto Tabla)
            createCase(203, 'office', 'Creador de Diapositivas', 'slideshow', 'Tengo datos en Excel y necesito una slide.', 
                'Haz una presentaci√≥n con esto.', 
                '{r}Act√∫a como Dise√±ador de Presentaciones Corporativas.{/r} {c}Adjunto esta tabla de ventas trimestrales.{/c} {m}Dise√±a el contenido para una diapositiva de alto impacto.{/m} {l}No quiero que leas la tabla, quiero los "insights" (conclusiones).{/l} {f}T√≠tulo de la Slide -> 3 Bullets Clave -> Sugerencia de Gr√°fico.{/f}',
                '<p class="font-bold">T√≠tulo:</p> "Crecimiento Sostenido en Q4"<br><p class="font-bold">Bullets:</p> - Superamos meta en 12%...<br><p class="font-bold">Gr√°fico:</p> Barras apiladas.',
                false, ["Aburrido", "Solo Copia Datos"]),

            // 6. F√≥rmula Compleja (BuscarV a XLookUp)
            createCase(204, 'office', 'Modernizador de F√≥rmulas', 'functions', 'Mis BuscarV se rompen siempre.', 
                'Mejora esta f√≥rmula.', 
                '{r}Act√∫a como MVP de Excel.{/r} {c}Adjunto imagen de mi tabla donde uso BUSCARV y me da error si muevo columnas.{/c} {m}Reemplaza esto con INDICE/COINCIDIR o BUSCARX para que sea robusto.{/m} {f}La f√≥rmula nueva y por qu√© es mejor.{/f}',
                '<div class="font-mono text-xs bg-slate-800 text-green-400 p-2 rounded">=BUSCARX(H2; A:A; C:C; "No hallado")</div>',
                false, ["Usa F√≥rmulas Viejas", "Sin Explicaci√≥n"]),

            // 7. Redactar Correo de Cobranza
            createCase(205, 'office', 'Cobrador Amable', 'money_off', 'Cliente no paga la factura hace 15 d√≠as.', 
                'Cobra la factura al cliente.', 
                '{r}Act√∫a como Asistente de Finanzas Diplomatico.{/r} {c}El cliente debe la factura #101 vencida hace 15 d√≠as. Es un buen cliente.{/c} {m}Escribe un recordatorio de pago.{/m} {l}No uses la palabra "deuda" ni amenaces. Asume que fue un olvido.{/l} {f}Email breve y cordial.{/f}',
                '<div class="bg-white p-2 text-xs italic text-slate-600">"Hola [Nombre], solo para chequear si recibieron la factura #101, quiz√°s se traspapel√≥..."</div>',
                false, ["Muy Agresivo", "Sin Tacto"]),

            // 8. Crear Agenda de Reuni√≥n
            createCase(206, 'office', 'Arquitecto de Reuniones', 'calendar_today', 'Mis reuniones se alargan y no sirven.', 
                'Haz una agenda para reuni√≥n de ventas.', 
                '{r}Act√∫a como Facilitador Agile.{/r} {c}Tenemos reuni√≥n de revisi√≥n mensual de ventas (1 hora).{/c} {m}Crea una agenda minuto a minuto para no perder tiempo.{/m} {f}Tabla: Hora | Tema | Responsable | Objetivo del bloque.{/f}',
                '<table class="w-full text-xs border-collapse"><tr><td>0-5 min</td><td>Icebreaker</td></tr><tr><td>5-20 min</td><td>Revisi√≥n KPIs</td></tr></table>',
                false, ["Sin Tiempos", "Desordenada"]),

            // 9. Feedback a Empleado (Dif√≠cil)
            createCase(207, 'office', 'Feedback Constructivo', 'psychology', 'Tengo que corregir a alguien sin desmotivarlo.', 
                'Dile a Juan que llega tarde siempre.', 
                '{r}Act√∫a como Coach de Liderazgo.{/r} {c}Juan es muy bueno t√©cnicamente, pero llega tarde a las reuniones y retrasa al equipo.{/c} {m}Escribe un guion para darle feedback 1 a 1.{/m} {l}Usa el m√©todo SBI (Situaci√≥n, Comportamiento, Impacto).{/l} {f}Guion de conversaci√≥n.{/f}',
                '<p>"Juan, en la reuni√≥n de ayer (S), llegaste 10 min tarde (B), lo que hizo que el equipo esperara y perdi√©ramos foco (I)."</p>',
                false, ["Ataque Personal", "Vago"]),

            // 10. Traducir Email Formal (Ingl√©s)
            createCase(208, 'office', 'Traductor Corporativo', 'translate', 'Mi ingl√©s es b√°sico y debo escribir al CEO global.', 
                'Traduce esto a ingl√©s formal.', 
                '{r}Act√∫a como Editor Nativo de Ingl√©s de Negocios.{/r} {c}Adjunto mi borrador en espa√±ol sobre el retraso del proyecto.{/c} {m}Trad√∫celo a un ingl√©s corporativo, profesional y directo.{/m} {l}Evita sonar como traducci√≥n literal de Google.{/l} {f}Email en ingl√©s.{/f}',
                '<div class="bg-white p-2 text-xs italic text-slate-600">"Dear Mr. Smith, I am writing to provide an update regarding..."</div>',
                false, ["Spanglish", "Informal"]),

            // 11. Comparar Listas Excel (Adjunto)
            createCase(209, 'office', 'Detective de Excel', 'find_in_page', 'Tengo dos listas y no s√© qui√©n falta.', 
                'Compara estas dos listas.', 
                '{r}Act√∫a como Analista de Datos.{/r} {c}Adjunto la Lista A (Invitados) y Lista B (Asistentes).{/c} {m}Dime exactamente qui√©nes de la Lista A NO est√°n en la Lista B.{/m} {l}Entrega solo los nombres faltantes.{/l} {f}Lista simple.{/f}',
                '<p>Faltaron:</p><ul class="list-disc ml-4 text-xs"><li>Pedro Perez</li><li>Ana Garcia</li></ul>',
                false, ["Confuso", "No Filtra"]),

            // 12. Ideas Team Building
            createCase(210, 'office', 'Gerente de Felicidad', 'celebration', 'El equipo remoto est√° desconectado.', 
                'Ideas para motivar al equipo.', 
                '{r}Act√∫a como Experto en Cultura Remota.{/r} {c}Tengo un equipo de 10 personas trabajando desde casa.{/c} {m}Dame 3 ideas de actividades de 15 minutos para el viernes.{/m} {l}Que se puedan hacer por Zoom y sin costo.{/l} {f}Actividad + Instrucciones.{/f}',
                '<p class="font-bold">"Tour del Escritorio":</p> Cada uno muestra un objeto curioso de su mesa y cuenta la historia.',
                false, ["Cringe", "Requiere Presupuesto"]),

            // 13. Job Description (Adjunto Notas)
            createCase(211, 'office', 'Reclutador IT', 'badge', 'Necesito contratar a alguien y no s√© escribir el aviso.', 
                'Haz un aviso de trabajo.', 
                '{r}Act√∫a como Headhunter Especialista.{/r} {c}Busco un Asistente Administrativo. Adjunto mis notas sueltas sobre lo que debe hacer.{/c} {m}Redacta una Descripci√≥n de Cargo (JD) atractiva.{/m} {f}T√≠tulo del Cargo -> Responsabilidades -> Requisitos -> Beneficios.{/f}',
                '<p class="font-bold">Asistente Administrativo Estrella</p><p class="text-xs">Buscamos a la persona que mantendr√° el orden...</p>',
                false, ["Aburrido", "Sin Estructura"]),

            // 14. Excel: Formato Condicional
            createCase(212, 'office', 'Sem√°foro de Excel', 'traffic', 'Quiero que la tabla me avise si algo va mal.', 
                'Ponle colores a la tabla.', 
                '{r}Act√∫a como Instructor de Excel.{/r} {c}Adjunto tabla de inventario. Quiero que se ponga rojo si el stock es menor a 5.{/c} {m}Expl√≠came c√≥mo configurar el Formato Condicional.{/m} {f}Paso 1, Paso 2, Paso 3.{/f}',
                '<ol class="list-decimal ml-4 text-xs"><li>Selecciona la columna "Stock".</li><li>Ve a Formato Condicional > Reglas para resaltar celdas > Es menor que...</li><li>Escribe "5" y elige Rojo.</li></ol>',
                false, ["No Explica Pasos", "Confuso"]),

            // 15. Carta de Renuncia
            createCase(213, 'office', 'Salida Elegante', 'door_front', 'Me voy de la empresa y no quiero quedar mal.', 
                'Escribe mi renuncia.', 
                '{r}Act√∫a como Asesor de Carrera.{/r} {c}Me voy porque me ofrecieron m√°s sueldo en otro lado, pero quiero dejar las puertas abiertas aqu√≠.{/c} {m}Redacta una carta de renuncia formal y agradecida.{/m} {l}No menciones el dinero.{/l} {f}Carta Formal.{/f}',
                '<div class="bg-white p-2 text-xs italic text-slate-600">"Estimados, por medio de la presente comunico mi renuncia... Agradezco profundamente las oportunidades..."</div>',
                false, ["Muy Seca", "Quema Puentes"]),

            // 16. Excel: Corregir Fechas (Adjunto)
            createCase(214, 'office', 'Arregla-Fechas', 'calendar_month', 'El sistema me baj√≥ las fechas al rev√©s (mes/d√≠a).', 
                'Arregla estas fechas que est√°n mal.', 
                '{r}Act√∫a como Experto en Datos.{/r} {c}Adjunto lista de fechas en formato gringo (MM/DD/YYYY) y mi Excel est√° en espa√±ol (DD/MM/YYYY).{/c} {m}Dame una f√≥rmula para invertirlas.{/m} {f}F√≥rmula de texto.{/f}',
                '<div class="font-mono text-xs bg-slate-800 text-green-400 p-2 rounded">=FECHA(DERECHA(A1;4);IZQUIERDA(A1;2);EXTRAE(A1;4;2))</div>',
                false, ["Manual", "Lento"]),

            // 17. Resumir Hilo de Correos (Adjunto)
            createCase(215, 'office', 'Resumidor de Cadenas', 'mail', 'Me copiaron en un email con 30 respuestas.', 
                'Qu√© pas√≥ en estos correos.', 
                '{r}Act√∫a como Asistente Personal Inteligente.{/r} {c}Adjunto una cadena de correos eterna sobre el "Evento de Fin de A√±o".{/c} {m}Dime en 3 puntos: ¬øEn qu√© qued√≥? ¬øQu√© debo hacer yo?{/m} {f}Resumen Ejecutivo.{/f}',
                '<ul class="list-disc ml-4 text-xs"><li>Fecha confirmada: 15 Dic.</li><li>Tu tarea: Aprobar presupuesto antes del Jueves.</li></ul>',
                false, ["Lee Todo", "Pierde Tiempo"]),

            // 18. Plan de Proyecto Simple
            createCase(216, 'office', 'Project Manager Express', 'checklist', 'Tengo un proyecto nuevo y no s√© por d√≥nde empezar.', 
                'Organiza este proyecto.', 
                '{r}Act√∫a como PMP Certificado.{/r} {c}Debemos organizar la "Fiesta de Navidad" para 100 personas.{/c} {m}Crea una lista de tareas dividida por fases (Pre, Durante, Post).{/m} {f}Lista de Checklist.{/f}',
                '<p class="font-bold">Fase 1: Planificaci√≥n</p> [ ] Definir Presupuesto...<br><p class="font-bold">Fase 2: Ejecuci√≥n</p> [ ] Reservar Local...',
                false, ["Desordenado", "Olvida Pasos"]),

            // 19. Mensaje de Ausencia (Vacaciones)
            createCase(217, 'office', 'Modo Vacaciones', 'beach_access', 'Me voy de vacaciones y necesito el auto-reply.', 
                'Mensaje de fuera de oficina.', 
                '{r}Act√∫a como Profesional Organizado.{/r} {c}Estar√© fuera del 1 al 15 de Febrero. Para urgencias contactar a Ana.{/c} {m}Redacta mi respuesta autom√°tica de correo.{/m} {l}Divertido pero profesional.{/l} {f}Texto del correo.{/f}',
                '<div class="bg-white p-2 text-xs italic text-slate-600">"Hola, estoy recargando bater√≠as üîã. Vuelvo el 15. Si se est√° incendiando algo, habla con Ana."</div>',
                false, ["Muy Serio", "Sin Info"]),

            // 20. Excel: Concatenar (Unir Nombres)
            createCase(218, 'office', 'Unificador de Celdas', 'join', 'Tengo Nombre en Columna A y Apellido en B.', 
                'Junta nombre y apellido.', 
                '{r}Act√∫a como Ayudante de Excel.{/r} {c}Adjunto tabla. Columna A: Nombre, Columna B: Apellido.{/c} {m}Dame la f√≥rmula para unirlos en una sola celda con un espacio al medio.{/m} {f}F√≥rmula simple.{/f}',
                '<div class="font-mono text-xs bg-slate-800 text-green-400 p-2 rounded">=A2 & " " & B2</div>',
                false, ["Manual", "Lento"]),


            // ==========================================================
            // OTRAS CATEGORIAS (Muestra peque√±a)
            // ==========================================================
            createCase(90, 'finance', 'FBI Salary Negotiator', 'verified_user', 'Miedo a pedir aumento.', 'Dame argumentos...', '{r}Act√∫a como Ex-Negociador del FBI...{/r}', '...', false),
            createCase(41, 'marketing', 'Estratega de Ganchos', 'bolt', 'Mis videos no tienen visitas.', 'Ideas para videos...', '{r}Act√∫a como Consultor Viral...{/r}', '...', false),
        ];

        // --- L√ìGICA UI ---
        let currentCategory = 'office'; 
        let searchQuery = '';

        function init() {
            renderCategories();
            renderCaseList();
            selectCase(22); 
        }

        function renderCategories() {
            const nav = document.getElementById('category-nav');
            nav.innerHTML = Object.keys(categoryConfig).map(key => {
                const conf = categoryConfig[key];
                const isActive = currentCategory === key;
                const activeClass = isActive 
                    ? `bg-${conf.color}-100 text-${conf.color}-700 border-${conf.color}-200 shadow-sm ring-1 ring-${conf.color}-300` 
                    : `bg-white text-slate-500 border-slate-100 hover:bg-slate-50`;
                return `<button onclick="setCategory('${key}')" class="flex items-center gap-2 px-4 py-2 rounded-full border text-xs font-bold transition-all whitespace-nowrap ${activeClass}"><span class="material-symbols-outlined text-lg">${conf.icon}</span>${conf.label}</button>`;
            }).join('');
        }

        function renderCaseList() {
            const listEl = document.getElementById('case-list');
            const filtered = allCases.filter(c => (c.category === currentCategory || searchQuery !== '') && (c.title.toLowerCase().includes(searchQuery.toLowerCase()) || c.problem.toLowerCase().includes(searchQuery.toLowerCase())));
            
            document.getElementById('count-display').innerText = allCases.length; 
            
            if (filtered.length === 0) {
                listEl.innerHTML = `<div class="p-8 text-center text-slate-400 text-xs">No hay resultados</div>`;
                return;
            }

            listEl.innerHTML = filtered.map(c => {
                const config = categoryConfig[c.category];
                const iconDisplay = c.locked ? 'lock' : c.icon;
                const iconColorClass = c.locked ? 'text-slate-300 bg-slate-50' : `text-${config.color}-500 bg-white`;
                const lockOpacity = c.locked ? 'opacity-70 grayscale' : '';
                
                return `<button onclick="selectCase(${c.id})" class="w-full text-left p-3 rounded-lg group transition-all mb-2 hover:bg-slate-50 border border-transparent relative overflow-hidden ${lockOpacity}">
                    <div class="flex items-center gap-3 pl-2">
                        <div class="w-8 h-8 rounded-lg border border-slate-100 flex items-center justify-center flex-none shadow-sm ${iconColorClass}">
                            <span class="material-symbols-outlined text-lg">${iconDisplay}</span>
                        </div>
                        <div class="overflow-hidden">
                            <h4 class="text-sm font-semibold text-slate-700 truncate group-hover:text-indigo-700 transition-colors flex items-center gap-2">
                                ${c.title} 
                                ${!c.locked ? '<span class="text-[9px] bg-green-100 text-green-700 px-1.5 rounded-full border border-green-200">GRATIS</span>' : ''}
                            </h4>
                            <p class="text-[10px] text-slate-400 truncate">${c.locked ? 'Solo miembros Premium' : c.problem}</p>
                        </div>
                    </div>
                </button>`;
            }).join('');
        }

        function selectCase(id) {
            const c = allCases.find(x => x.id === id);
            if(!c) return;

            if (c.locked) {
                openPaywall();
                return;
            }

            const conf = categoryConfig[c.category];

            // Render Detail
            document.getElementById('detail-title').innerText = c.title;
            document.getElementById('detail-icon').innerText = c.icon;
            document.getElementById('detail-icon-bg').className = `w-16 h-16 rounded-2xl flex items-center justify-center shadow-lg border-2 border-white bg-${conf.color}-50 text-${conf.color}-600`;
            document.getElementById('detail-category-badge').innerText = conf.label;
            document.getElementById('detail-category-badge').className = `text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded-full bg-${conf.color}-100 text-${conf.color}-700 border border-${conf.color}-200`;
            document.getElementById('detail-problem').innerText = c.problem;
            
            // Render Bad Prompt & Badges
            document.getElementById('detail-bad-prompt').innerText = `"${c.badPrompt}"`;
            document.getElementById('deficiency-badges').innerHTML = c.deficiencies.map(d => 
                `<span class="px-2 py-1 bg-red-50 text-red-600 text-[10px] font-bold rounded-md border border-red-100 flex items-center gap-1"><span class="material-symbols-outlined text-[10px]">warning</span>${d}</span>`
            ).join('');

            // Render Good Prompt
            document.getElementById('detail-prompt-rendered').innerHTML = renderAGIA(c.agiaPromptTagged);
            document.getElementById('preview-response').innerHTML = c.previewResponse;

            if(window.innerWidth < 768) toggleSidebar();
        }

        function setCategory(cat) {
            currentCategory = cat;
            searchQuery = '';
            document.getElementById('searchInput').value = '';
            renderCategories();
            renderCaseList();
        }

        function filterCases() {
            searchQuery = document.getElementById('searchInput').value;
            renderCaseList();
        }

        function copyPrompt() {
            const title = document.getElementById('detail-title').innerText;
            const c = allCases.find(x => x.title === title);
            if(!c) return;

            const rawText = cleanAGIA(c.agiaPromptTagged);
            navigator.clipboard.writeText(rawText);
            
            const btn = document.querySelector('button[onclick="copyPrompt()"]');
            const originalHTML = btn.innerHTML;
            
            btn.innerHTML = `<span class="material-symbols-outlined text-sm">check_circle</span> <span>¬°COPIADO!</span>`;
            btn.classList.remove('bg-indigo-600', 'text-white');
            btn.classList.add('bg-green-500', 'text-white', 'shadow-none');
            
            setTimeout(() => {
                btn.innerHTML = originalHTML;
                btn.classList.remove('bg-green-500', 'text-white', 'shadow-none');
                btn.classList.add('bg-indigo-600', 'text-white');
            }, 2000);
        }

        function openPaywall() {
            document.getElementById('paywall-modal').classList.remove('hidden');
        }
        function closePaywall() {
            document.getElementById('paywall-modal').classList.add('hidden');
        }

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('-translate-x-full');
        }

        init();
    </script>
</body>
</html>

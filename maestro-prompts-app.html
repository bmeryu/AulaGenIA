<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGIA Generator 3.0 | B√≥veda Maestra</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Custom Scrollbar */
        .custom-scroll::-webkit-scrollbar { width: 6px; height: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        
        @keyframes slideUp { from { transform: translateY(100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .toast-enter { animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }

        @keyframes pulse-soft { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        .animate-pulse-soft { animation: pulse-soft 2s infinite; }

        /* AGIA Tag Styles */
        .hl-tag { transition: all 0.2s; display: inline-block; padding: 2px 4px; border-radius: 4px; margin: 0 2px; font-weight: 600; font-size: 0.9em;}
        .hl-rol { color: #1e3a8a; background: #bfdbfe; border: 1px solid #60a5fa; }           /* 1. ROL (Azul) */
        .hl-contexto { color: #064e3b; background: #a7f3d0; border: 1px solid #34d399; }      /* 2. CONTEXTO (Verde) */
        .hl-meta { color: #78350f; background: #fde68a; border: 1px solid #fbbf24; }          /* 3. META (Amarillo/Ambar) */
        .hl-restricciones { color: #7f1d1d; background: #fecaca; border: 1px solid #f87171; } /* 4. RESTRICCIONES (Rojo) */
        .hl-formato { color: #581c87; background: #e9d5ff; border: 1px solid #a855f7; }       /* 5. FORMATO (Morado) */

        /* Variable Input Highlight */
        .var-highlight { 
            background-color: #e0f2fe; 
            border-bottom: 2px solid #0ea5e9; 
            color: #0284c7; 
            font-weight: 600;
            padding: 0 4px;
            border-radius: 2px;
            animation: highlightChange 0.5s ease;
        }
        
        .var-highlight-bad {
            background-color: #f1f5f9;
            border-bottom: 2px solid #94a3b8;
            color: #64748b;
            font-weight: 600;
            padding: 0 4px;
        }

        @keyframes highlightChange { 0% { background-color: #38bdf8; color: white; } 100% { background-color: #e0f2fe; color: #0284c7; } }

        /* Premium Overlay Glassmorphism */
        .premium-blur { 
            backdrop-filter: blur(8px); 
            background: rgba(255, 255, 255, 0.8);
        }
        
        /* Sticky Banner */
        .sticky-banner {
            background: linear-gradient(90deg, #1e293b 0%, #0f172a 100%);
        }
        
        /* Utilities */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden text-slate-800 bg-slate-50">

    <!-- SALES TRIGGER: Top Sticky Banner -->
    <div id="sticky-banner" class="sticky-banner text-white py-2 px-4 flex justify-center items-center gap-4 text-xs md:text-sm z-50 shadow-md flex-none">
        <div class="flex items-center gap-2">
            <span class="bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded animate-pulse">OFERTA FLASH</span>
            <span>Aprende a crear estos sistemas. Curso Completo con <strong>50% OFF</strong></span>
        </div>
        <div class="font-mono font-bold text-yellow-400 bg-white/10 px-2 py-0.5 rounded" id="countdown">14:59</div>
        <button onclick="openPaywall()" class="bg-yellow-400 hover:bg-yellow-300 text-slate-900 px-3 py-1 rounded font-bold text-xs transition-colors shadow-sm">
            VER CURSO
        </button>
    </div>

    <!-- Header -->
    <header class="bg-white border-b border-slate-200 z-30 flex-none relative shadow-sm">
        <div class="max-w-[1920px] mx-auto px-4 sm:px-6 lg:px-8 py-3">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-9 h-9 bg-indigo-600 rounded-lg flex items-center justify-center text-white font-black text-lg shadow-lg shadow-indigo-200">
                        A
                    </div>
                    <div>
                        <h1 class="text-sm font-bold text-slate-800 leading-tight">AGIA Generator <span class="text-indigo-600">3.0</span></h1>
                        <p class="text-[10px] text-slate-500 font-medium">Laboratorio de Ingenier√≠a de Prompts</p>
                    </div>
                </div>
                
                <div class="flex gap-2">
                    <button onclick="showWelcome()" class="hidden md:flex text-slate-400 hover:text-indigo-600 transition-colors items-center gap-1 text-xs font-medium px-2 py-1">
                        <span class="material-symbols-outlined text-base">help</span> Tutorial
                    </button>
                    <button onclick="openPaywall()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-xs font-bold shadow-lg shadow-indigo-200 transition-all flex items-center gap-2 transform hover:scale-105">
                        <span class="material-symbols-outlined text-sm">school</span>
                        <span class="hidden sm:inline">ACCEDER AL CURSO</span>
                    </button>
                </div>
            </div>
            
            <!-- Category Navigation -->
            <div class="mt-4 flex space-x-2 overflow-x-auto custom-scroll pb-2 no-scrollbar" id="category-nav">
                <!-- Injected by JS -->
            </div>
        </div>
    </header>

    <!-- Main Layout -->
    <div class="flex flex-1 overflow-hidden max-w-[1920px] mx-auto w-full relative">
        
        <!-- Sidebar (List of Tools) -->
        <aside class="w-full md:w-80 flex flex-col bg-slate-50 border-r border-slate-200 flex-none z-20 transition-transform duration-300 absolute md:relative h-full transform -translate-x-full md:translate-x-0 shadow-xl md:shadow-none" id="sidebar">
            <div class="p-3 border-b border-slate-200 sticky top-0 bg-slate-50/95 backdrop-blur z-10">
                <div class="relative group">
                    <span class="material-symbols-outlined absolute left-3 top-2.5 text-slate-400 text-lg group-focus-within:text-indigo-500 transition-colors">search</span>
                    <input type="text" id="searchInput" placeholder="Buscar herramienta, problema..." 
                        class="w-full pl-9 pr-4 py-2.5 bg-white border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all outline-none shadow-sm"
                        onkeyup="filterCases()">
                </div>
            </div>
            <div class="flex-1 overflow-y-auto custom-scroll p-2 space-y-1" id="case-list">
                <!-- Cases JS -->
            </div>
            <!-- User Status Footer -->
            <div class="p-4 border-t border-slate-200 bg-white">
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-slate-500">
                        <span class="material-symbols-outlined text-sm">visibility</span>
                    </div>
                    <div class="flex-1">
                        <p class="text-xs font-bold text-slate-700">Modo Visitante</p>
                        <p class="text-[10px] text-slate-400">Comparador Interactivo</p>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Workspace -->
        <main class="flex-1 flex flex-col bg-white overflow-hidden relative w-full">
            <div id="workspace-empty" class="hidden flex-col items-center justify-center h-full text-center p-8">
                <span class="material-symbols-outlined text-6xl text-slate-200 mb-4">compare</span>
                <h3 class="text-slate-400 font-medium">Selecciona un caso de la lista para comenzar</h3>
            </div>

            <div id="case-detail" class="flex-1 overflow-y-auto custom-scroll p-4 md:p-8 pb-32">
                <div class="max-w-7xl mx-auto fade-in">
                    
                    <!-- Header Tool -->
                    <div class="mb-8">
                        <div class="flex items-center gap-2 mb-2">
                            <span id="detail-category-badge" class="text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded-full border">Categor√≠a</span>
                            <span class="flex items-center gap-1 text-[10px] font-medium text-blue-600 bg-blue-50 px-2 py-0.5 rounded border border-blue-100">
                                <span class="material-symbols-outlined text-[12px]">experiment</span> Laboratorio de Comparaci√≥n
                            </span>
                        </div>
                        <h2 id="detail-title" class="text-3xl font-bold text-slate-900 tracking-tight mb-2">T√≠tulo del Caso</h2>
                        <p id="detail-problem" class="text-sm text-slate-500 leading-relaxed max-w-2xl"></p>
                    </div>

                    <!-- THE COMPARISON ENGINE -->
                    <div class="grid lg:grid-cols-12 gap-6">
                        
                        <!-- Left: Input Variables (Control Panel) -->
                        <div class="lg:col-span-3 space-y-4">
                            <div class="bg-slate-50 rounded-xl p-5 border border-slate-200 shadow-sm sticky top-4">
                                <div class="flex items-center gap-2 mb-4 border-b border-slate-200 pb-3">
                                    <span class="material-symbols-outlined text-indigo-500">tune</span>
                                    <h3 class="text-sm font-bold text-slate-700 uppercase">Tus Datos</h3>
                                </div>
                                <div id="variables-container" class="space-y-4">
                                    <!-- Inputs generated dynamically -->
                                    <div class="text-xs text-slate-400 italic">Cargando variables...</div>
                                </div>
                                <div class="mt-4 pt-4 border-t border-slate-200 text-[10px] text-slate-400 text-center italic">
                                    Edita los campos y mira c√≥mo cambia el resultado a la derecha.
                                </div>
                            </div>
                        </div>

                        <!-- Right: The Comparison (The Selling Point) -->
                        <div class="lg:col-span-9 grid md:grid-cols-2 gap-6">
                            
                            <!-- 1. THE BAD WAY (Pain Agitation) -->
                            <div class="flex flex-col gap-4">
                                <div class="bg-slate-100 rounded-xl border border-slate-200 overflow-hidden opacity-90">
                                    <div class="bg-slate-200 px-4 py-3 border-b border-slate-300 flex justify-between items-center">
                                        <div class="flex items-center gap-2">
                                            <span class="material-symbols-outlined text-slate-500 text-sm">cancel</span>
                                            <span class="text-xs font-bold text-slate-600 uppercase tracking-wider">Lo que hace el 99%</span>
                                        </div>
                                    </div>
                                    <div class="p-5">
                                        <div class="text-[10px] font-bold text-slate-400 uppercase mb-2">Prompt T√≠pico (Novato)</div>
                                        <div id="bad-prompt-rendered" class="font-mono text-xs text-slate-600 bg-white p-3 rounded border border-slate-200 mb-4 italic">
                                            ...
                                        </div>
                                        <div class="text-[10px] font-bold text-slate-400 uppercase mb-2">Resultado Mediocre</div>
                                        <div id="bad-result-preview" class="text-xs text-slate-500 leading-relaxed bg-slate-50 p-3 rounded border border-slate-200 h-40 overflow-y-auto custom-scroll">
                                            ...
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 2. THE AGIA WAY (Solution) -->
                            <div class="flex flex-col gap-4 relative">
                                <!-- Connecting Arrow (Desktop only) -->
                                <div class="hidden md:block absolute top-1/2 -left-3 transform -translate-y-1/2 -translate-x-1/2 z-10">
                                    <span class="material-symbols-outlined text-3xl text-indigo-200 bg-white rounded-full shadow-sm">arrow_forward</span>
                                </div>

                                <!-- Prompt Box -->
                                <div class="bg-white rounded-xl shadow-xl border border-indigo-100 overflow-hidden ring-1 ring-indigo-50 relative group">
                                    <div class="bg-indigo-600 text-white px-4 py-3 flex justify-between items-center">
                                        <div class="flex items-center gap-2">
                                            <span class="material-symbols-outlined text-sm">check_circle</span>
                                            <span class="text-xs font-bold uppercase tracking-wider">M√©todo AGIA (Pro)</span>
                                        </div>
                                        <button id="copy-btn" onclick="copyPrompt()" class="flex items-center gap-1 text-[10px] bg-white/20 hover:bg-white/30 text-white px-2 py-1 rounded transition-colors">
                                            <span class="material-symbols-outlined text-[10px]">content_copy</span> COPIAR
                                        </button>
                                    </div>
                                    
                                    <div class="p-5 relative">
                                        <div class="text-[10px] font-bold text-indigo-400 uppercase mb-2 flex justify-between">
                                            <span>Prompt Estructurado</span>
                                            <span class="flex items-center gap-1 text-green-600 bg-green-50 px-1.5 rounded"><span class="material-symbols-outlined text-[10px]">bolt</span> Alta Conversi√≥n</span>
                                        </div>
                                        
                                        <!-- The AGIA Prompt -->
                                        <div id="detail-prompt-rendered" class="font-mono text-xs leading-relaxed text-slate-700 whitespace-pre-wrap h-[200px] overflow-y-auto custom-scroll"></div>

                                        <!-- Legend Overlay -->
                                        <div class="absolute bottom-0 left-0 right-0 bg-white/95 backdrop-blur border-t border-slate-100 px-4 py-2 flex flex-wrap gap-3 text-[9px] justify-center opacity-90">
                                            <span class="flex items-center gap-1"><span class="w-2 h-2 rounded-full bg-blue-400"></span> Rol</span>
                                            <span class="flex items-center gap-1"><span class="w-2 h-2 rounded-full bg-emerald-400"></span> Contexto</span>
                                            <span class="flex items-center gap-1"><span class="w-2 h-2 rounded-full bg-amber-400"></span> Meta</span>
                                            <span class="flex items-center gap-1"><span class="w-2 h-2 rounded-full bg-red-400"></span> Restricciones</span>
                                            <span class="flex items-center gap-1"><span class="w-2 h-2 rounded-full bg-purple-400"></span> Formato</span>
                                        </div>
                                        
                                        <!-- Premium Overlay -->
                                        <div id="premium-lock" class="hidden absolute inset-0 z-20 flex flex-col items-center justify-center premium-blur text-center p-6 transition-all duration-300">
                                            <div class="w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-2xl mb-3 transform rotate-3">
                                                <span class="material-symbols-outlined text-white text-2xl">lock</span>
                                            </div>
                                            <h3 class="text-lg font-black text-slate-900 mb-1">Contenido del Curso</h3>
                                            <p class="text-xs text-slate-600 mb-4 max-w-[200px]">Aprende a construir prompts como este para cualquier industria.</p>
                                            <button onclick="openPaywall()" class="bg-slate-900 hover:bg-slate-800 text-white px-6 py-2.5 rounded-lg font-bold shadow-xl text-xs flex items-center gap-2">
                                                DESBLOQUEAR FORMULA
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Result Box (NEW) -->
                                <div class="bg-indigo-50 rounded-xl border border-indigo-100 overflow-hidden">
                                     <div class="p-5">
                                         <div class="text-[10px] font-bold text-indigo-600 uppercase mb-2 flex gap-2 items-center">
                                             <span class="material-symbols-outlined text-sm">auto_awesome</span> Resultado AGIA (Simulaci√≥n)
                                         </div>
                                         <div id="good-result-preview" class="text-xs text-slate-700 leading-relaxed h-40 overflow-y-auto custom-scroll bg-white p-3 rounded border border-indigo-100 shadow-sm"></div>
                                     </div>
                                </div>
                            </div>
                            
                        </div>
                    </div>

                </div>
            </div>
        </main>
    </div>

    <!-- Mobile Toggle -->
    <button onclick="toggleSidebar()" class="md:hidden fixed bottom-6 left-6 z-40 bg-slate-900 text-white p-4 rounded-full shadow-2xl hover:bg-slate-800 transition-colors flex items-center justify-center">
        <span class="material-symbols-outlined">menu_open</span>
    </button>

    <!-- SOCIAL PROOF TOAST (Course Sales) -->
    <div id="sales-toast" class="fixed bottom-6 left-6 z-50 transform translate-y-24 opacity-0 transition-all duration-500">
        <div class="bg-white/90 backdrop-blur border border-slate-200 p-3 rounded-lg shadow-xl flex items-center gap-3 max-w-xs">
            <div class="w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold text-xs relative">
                E
                <span class="absolute bottom-0 right-0 w-2 h-2 bg-green-500 rounded-full border border-white"></span>
            </div>
            <div>
                <p class="text-xs text-slate-800"><span class="font-bold">Estudiante #402</span> se inscribi√≥</p>
                <p class="text-[10px] text-slate-500">Curso Maestr√≠a AGIA ‚Ä¢ hace 5 min</p>
            </div>
        </div>
    </div>

    <!-- PAYWALL MODAL (Course Focused) -->
    <div id="paywall-modal" class="fixed inset-0 z-[60] hidden flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity" onclick="closePaywall()"></div>
        <div class="w-full max-w-lg relative">
            <div class="bg-white rounded-3xl shadow-2xl overflow-hidden relative animate-in fade-in zoom-in duration-300">
                <button onclick="closePaywall()" class="absolute top-4 right-4 text-white/70 hover:text-white bg-black/20 hover:bg-black/40 rounded-full p-1 z-20 transition-colors">
                    <span class="material-symbols-outlined">close</span>
                </button>
                
                <!-- Hero Section -->
                <div class="bg-indigo-900 p-8 text-center relative overflow-hidden">
                    <div class="absolute inset-0 opacity-40 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>
                    <span class="inline-block bg-yellow-400 text-slate-900 text-[10px] font-black px-2 py-0.5 rounded uppercase tracking-wide mb-3 relative z-10">M√©todo Exclusivo</span>
                    <h3 class="text-white font-black text-2xl relative z-10 leading-tight mb-2">Deja de adivinar.<br>Empieza a <span class="text-cyan-400">Ingenierizar</span>.</h3>
                    <p class="text-indigo-200 text-xs relative z-10 mt-2 max-w-xs mx-auto">Domina el modelo AGIA y multiplica tu productividad por 10.</p>
                </div>
                
                <div class="p-8">
                    <div class="text-center mb-6">
                        <p class="text-sm text-slate-500 font-medium">Lo que obtienes en el curso:</p>
                    </div>
                    <!-- Features List -->
                    <div class="grid grid-cols-2 gap-4 mb-8">
                        <div class="flex items-start gap-2">
                            <span class="material-symbols-outlined text-green-500 text-lg">school</span>
                            <div class="text-xs text-slate-600"><strong>Masterclass</strong> del modelo AGIA paso a paso.</div>
                        </div>
                        <div class="flex items-start gap-2">
                            <span class="material-symbols-outlined text-green-500 text-lg">library_books</span>
                            <div class="text-xs text-slate-600"><strong>B√≥veda PDF</strong> con 50+ templates listos.</div>
                        </div>
                        <div class="flex items-start gap-2">
                            <span class="material-symbols-outlined text-green-500 text-lg">group</span>
                            <div class="text-xs text-slate-600"><strong>Comunidad</strong> privada de alumnos.</div>
                        </div>
                        <div class="flex items-start gap-2">
                            <span class="material-symbols-outlined text-green-500 text-lg">verified</span>
                            <div class="text-xs text-slate-600"><strong>Certificado</strong> de finalizaci√≥n.</div>
                        </div>
                    </div>

                    <!-- Pricing Anchor -->
                    <div class="bg-slate-50 rounded-xl p-4 border border-slate-100 flex items-center justify-between mb-6">
                        <div>
                            <p class="text-[10px] text-slate-400 uppercase font-bold">Inversi√≥n √önica</p>
                            <div class="flex items-baseline gap-2">
                                <span class="text-2xl font-black text-slate-900">$27</span>
                                <span class="text-xs text-red-400 line-through font-medium">$97</span>
                            </div>
                        </div>
                        <div class="text-right">
                             <span class="bg-green-100 text-green-700 text-[10px] font-bold px-2 py-1 rounded-full">AHORRAS 70%</span>
                        </div>
                    </div>

                    <!-- CTA -->
                    <button class="w-full bg-indigo-600 text-white py-3.5 rounded-xl font-bold text-base hover:bg-indigo-700 transform hover:-translate-y-1 transition-all shadow-xl shadow-indigo-200 flex items-center justify-center gap-2 group">
                        INSCR√çBETE AHORA
                        <span class="material-symbols-outlined group-hover:translate-x-1 transition-transform">arrow_forward</span>
                    </button>
                    <p class="text-[10px] text-center text-slate-400 mt-3">Garant√≠a de satisfacci√≥n de 30 d√≠as.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- MAIN LOGIC & DATA -->
    <script>
        // --- 1. CONFIGURACI√ìN Y BASE DE DATOS MAESTRA ---
        
        // Funci√≥n helper para crear casos
        const createCase = (id, cat, title, icon, problem, badPrompt, badResPreview, goodPromptTagged, exampleTip, validationTip, goodResPreview, suggestedAI, locked = false, isTool = false, difficulty = 'beginner') => ({
            id, 
            category: cat, 
            title, 
            icon, 
            problem, 
            badPrompt, 
            // Si el prompt original no tiene variables, usamos el mismo. Si editamos abajo, se usa ese.
            badPromptDynamic: badPrompt, 
            badResponsePreview: badResPreview, 
            agiaPromptTagged: goodPromptTagged, 
            exampleTip, 
            validationTip,
            previewResponse: goodResPreview,
            suggestedAI, 
            locked, 
            isTool, 
            difficulty
        });

        // ==========================================
        // üß† B√ìVEDA DE PROMPTS AGIA 2.0 - DATA (CON VARIABLES REACTIVADAS)
        // ==========================================
        const allCases = [
            
            // üöÄ PRODUCTIVIDAD 10X
            createCase(101, 'productivity', 'El Limpiador de Data', 'cleaning_services', 'Excel: Base de datos sucia (Nombres, May√∫sculas).', 
                'Tengo una lista de nombres en Excel que est√° horrible, con espacios y may√∫sculas mezcladas. Dame una f√≥rmula para arreglarlos.',
                '<div class="text-xs text-slate-500 italic">"Claro, usa la funci√≥n =NOMPROPIO(). Aqu√≠ tienes el resultado:<br>Juan Perez<br>Maria Gomez"</div><div class="mt-2 text-[10px] text-red-600 font-bold flex gap-1 items-center"><span class="material-symbols-outlined text-[12px]">error</span> Problema: Soluci√≥n parcial. No quita espacios dobles ni caracteres ocultos web.</div>', 
                '{r}Act√∫a como Experto en Excel y Limpieza de Datos.{/r} {c}Estoy procesando {data_desc|una base de datos cr√≠tica} copiada de la web con errores de formato: may√∫sculas irregulares, espacios dobles internos y espacios fantasmas al inicio/final.{/c} {m}Genera una f√≥rmula maestra anidada infalible para limpiar la celda {cell|A2}.{/m} {l}No uses VBA. La f√≥rmula debe ser "copiar y pegar" y cubrir todos los errores mencionados.{/l} {f}Bloque de c√≥digo con la f√≥rmula y breve explicaci√≥n de las funciones usadas.{/f}', 
                'Entrada: "  JUAN   perez  (web) ".',
                'Verifica anidaci√≥n correcta.',
                '<div class="font-mono text-xs bg-slate-900 text-green-400 p-3 rounded mb-2 border-l-4 border-green-600 shadow-sm">=NOMPROPIO(ESPACIOS(LIMPIAR(SUSTITUIR(A2,CARACTER(160)," "))))</div><p class="text-[10px] text-slate-600 mt-1"><strong>L√≥gica:</strong><br>1. <code>SUSTITUIR</code>: Elimina espacios web (ASCII 160).<br>2. <code>LIMPIAR</code>: Quita saltos de l√≠nea.<br>3. <code>ESPACIOS</code>: Reduce dobles espacios a uno.<br>4. <code>NOMPROPIO</code>: Capitaliza formato T√≠tulo.</p>', 
                'gemini', false, false, 'beginner'),

            createCase(102, 'productivity', 'El "No" Diplom√°tico', 'block', 'Email: Rechazar cambios gratis y cobrar por ellos.', 
                'Escr√≠bele al cliente que no puedo hacer esos cambios gratis porque no est√°n en el contrato, pero ofr√©cele cobrarle extra.',
                '<div class="text-xs text-slate-500 italic">"Estimado, no podemos hacer eso gratis. Si quiere, le mando una cotizaci√≥n. Saludos."</div><div class="mt-2 text-[10px] text-red-600 font-bold flex gap-1 items-center"><span class="material-symbols-outlined text-[12px]">cancel</span> Problema: Tono seco que cierra puertas. Se siente como un rechazo, no una oportunidad.</div>', 
                '{r}Act√∫a como Gerente de Cuentas Senior experto en Negociaci√≥n.{/r} {c}El cliente solicit√≥ {client_request|funcionalidades fuera del alcance original} (Scope Creep). Debo rechazar la gratuidad sin da√±ar la relaci√≥n.{/c} {m}Redacta un email respuesta usando la t√©cnica del "S√≠ condicional": Valida la idea, pero enm√°rcala inmediatamente como una "Fase 2" o mejora que requiere presupuesto adicional.{/m} {l}Prohibido usar la palabra "No" al inicio. Tono colaborativo.{/l} {f}Estructura de Email Persuasivo.{/f}', 
                'T√©cnica: "Me encanta la idea, aqu√≠ est√° el precio".',
                'Convierte el problema en un proyecto nuevo.',
                '<div class="bg-white p-3 text-xs text-slate-700 border border-slate-200 shadow-sm rounded"><strong>Asunto:</strong> Estrategia para implementar [Mejora Solicitada]<br><br>"Hola [Cliente],<br><br>Estuve revisando tu solicitud y <strong>me parece brillante</strong>; aportar√≠a mucho valor a la usabilidad.<br><br>Dado que esto excede el alcance t√©cnico actual, lo he estructurado como un \'M√≥dulo de Expansi√≥n\'. Te adjunto la estimaci√≥n de horas para activarlo esta misma semana sin frenar el desarrollo principal.<br><br>¬øTe parece si procedemos?"</div>', 
                'chatgpt', false, false, 'intermediate'),

            createCase(103, 'productivity', 'Resumidor de Reuniones', 'groups', 'Gesti√≥n: Transcripci√≥n a Tareas.',
                'Resume esta reuni√≥n larga y dime qu√© hay que hacer.',
                '<div class="text-xs text-slate-500 italic">"Hablaron del presupuesto y de marketing. Juan dijo que iba a ver lo del dise√±o. Fin."</div><div class="mt-2 text-[10px] text-red-600 font-bold flex gap-1 items-center"><span class="material-symbols-outlined text-[12px]">do_not_disturb</span> Problema: Narrativa vaga. Nadie sabe qu√© hacer exactamente ni para cu√°ndo.</div>', 
                '{r}Act√∫a como Project Manager (PMP) obsesionado con la eficiencia.{/r} {c}Tengo la transcripci√≥n de una reuni√≥n desordenada de 1 hora sobre {topic|Presupuesto y Marketing}.{/c} {m}Extrae SOLO los "Action Items" (Tareas) y Decisiones Tomadas. Ignora toda la paja y charla social.{/m} {l}Formato estricto: Tarea | Responsable | Deadline.{/l} {f}Tabla Markdown.{/f}',
                'Input: Texto sucio de Teams/Zoom.',
                'Busca verbos de acci√≥n.',
                '<table class="w-full text-[10px] border border-slate-300 mt-1"><thead><tr class="bg-indigo-100 text-indigo-800"><th>Tarea</th><th>Owner</th><th>Deadline</th></tr></thead><tbody><tr><td class="p-1 border">Aprobar presupuesto Q4</td><td class="p-1 border font-bold">Sofia</td><td class="p-1 border text-red-600">Viernes 12:00</td></tr><tr><td class="p-1 border">Contactar proveedor AWS</td><td class="p-1 border font-bold">Carlos</td><td class="p-1 border">Hoy PM</td></tr></tbody></table>',
                'claude', false, false, 'beginner'),

            createCase(104, 'productivity', 'Traductor Corporativo', 'translate', 'Email: Ingl√©s de negocios para CEO.', 
                'Necesito traducir este correo al ingl√©s para mand√°rselo al CEO de la empresa en Estados Unidos.',
                '<div class="text-xs text-slate-500 italic">"Hello boss, I tell you that the project is going to be late two days because of a technical problem with the server, but we are fixing it already."</div><div class="mt-2 text-[10px] text-red-600 font-bold flex gap-1 items-center"><span class="material-symbols-outlined text-[12px]">translate</span> Problema: Traducci√≥n literal y tono demasiado informal ("Hello boss").</div>', 
                '{r}Act√∫a como Editor Nativo de Ingl√©s de Negocios (Nivel C-Level).{/r} {c}Tengo un borrador en espa√±ol informando {problem|un retraso de 2 d√≠as} debido a {cause|una ca√≠da de servidores}, que debo enviar al CEO en Estados Unidos.{/c} {m}Traduce y eleva este texto a un ingl√©s corporativo, sofisticado y directo, que transmita que tenemos control total sobre la situaci√≥n a pesar del inconveniente.{/m} {l}Evita sonar como una traducci√≥n literal. Jam√°s uses "Hello boss", utiliza "Dear Mr. [Apellido]".{/l} {f}Entr√©game el email formal listo para ser enviado.{/f}', 
                'Contexto: El retraso es de 2 d√≠as por ca√≠da de servidor.',
                'El texto debe usar conectores formales como "However", "Regarding".',
                '<div class="bg-white p-3 text-xs italic text-slate-600 border-l-4 border-indigo-200">"Dear Mr. Smith,<br><br>I am writing to provide an update regarding the project timeline. Due to unforeseen server latency issues encountered yesterday, we are currently navigating a 48-hour adjustment in the delivery schedule. However, the team has already mitigated the root cause, and we are confident in meeting the revised milestone by Thursday."</div>', 
                'chatgpt', false, false, 'intermediate'),

            // üí∞ FINANZAS
            createCase(201, 'finance', 'Analista Financiero (Buffett)', 'trending_up', 'Inversi√≥n: Analizar Balance General.',
                '¬øInvierto en esta empresa? Aqu√≠ est√° su balance. Dime si es buena.',
                '<div class="text-xs text-slate-500 italic">"Parece una empresa s√≥lida con muchos activos. Podr√≠a ser una buena inversi√≥n a largo plazo."</div><div class="mt-2 text-[10px] text-red-600 font-bold flex gap-1 items-center"><span class="material-symbols-outlined text-[12px]">analytics</span> Problema: Opini√≥n subjetiva basada en "pareceres", sin an√°lisis de ratios de riesgo real.</div>', 
                '{r}Act√∫a como Analista de Value Investing (Escuela Warren Buffett).{/r} {c}Adjunto el {docs|Balance General y Estado de Resultados}.{/c} {m}Realiza un an√°lisis fundamental enfocado en la salud financiera. Calcula: Margen Neto, Ratio de Deuda/Equity y ROE.{/m} {l}S√© esc√©ptico. Busca banderas rojas.{/l} {f}Tabla de Ratios + Veredicto (COMPRAR / VENDER / ESPERAR).{/f}',
                'Busca el "Moat" (Ventaja competitiva).',
                'Calcula deuda real.',
                '<div class="text-xs bg-slate-50 p-2 rounded"><p class="font-bold text-slate-700 border-b mb-1">üìä An√°lisis Fundamental R√°pido</p><div class="grid grid-cols-2 gap-2 mb-2"><div><span class="text-slate-500">ROE:</span> <span class="text-green-600 font-bold">18%</span> ‚úÖ</div><div><span class="text-slate-500">Deuda/Equity:</span> <span class="text-red-600 font-bold">2.5</span> ‚ö†Ô∏è</div></div><p><strong>Veredicto:</strong> <span class="bg-yellow-100 text-yellow-800 px-1 rounded font-bold">ESPERAR</span>. Aunque es rentable, est√° peligrosamente endeudada. Esperar a que baje el ratio de deuda a <1.0.</p></div>',
                'claude', true, false, 'advanced'),

            // üî• VENTAS
            createCase(301, 'sales', 'FBI Salary Negotiator', 'verified_user', 'Carrera: Pedir aumento de sueldo.', 
                'Quiero pedir un 20% de aumento. Dame un guion para decirle a mi jefe.',
                '<div class="text-xs text-slate-500 italic">"Jefe, he trabajado duro y la inflaci√≥n est√° alta. Merezco un aumento."</div><div class="mt-2 text-[10px] text-red-600 font-bold flex gap-1 items-center"><span class="material-symbols-outlined text-[12px]">thumb_down</span> Problema: Argumento centrado en TI ("yo necesito"), no en la empresa ("yo aporto").</div>', 
                '{r}Act√∫a como Negociador Experto del FBI (Estilo Chris Voss).{/r} {c}Voy a pedir un aumento. Mis logros: {logros|Aument√© ventas un 15% y reduje costos 5%}.{/c} {m}Crea un guion de negociaci√≥n basado en VALOR, no en necesidad. Usa "Preguntas Calibradas" para que el jefe llegue solo a la conclusi√≥n de darme el aumento.{/m} {f}Guion paso a paso: Anclaje -> Evidencia -> Cierre.{/f}', 
                'Usa: "¬øC√≥mo se supone que logre X...?"',
                'Evita el "S√≠/No".',
                '<div class="bg-white p-2 text-xs italic text-slate-600 border-l-4 border-indigo-500"><p class="mb-1"><strong>T√∫:</strong> "En los √∫ltimos 12 meses, mis iniciativas han generado $50k adicionales netos a la empresa."</p><p class="mb-1"><strong>Jefe:</strong> "No hay presupuesto."</p><p><strong>T√∫ (Calibrada):</strong> "¬øC√≥mo podr√≠amos ajustar mi compensaci√≥n para que sea justo con el valor de mercado actual, sin afectar el presupuesto operativo de otras √°reas?"</p></div>', 
                'chatgpt', false, false, 'advanced'),

            createCase(303, 'sales', 'Cold Email B2B (Rompehielos)', 'ac_unit', 'Ventas: Email en fr√≠o que s√≠ abren.',
                'Escribe un mail para ofrecer mis servicios de dise√±o web a dentistas.',
                '<div class="text-xs text-slate-500 italic">"Hola, somos la agencia X y hacemos webs bonitas. Tenemos ofertas. Cont√°ctanos."</div><div class="mt-2 text-[10px] text-red-600 font-bold flex gap-1 items-center"><span class="material-symbols-outlined text-[12px]">delete</span> Problema: Spam gen√©rico centrado en caracter√≠sticas. Va directo a la papelera.</div>', 
                '{r}Act√∫a como Experto en Cold Emailing B2B.{/r} {c}Target: {target|Due√±os de cl√≠nicas dentales ocupados}. Problema: {pain|Sus webs viejas no permiten agendar online}.{/c} {m}Escribe un email de <75 palabras enfocado 100% en SU dolor ({pain_short|perder pacientes}) y una soluci√≥n espec√≠fica.{/m} {l}Asunto intrigante. Nada de "Hola, somos...".{/l} {f}Asunto + Cuerpo.{/f}',
                'Pain Point: Silla vac√≠a.',
                'Call to Action (CTA) de bajo riesgo.',
                '<p class="font-bold text-xs mb-1">Asunto: Pacientes perdidos en [Nombre Cl√≠nica]</p><div class="bg-white p-2 text-xs italic text-slate-600">"Hola Dr. Soto, intent√© agendar hora en su web pero tard√≥ 8 segundos en cargar. El 40% de los pacientes abandona a los 3 segundos.<br><br>Implement√© un sistema de "Agenda en 1-Clic" para la Cl√≠nica dental X y llenaron su agenda en 2 semanas. ¬øLe cuento c√≥mo funciona en una llamada de 5 min?"</div>',
                'claude', false, false, 'intermediate'),

            // üé® ARTE
            createCase(401, 'art', 'Fotograf√≠a de Producto (Cinem√°tica)', 'camera_enhance', 'Midjourney: Foto comercial realista.', 
                'Quiero una foto de una botella de jugo de naranja que se vea rica. Dame el prompt.',
                '<div class="text-xs text-slate-500 italic">"Una botella de jugo de naranja en una mesa con frutas."</div><div class="mt-2 text-[10px] text-red-600 font-bold flex gap-1 items-center"><span class="material-symbols-outlined text-[12px]">image_not_supported</span> Problema: Resultado plano, parece dibujo animado o stock barato. Falta direcci√≥n de arte.</div>', 
                '{r}Act√∫a como Fot√≥grafo Publicitario y Director de Arte.{/r} {c}Producto: {product|Jugo de Naranja Premium}.{/c} {m}Construye un prompt t√©cnico para Midjourney v6.{/m} {l}Incluye: Iluminaci√≥n, Tipo de C√°mara, Lente, Entorno y Par√°metros de estilo (--s, --style raw).{/l} {f}Bloque de c√≥digo listo para copiar.{/f}', 
                'Usa "Backlighting" para traslucidez.',
                'Gotas de condensaci√≥n = frescura.',
                '<div class="font-mono text-[10px] bg-slate-900 text-purple-300 p-2 rounded border border-purple-900 shadow-lg">/imagine prompt: extreme close-up shot of a glass bottle of orange juice, condensation droplets on glass, cinematic backlighting, sun rays passing through liquid, glowing orange color, surrounded by fresh orange slices and green leaves, wooden rustic table, bokeh orchard background, shot on Sony A7R IV, 85mm lens, f/1.8, photorealistic, 8k, --ar 4:5 --style raw --s 250</div>', 
                'midjourney', false, false, 'advanced'),

            createCase(405, 'art', 'Logo Minimalista (Paul Rand)', 'architecture', 'Dise√±o: Logo que escale.',
                'Necesito un logo para una empresa de env√≠os con drones. Algo moderno.',
                '<div class="text-xs text-slate-500 italic">"Un dron llevando una caja azul con letras modernas."</div><div class="mt-2 text-[10px] text-red-600 font-bold flex gap-1 items-center"><span class="material-symbols-outlined text-[12px]">draw</span> Problema: Literalidad. Los logos complejos no funcionan en tama√±os peque√±os (favicon).</div>', 
                '{r}Act√∫a como Dise√±ador Gr√°fico Minimalista (Estilo Bauhaus/Paul Rand).{/r} {c}Empresa: {company_name|"AeroFast"} ({company_desc|Log√≠stica Drones}).{/c} {m}Describe un isotipo abstracto y geom√©trico que sugiera velocidad y aire, sin mostrar un dron literal.{/m} {f}Prompt descriptivo conceptual.{/f}',
                'Espacio negativo.',
                'Geometr√≠a simple.',
                '<p class="text-xs text-slate-700">"Un hex√°gono equil√°tero (representando la caja) formado por tres flechas o vectores de velocidad que convergen en el centro, utilizando espacio negativo. Color: Naranja El√©ctrico sobre fondo blanco. Estilo plano, vectorial, sin sombras."</p>',
                'midjourney', false, false, 'intermediate'),

            // üß† CEREBRO DIGITAL (TECH)
            createCase(602, 'tech', 'SQL Query Optimizer', 'database', 'Data: Consultas eficientes.',
                'S√°came los 10 clientes que m√°s compraron el √∫ltimo mes de la base de datos.',
                '<div class="text-xs text-slate-500 italic">"SELECT * FROM ventas WHERE fecha = mes_pasado"</div><div class="mt-2 text-[10px] text-red-600 font-bold flex gap-1 items-center"><span class="material-symbols-outlined text-[12px]">data_array</span> Problema: Query ineficiente (SELECT *), no agrupa por cliente, sintaxis incorrecta.</div>', 
                '{r}Act√∫a como Senior Data Engineer.{/r} {c}Tablas: {tables|`Users` (id, name), `Orders` (id, user_id, amount, created_at)}.{/c} {m}Escribe una Query SQL optimizada para obtener el Top 10 Clientes por monto total (SUM) en los √∫ltimos 30 d√≠as.{/m} {f}Bloque SQL con comentarios.{/f}',
                'Usa JOIN expl√≠cito.',
                'Filtra fecha antes de agrupar.',
                '<div class="font-mono text-[10px] bg-slate-900 text-blue-300 p-2 rounded mb-1">SELECT u.name, SUM(o.amount) as total_spent<br>FROM Users u<br>JOIN Orders o ON u.id = o.user_id<br>WHERE o.created_at >= DATE("now", "-30 days")<br>GROUP BY u.id<br>ORDER BY total_spent DESC<br>LIMIT 10;</div>',
                'chatgpt', false, false, 'advanced'),

            createCase(609, 'tech', 'Diagn√≥stico IT (Pantalla Azul)', 'bug_report', 'Soporte: Arreglar PC sin formatear.',
                'Me sali√≥ pantalla azul en Windows. ¬øQu√© hago?',
                '<div class="text-xs text-slate-500 italic">"Reinicia o formatea el equipo."</div><div class="mt-2 text-[10px] text-red-600 font-bold flex gap-1 items-center"><span class="material-symbols-outlined text-[12px]">dangerous</span> Problema: La soluci√≥n nuclear (formatear) es el √∫ltimo recurso. Falta diagn√≥stico.</div>', 
                '{r}Act√∫a como T√©cnico de Soporte Nivel 2.{/r} {c}S√≠ntoma: BSOD (Blue Screen of Death) con c√≥digo "{error_code|CRITICAL_PROCESS_DIED}".{/c} {m}Provee una lista escalonada de soluciones, desde la menos invasiva (comandos de reparaci√≥n) hasta la verificaci√≥n de hardware.{/m} {f}Pasos con comandos CMD.{/f}',
                'Comandos: sfc, dism.',
                'Verificar drivers.',
                '<div class="bg-slate-50 p-2 rounded text-xs"><p class="font-bold mb-1">Paso 1: Reparaci√≥n de Archivos</p><code class="bg-black text-white px-1">sfc /scannow</code><br><p class="mt-1 font-bold">Paso 2: Imagen de Sistema</p><code class="bg-black text-white px-1">DISM /Online /Cleanup-Image /RestoreHealth</code></div>',
                'gemini', false, false, 'intermediate'),

            // üéì EDUCACI√ìN
            createCase(701, 'education', 'Tutor Socr√°tico', 'psychology', 'Matem√°ticas: Aprender sin respuesta.', 
                'Ay√∫dame a resolver esta ecuaci√≥n cuadr√°tica x^2 - 5x + 6 = 0, pero no me des la respuesta directa, gu√≠ame para que yo la resuelva.',
                '<div class="text-xs text-slate-500 italic">"Las soluciones son x=2 y x=3. Usa la f√≥rmula general."</div><div class="mt-2 text-[10px] text-red-600 font-bold flex gap-1 items-center"><span class="material-symbols-outlined text-[12px]">school</span> Problema: La IA "spoilea" el aprendizaje dando el resultado final.</div>', 
                '{r}Act√∫a como Profesor Socr√°tico.{/r} {c}Alumno confundido con: {problem|Ecuaci√≥n cuadr√°tica x^2 - 5x + 6 = 0}.{/c} {m}Gu√≠a con preguntas, NO des respuesta.{/m} {f}Di√°logo.{/f}', 
                'Si equivoca, pregunta.',
                'Termina con pregunta.',
                '<p class="text-xs italic text-indigo-700">"¬°Hola! Vamos paso a paso. Necesitamos dos n√∫meros que multiplicados den +6 y sumados den -5. ¬øSe te ocurre alguno?"</p>', 
                'chatgpt', false, false, 'beginner'),

            // üõ†Ô∏è INGENIER√çA
            createCase(902, 'engineering', 'Chain of Thought (CoT)', 'psychology', 'L√≥gica: Pensar antes de responder.', 
                'Resuelve este problema l√≥gico complejo r√°pido.',
                '<div class="text-xs text-slate-500 italic">"La respuesta es 5."</div><div class="mt-2 text-[10px] text-red-600 font-bold flex gap-1 items-center"><span class="material-symbols-outlined text-[12px]">psychology</span> Problema: Las IAs alucinan si se les fuerza a dar una respuesta directa sin razonar primero.</div>', 
                '{r}Act√∫a como Profesor de L√≥gica Matem√°tica.{/r} {c}Problema con m√∫ltiples variables: {problem_desc|Juan tiene el doble que Ana, y Ana tiene 3 menos que Pedro...}.{/c} {m}Utiliza la t√©cnica "Chain of Thought" (Cadena de Pensamiento): Desglosa el problema paso a paso, valida cada premisa y SOLO al final entrega la conclusi√≥n.{/m} {f}Paso 1, Paso 2, Conclusi√≥n.{/f}', 
                'Pide "Piensa paso a paso".',
                'Reduce errores un 80%.',
                '<p class="text-xs text-slate-600"><strong>Paso 1:</strong> Identificamos las variables X e Y...<br><strong>Paso 2:</strong> Calculamos la derivada de...<br><strong>Paso 3:</strong> Verificamos contradicciones...<br><strong>Resultado:</strong> 42.</p>', 
                'chatgpt', true, false, 'advanced'),

            createCase(906, 'engineering', 'Salida JSON Estructurada', 'data_object', 'Dev: Respuestas para programadores.',
                'Dame una lista de los pa√≠ses de Sudam√©rica con sus capitales y monedas.',
                '<div class="text-xs text-slate-500 italic">"Chile (Santiago, Peso), Argentina (Buenos Aires, Peso), Per√∫ (Lima, Sol)..."</div><div class="mt-2 text-[10px] text-red-600 font-bold flex gap-1 items-center"><span class="material-symbols-outlined text-[12px]">code_off</span> Problema: Texto plano dif√≠cil de procesar por c√≥digo.</div>', 
                '{r}Act√∫a como Generador de API.{/r} {c}Datos de {data_topic|pa√≠ses de Sudam√©rica}.{/c} {m}Genera un Array de Objetos JSON v√°lido y estricto. Keys: {json_keys|"country", "capital", "iso_code", "currency"}.{/m} {l}Solo c√≥digo. Sin texto introductorio.{/l} {f}Bloque JSON.{/f}',
                'Especifica las keys exactas.',
                'Pide "Solo JSON".',
                '<div class="font-mono text-[10px] bg-slate-900 text-green-400 p-2 rounded">[<br>  { "country": "Chile", "capital": "Santiago", "iso": "CL" },<br>  { "country": "Argentina", "capital": "Buenos Aires", "iso": "AR" }<br>]</div>',
                'gemini', false, false, 'advanced'),

            createCase(910, 'engineering', 'Restricciones Negativas', 'do_not_disturb_on', 'T√©cnica: Lo que NO quieres.',
                'Escribe un art√≠culo sobre inteligencia artificial pero que sea f√°cil de leer.',
                '<div class="text-xs text-slate-500 italic">"La inteligencia artificial es una tecnolog√≠a revolucionaria que est√° transformando paradigmas..."</div><div class="mt-2 text-[10px] text-red-600 font-bold flex gap-1 items-center"><span class="material-symbols-outlined text-[12px]">block</span> Problema: Usa clich√©s y palabras complejas ("revolucionaria", "paradigmas") que quer√≠as evitar.</div>', 
                '{r}Act√∫a como Periodista de Tecnolog√≠a Cr√≠tico.{/r} {c}Tema: {topic|Impacto real de la IA}.{/c} {m}Escribe un p√°rrafo introductorio.{/m} {l}Restricciones Negativas (Lo que NO quiero): NO uses las palabras {banned_words|"revolucionario", "futuro", "paradigma"} ni voz pasiva. NO uses frases de m√°s de 20 palabras.{/l} {f}Texto plano.{/f}',
                'Fuerza simplicidad.',
                'Control de estilo.',
                '<p class="text-xs italic text-slate-700">"Los algoritmos ya deciden qui√©n recibe un pr√©stamo. No es ciencia ficci√≥n, es contabilidad automatizada. Mientras debatimos sobre robots asesinos, el software silenciosamente reescribe las reglas del mercado laboral."</p>',
                'chatgpt', false, false, 'intermediate')
        ];

        // --- 2. LOGICA DE LA APLICACI√ìN ---
        
        const config = {
            categories: {
                productivity: { label: "üöÄ Productividad", color: "emerald", icon: "rocket_launch" },
                finance: { label: "üí∞ Finanzas", color: "amber", icon: "monetization_on" }, 
                sales: { label: "üî• Ventas", color: "pink", icon: "campaign" },
                art: { label: "üé® Arte", color: "fuchsia", icon: "palette" },
                life: { label: "üßò Vida", color: "orange", icon: "self_improvement" },
                tech: { label: "üß† Tech", color: "violet", icon: "memory" },
                education: { label: "üéì Educaci√≥n", color: "cyan", icon: "school" },
                engineering: { label: "üõ†Ô∏è Ingenier√≠a", color: "slate", icon: "construction" }
            }
        };

        let currentPromptTemplate = "";
        let currentBadPromptTemplate = "";
        let currentVariables = {};

        function init() {
            renderCategories();
            renderCaseList();
            startCountdown();
            startSocialProof();
            const first = allCases[0];
            if(first) loadCase(first.id);
        }

        // --- CORE: VARIABLE GENERATOR LOGIC ---

        function loadCase(id) {
            const c = allCases.find(x => x.id === id);
            if(!c) return;

            document.getElementById('detail-title').innerText = c.title;
            document.getElementById('detail-problem').innerText = c.problem;
            
            // Populate Bad Result Preview
            document.getElementById('bad-result-preview').innerHTML = c.badResponsePreview;
            // Populate Good Result Preview (NEW)
            document.getElementById('good-result-preview').innerHTML = c.previewResponse;

            // Category Badge
            const cat = config.categories[c.category] || { label: 'General', color: 'slate' };
            const badge = document.getElementById('detail-category-badge');
            badge.innerText = cat.label;
            const color = cat.color || 'slate';
            badge.className = `text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded-full border bg-${color}-50 text-${color}-700 border-${color}-200`;

            // Setup Engine
            currentPromptTemplate = c.agiaPromptTagged;
            currentBadPromptTemplate = c.badPromptDynamic || c.badPrompt; // Fallback
            currentVariables = {};
            
            // 1. Detect Variables
            const regex = /{([a-z0-9_]+)\|([^}]+)}/g;
            let match;
            const varsFound = [];
            
            while ((match = regex.exec(currentPromptTemplate)) !== null) {
                varsFound.push({ key: match[1], default: match[2] });
                currentVariables[match[1]] = match[2]; 
            }

            // 2. Render Inputs
            const varContainer = document.getElementById('variables-container');
            varContainer.innerHTML = '';
            
            if (varsFound.length === 0) {
                varContainer.innerHTML = '<div class="text-xs text-slate-400">Sin variables configurables.</div>';
            } else {
                varsFound.forEach(v => {
                    const div = document.createElement('div');
                    div.innerHTML = `
                        <label class="block text-[10px] font-bold uppercase text-slate-500 mb-1 tracking-wide">${v.key.replace(/_/g, ' ')}</label>
                        <input type="text" 
                            class="w-full bg-white border border-slate-300 rounded-lg px-3 py-2 text-sm text-slate-700 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all shadow-sm"
                            value="${v.default}"
                            oninput="updateVariable('${v.key}', this.value)"
                        >
                    `;
                    varContainer.appendChild(div);
                });
            }

            // 3. Render Prompts
            renderPrompts(c.locked);
            
            // 4. Handle Lock State
            const lockOverlay = document.getElementById('premium-lock');
            const inputs = varContainer.querySelectorAll('input');

            if(c.locked) {
                lockOverlay.classList.remove('hidden');
                inputs.forEach(i => i.disabled = true);
            } else {
                lockOverlay.classList.add('hidden');
                inputs.forEach(i => i.disabled = false);
            }
        }

        function updateVariable(key, value) {
            currentVariables[key] = value;
            const isLocked = !document.getElementById('premium-lock').classList.contains('hidden');
            if(!isLocked) renderPrompts(false);
        }

        function renderPrompts(isLocked) {
            // RENDER AGIA PROMPT (RIGHT)
            let renderedAgia = currentPromptTemplate;
            Object.keys(currentVariables).forEach(key => {
                const val = currentVariables[key] || "___";
                const regex = new RegExp(`{${key}\\|[^}]+}`, 'g');
                renderedAgia = renderedAgia.replace(regex, `<span class="var-highlight">${val}</span>`);
            });

            // Parse Colors
            const tags = { r: 'rol', c: 'contexto', m: 'meta', l: 'restricciones', f: 'formato' };
            Object.keys(tags).forEach(t => {
                const className = `hl-${tags[t]}`;
                const regex = new RegExp(`{${t}}(.*?){/${t}}`, 'gs');
                renderedAgia = renderedAgia.replace(regex, `<span class="hl-tag ${className}">$1</span>`);
            });
            renderedAgia = renderedAgia.replace(/\n/g, '<br>');
            document.getElementById('detail-prompt-rendered').innerHTML = renderedAgia;


            // RENDER BAD PROMPT (LEFT) - Also Dynamic!
            let renderedBad = currentBadPromptTemplate;
            Object.keys(currentVariables).forEach(key => {
                const val = currentVariables[key] || "...";
                const regex = new RegExp(`{${key}}`, 'g');
                renderedBad = renderedBad.replace(regex, `<span class="var-highlight-bad">${val}</span>`);
            });
            document.getElementById('bad-prompt-rendered').innerHTML = `"${renderedBad}"`;
        }

        // --- UI UTILS ---

        function renderCategories() {
            const nav = document.getElementById('category-nav');
            if(!nav) return;
            nav.innerHTML = Object.keys(config.categories).map(key => {
                const conf = config.categories[key];
                return `<button onclick="filterByCategory('${key}')" class="whitespace-nowrap px-3 py-1.5 rounded-full text-xs font-medium bg-white border border-slate-200 text-slate-600 hover:border-indigo-300 hover:text-indigo-600 transition-colors flex items-center gap-1">
                    <span class="material-symbols-outlined text-sm">${conf.icon}</span> ${conf.label}
                </button>`;
            }).join('');
        }

        function filterByCategory(cat) {
            document.getElementById('searchInput').value = ''; // Reset text search
            const list = document.getElementById('case-list');
            const filtered = allCases.filter(c => c.category === cat);
            renderList(filtered);
        }

        function filterCases() { 
            const search = document.getElementById('searchInput').value.toLowerCase();
            const filtered = allCases.filter(c => 
                c.title.toLowerCase().includes(search) || 
                c.problem.toLowerCase().includes(search) ||
                c.category.toLowerCase().includes(search)
            );
            renderList(filtered);
        }

        function renderList(cases) {
            const list = document.getElementById('case-list');
            if(cases.length === 0) {
                list.innerHTML = '<div class="p-4 text-center text-xs text-slate-400">No se encontraron resultados.</div>';
                return;
            }
            list.innerHTML = cases.map(c => `
                <div onclick="loadCase(${c.id}); if(window.innerWidth<768) toggleSidebar()" class="group p-3 rounded-xl cursor-pointer hover:bg-white hover:shadow-md transition-all border border-transparent hover:border-slate-100 relative">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-lg bg-white border border-slate-200 flex items-center justify-center text-slate-500 group-hover:text-indigo-600 group-hover:border-indigo-100 transition-colors shadow-sm">
                            <span class="material-symbols-outlined">${c.locked ? 'lock' : c.icon}</span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h4 class="text-xs font-bold text-slate-700 truncate">${c.title}</h4>
                            <div class="flex items-center gap-2 mt-0.5">
                                <span class="w-1.5 h-1.5 rounded-full ${c.difficulty === 'beginner' ? 'bg-green-400' : c.difficulty === 'intermediate' ? 'bg-amber-400' : 'bg-red-400'}"></span>
                                <span class="text-[10px] text-slate-400 capitalize truncate">${c.problem.substring(0, 30)}...</span>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        function renderCaseList() {
            renderList(allCases);
        }
        
        function toggleSidebar() { document.getElementById('sidebar').classList.toggle('-translate-x-full'); }
        function openPaywall() { document.getElementById('paywall-modal').classList.remove('hidden'); }
        function closePaywall() { document.getElementById('paywall-modal').classList.add('hidden'); }
        function showWelcome() { alert("Tutorial: Selecciona un caso. Escribe tus variables a la izquierda y compara el resultado mediocre vs. el m√©todo AGIA."); }

        function copyPrompt() {
            const rawText = document.getElementById('detail-prompt-rendered').innerText;
            navigator.clipboard.writeText(rawText);
            const btn = document.getElementById('copy-btn');
            const originalHTML = btn.innerHTML;
            btn.innerHTML = `<span class="material-symbols-outlined text-[10px]">check</span>`;
            btn.classList.add('bg-green-500');
            setTimeout(() => {
                btn.innerHTML = originalHTML;
                btn.classList.remove('bg-green-500');
            }, 2000);
        }

        // --- SALES PSYCHOLOGY ---
        function startCountdown() {
            let minutes = 14; let seconds = 59;
            const el = document.getElementById('countdown');
            setInterval(() => {
                if(seconds === 0) { if(minutes === 0) return; minutes--; seconds = 59; } else { seconds--; }
                el.innerText = `${minutes}:${seconds < 10 ? '0'+seconds : seconds}`;
            }, 1000);
        }

        function startSocialProof() {
            const names = ["Carlos R.", "Ana M.", "Empresa Tech", "David L.", "Sofia P."];
            const toast = document.getElementById('sales-toast');
            setInterval(() => {
                const name = names[Math.floor(Math.random() * names.length)];
                toast.innerHTML = `
                <div class="bg-white/95 backdrop-blur border border-slate-200 p-3 rounded-lg shadow-2xl flex items-center gap-3 max-w-xs ring-1 ring-slate-900/5">
                    <div class="w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-700 font-bold text-xs relative">
                        ${name.charAt(0)}
                        <span class="absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-500 rounded-full border-2 border-white"></span>
                    </div>
                    <div>
                        <p class="text-xs text-slate-800"><span class="font-bold">${name}</span> compr√≥</p>
                        <p class="text-[10px] text-slate-500 font-medium">Curso Maestr√≠a AGIA ‚Ä¢ hace instantes</p>
                    </div>
                </div>`;
                toast.classList.remove('opacity-0', 'translate-y-24');
                setTimeout(() => { toast.classList.add('opacity-0', 'translate-y-24'); }, 4000);
            }, 20000);
        }

        window.onload = init;
    </script>
</body>
</html>

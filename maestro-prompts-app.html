<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√≥veda de Prompts AGIA | Oferta Black Friday</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts & Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        
        /* Custom Scrollbar */
        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        
        .blur-locked { filter: blur(4px); user-select: none; pointer-events: none; }
        
        /* Highlight Classes for Prompts */
        .hl-rol { background-color: #dbeafe; color: #1e40af; border-bottom: 2px solid #60a5fa; padding: 0 4px; border-radius: 4px; cursor: help; font-weight: 600; }
        .hl-contexto { background-color: #d1fae5; color: #065f46; border-bottom: 2px solid #34d399; padding: 0 4px; border-radius: 4px; cursor: help; font-weight: 600; }
        .hl-meta { background-color: #fef3c7; color: #92400e; border-bottom: 2px solid #fbbf24; padding: 0 4px; border-radius: 4px; cursor: help; font-weight: 600; }
        .hl-limites { background-color: #fee2e2; color: #b91c1c; border-bottom: 2px solid #f87171; padding: 0 4px; border-radius: 4px; cursor: help; font-weight: 600; }
        .hl-formato { background-color: #f3e8ff; color: #6b21a8; border-bottom: 2px solid #a855f7; padding: 0 4px; border-radius: 4px; cursor: help; font-weight: 600; }

        .prose-sm p { margin-bottom: 0.5em; }
        .prose-sm ul, .prose-sm ol { margin-left: 1.2em; margin-bottom: 0.5em; }
        .prose-sm li { margin-bottom: 0.2em; }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden text-slate-800">

    <!-- BLACK FRIDAY BANNER -->
    <div class="bg-black text-white text-center py-2 px-4 text-xs md:text-sm font-bold tracking-wide z-50 flex justify-center items-center gap-2">
        <span class="material-symbols-outlined text-sm text-yellow-400">local_fire_department</span>
        <span>BLACK FRIDAY: Desbloquea la B√≥veda Completa por solo $9.990</span>
        <a href="#" onclick="openPaywall()" class="underline text-yellow-400 hover:text-yellow-300 ml-2">Ver Oferta</a>
    </div>

    <!-- Header -->
    <header class="bg-white border-b border-slate-200 shadow-sm z-20 flex-none relative">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-4">
                    <!-- Logo Placeholder -->
                    <div class="h-10 w-10 bg-indigo-600 rounded-lg flex items-center justify-center text-white font-black text-xl">AG</div>
                    <div class="border-l border-slate-200 pl-4">
                        <h1 class="text-lg font-extrabold text-slate-900 tracking-tight">B√≥veda de Prompts <span class="text-indigo-600">AGIA</span></h1>
                        <p class="text-xs text-slate-500 font-medium">Librer√≠a de Copiar & Pegar</p>
                    </div>
                </div>
                <!-- Bot√≥n Compra Header -->
                <button onclick="openPaywall()" class="hidden md:flex bg-gradient-to-r from-slate-900 to-slate-800 text-white px-4 py-2 rounded-lg text-xs font-bold hover:shadow-lg transition-all items-center gap-2 border border-slate-700">
                    <span class="material-symbols-outlined text-sm text-yellow-400">lock_open</span>
                    DESBLOQUEAR TODO
                </button>
            </div>

            <!-- Category Navigation -->
            <div class="overflow-x-auto custom-scroll pb-2">
                <div class="flex space-x-2 min-w-max" id="category-nav">
                    <!-- Injected by JS -->
                </div>
            </div>
        </div>
    </header>

    <!-- Main Layout -->
    <div class="flex flex-1 overflow-hidden max-w-7xl mx-auto w-full relative">
        
        <!-- Sidebar -->
        <aside class="w-full md:w-80 flex flex-col bg-white border-r border-slate-200 flex-none z-10 transition-all duration-300 absolute md:relative h-full transform -translate-x-full md:translate-x-0 shadow-xl md:shadow-none" id="sidebar">
            <div class="p-3 border-b border-slate-100">
                <div class="relative">
                    <span class="material-symbols-outlined absolute left-3 top-2.5 text-slate-400 text-lg">search</span>
                    <input type="text" id="searchInput" placeholder="Buscar prompt..." 
                        class="w-full pl-10 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 transition-all"
                        onkeyup="filterCases()">
                </div>
            </div>
            <div class="flex-1 overflow-y-auto custom-scroll p-2 space-y-1" id="case-list">
                <!-- Cases injected by JS -->
            </div>
            <div class="p-3 border-t border-slate-100 text-xs text-center text-slate-400 bg-slate-50">
                B√≥veda cargada con <span id="count-display" class="font-bold">0</span> prompts
            </div>
        </aside>

        <!-- Mobile Toggle -->
        <button onclick="toggleSidebar()" class="md:hidden absolute bottom-6 left-6 z-40 bg-indigo-600 text-white p-4 rounded-full shadow-lg hover:bg-indigo-700 transition-colors">
            <span class="material-symbols-outlined">menu_open</span>
        </button>

        <!-- Main Content -->
        <main class="flex-1 flex flex-col bg-slate-50/50 overflow-hidden relative w-full">
            
            <!-- Case Detail -->
            <div id="case-detail" class="flex-1 overflow-y-auto custom-scroll p-4 md:p-8 pb-24">
                <div class="max-w-4xl mx-auto fade-in">
                    
                    <!-- Title Header -->
                    <div class="flex items-center gap-4 mb-6 border-b border-slate-200 pb-6">
                        <div id="detail-icon-bg" class="w-16 h-16 rounded-2xl flex items-center justify-center shadow-md border border-white bg-white">
                            <span id="detail-icon" class="material-symbols-outlined text-3xl"></span>
                        </div>
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-1">
                                <span id="detail-category-badge" class="text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded-full bg-slate-200 text-slate-600">Categor√≠a</span>
                                <span class="text-[10px] font-medium text-slate-400 flex items-center gap-1 bg-white px-2 py-0.5 rounded border border-slate-100">
                                    <span class="material-symbols-outlined text-[10px] text-green-500">verified</span> Validado por AGIA
                                </span>
                            </div>
                            <h2 id="detail-title" class="text-2xl md:text-3xl font-bold text-slate-800 leading-tight">T√≠tulo del Caso</h2>
                            <p id="detail-problem" class="text-sm text-slate-500 mt-1 font-medium"></p>
                        </div>
                    </div>

                    <!-- AGIA LEGEND (BARRA DE COLORES - MOVIDA ARRIBA) -->
                    <div class="mb-4 bg-white rounded-xl border border-slate-200 p-3 overflow-x-auto">
                        <div class="flex justify-between items-center min-w-max gap-4 md:gap-0">
                            <!-- ROL -->
                            <div class="flex items-center gap-2">
                                <div class="w-6 h-6 rounded bg-blue-100 text-blue-600 flex items-center justify-center text-[10px] font-bold hl-rol border-none">1</div>
                                <span class="text-[10px] font-bold uppercase text-slate-500">Rol</span>
                            </div>
                            <div class="w-8 h-[1px] bg-slate-200 hidden md:block"></div>
                            <!-- CONTEXTO -->
                            <div class="flex items-center gap-2">
                                <div class="w-6 h-6 rounded bg-emerald-100 text-emerald-600 flex items-center justify-center text-[10px] font-bold hl-contexto border-none">2</div>
                                <span class="text-[10px] font-bold uppercase text-slate-500">Contexto</span>
                            </div>
                            <div class="w-8 h-[1px] bg-slate-200 hidden md:block"></div>
                            <!-- META -->
                            <div class="flex items-center gap-2">
                                <div class="w-6 h-6 rounded bg-amber-100 text-amber-600 flex items-center justify-center text-[10px] font-bold hl-meta border-none">3</div>
                                <span class="text-[10px] font-bold uppercase text-slate-500">Meta</span>
                            </div>
                            <div class="w-8 h-[1px] bg-slate-200 hidden md:block"></div>
                            <!-- LIMITES -->
                            <div class="flex items-center gap-2">
                                <div class="w-6 h-6 rounded bg-red-100 text-red-600 flex items-center justify-center text-[10px] font-bold hl-limites border-none">4</div>
                                <span class="text-[10px] font-bold uppercase text-slate-500">L√≠mites</span>
                            </div>
                            <div class="w-8 h-[1px] bg-slate-200 hidden md:block"></div>
                            <!-- FORMATO -->
                            <div class="flex items-center gap-2">
                                <div class="w-6 h-6 rounded bg-purple-100 text-purple-600 flex items-center justify-center text-[10px] font-bold hl-formato border-none">5</div>
                                <span class="text-[10px] font-bold uppercase text-slate-500">Formato</span>
                            </div>
                        </div>
                    </div>

                    <!-- PROMPT BOX (HERO) -->
                    <div class="bg-slate-900 rounded-2xl p-1 shadow-2xl mb-8 border border-slate-700 relative group">
                        <div class="absolute top-0 right-0 w-32 h-32 bg-indigo-500 opacity-20 rounded-full -mr-10 -mt-10 blur-3xl group-hover:opacity-30 transition-opacity"></div>
                        
                        <!-- Header Prompt Box -->
                        <div class="bg-slate-800/50 rounded-t-xl px-4 py-3 flex justify-between items-center border-b border-slate-700">
                            <div class="flex items-center gap-2">
                                <span class="material-symbols-outlined text-yellow-400 text-sm">auto_awesome</span>
                                <span class="text-xs font-bold text-slate-300 tracking-wider">PROMPT MAESTRO</span>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="copyPrompt()" class="flex items-center gap-2 text-xs bg-indigo-600 text-white hover:bg-indigo-500 px-4 py-1.5 rounded-lg font-bold transition-all shadow-lg hover:shadow-indigo-500/25 ring-1 ring-white/10">
                                    <span class="material-symbols-outlined text-sm">content_copy</span> 
                                    <span>COPIAR</span>
                                </button>
                            </div>
                        </div>

                        <!-- Content Prompt Box -->
                        <div class="p-6 relative">
                            <p id="detail-prompt-rendered" class="font-mono text-sm md:text-base text-slate-200 leading-relaxed whitespace-pre-wrap select-all">...</p>
                        </div>
                    </div>

                    <!-- COMPARISON GRID (VISIBLE POR DEFECTO) -->
                    <div class="mb-8">
                        <div id="comparison-container" class="grid md:grid-cols-2 gap-6 bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                            <!-- Bad Prompt -->
                            <div>
                                <h3 class="text-xs font-bold text-slate-400 uppercase mb-2 flex items-center gap-1">
                                    <span class="material-symbols-outlined text-sm">close</span> Lo que escribe la mayor√≠a
                                </h3>
                                <div class="bg-slate-50 p-4 rounded-lg border border-slate-100 text-sm text-slate-500 italic font-mono">
                                    <p id="detail-bad-prompt">"..."</p>
                                </div>
                                <div class="mt-2 flex flex-wrap gap-2" id="deficiency-badges"></div>
                            </div>
                            <!-- Result Preview -->
                            <div class="border-l border-slate-100 pl-4 md:pl-6">
                                <h3 class="text-xs font-bold text-slate-400 uppercase mb-2 flex items-center gap-2">
                                    <span class="material-symbols-outlined text-sm text-indigo-500">check_circle</span> Resultado en ChatGPT (Real)
                                </h3>
                                <!-- Contenedor con scroll si es muy ancho -->
                                <div class="overflow-x-auto">
                                    <div id="preview-response" class="text-xs text-slate-700 prose-sm bg-indigo-50/50 p-4 rounded-lg border border-indigo-50">
                                        <!-- JS injects preview here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- AGIA MODEL IMAGE (MOVIDA AL FINAL) -->
                    <div class="mb-8 pt-8 border-t border-slate-200 opacity-80 hover:opacity-100 transition-opacity">
                         <h3 class="text-xs font-bold text-slate-400 uppercase mb-4 flex items-center gap-1">
                            <span class="material-symbols-outlined text-sm">schema</span> Referencia: La Estructura Maestra
                         </h3>
                         <div class="bg-white p-2 rounded-xl border border-slate-200 shadow-sm">
                             <img src="https://aulagenia.cl/maestro-prompts.png" alt="Modelo AGIA - Estructura Maestra" class="w-full h-auto rounded-lg">
                         </div>
                    </div>

                </div>
            </div>
        </main>
    </div>

    <!-- PAYWALL MODAL (Bloqueo de Ventas) -->
    <div id="paywall-modal" class="fixed inset-0 z-[60] hidden">
        <!-- Backdrop -->
        <div class="absolute inset-0 bg-slate-900/80 backdrop-blur-sm transition-opacity" onclick="closePaywall()"></div>
        
        <!-- Modal Content -->
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-md p-4">
            <div class="bg-white rounded-2xl shadow-2xl overflow-hidden relative animate-in fade-in zoom-in duration-300">
                <button onclick="closePaywall()" class="absolute top-3 right-3 text-slate-400 hover:text-slate-600 bg-white rounded-full p-1 z-10">
                    <span class="material-symbols-outlined">close</span>
                </button>
                
                <!-- Image/Header -->
                <div class="bg-slate-900 p-8 text-center relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-40 h-40 bg-indigo-600 rounded-full blur-3xl opacity-30 -mr-10 -mt-10"></div>
                    <span class="material-symbols-outlined text-5xl text-yellow-400 mb-2 relative z-10">lock</span>
                    <h3 class="text-white font-bold text-xl relative z-10">Contenido Premium</h3>
                    <p class="text-indigo-200 text-sm relative z-10">Este prompt es parte de la B√≥veda Privada.</p>
                </div>

                <!-- Body -->
                <div class="p-6 text-center">
                    <p class="text-slate-600 text-sm mb-6">
                        Est√°s viendo la versi√≥n gratuita. Accede a los <span class="font-bold text-slate-900">100+ casos avanzados</span> y copia mis f√≥rmulas validadas.
                    </p>
                    
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-6">
                        <p class="text-xs font-bold text-yellow-800 uppercase tracking-wide">üî• Oferta Black Friday</p>
                        <p class="text-2xl font-black text-slate-900">$9.990 <span class="text-sm font-normal text-slate-500 line-through">$19.990</span></p>
                        <p class="text-[10px] text-slate-500">Pago √∫nico. Acceso de por vida.</p>
                    </div>

                    <a id="payment-btn" href="#" target="_blank" class="block w-full bg-indigo-600 text-white py-3 rounded-xl font-bold hover:bg-indigo-700 hover:scale-[1.02] transition-all shadow-lg shadow-indigo-200 mb-3 flex items-center justify-center gap-2">
                        <span>DESBLOQUEAR B√ìVEDA AHORA</span>
                        <span class="material-symbols-outlined text-sm">arrow_forward</span>
                    </a>
                    
                    <p class="text-[10px] text-slate-400">Garant√≠a de satisfacci√≥n. Pago seguro v√≠a Mercado Pago.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==========================================
        // CONFIGURACI√ìN DE VENTA (TU LINK AQU√ç)
        // ==========================================
        const LINK_MERCADO_PAGO = "#"; // <--- PEGA TU LINK ENTRE LAS COMILLAS
        
        // Asignar link al bot√≥n
        document.getElementById('payment-btn').href = LINK_MERCADO_PAGO;

        // --- HELPERS PARA AGIA MARKUP ---
        function renderAGIA(text) {
            let html = text
                .replace(/{r}(.*?){\/r}/g, '<span class="hl-rol" title="ROL: ¬øQui√©n act√∫a?">$1</span>')
                .replace(/{c}(.*?){\/c}/g, '<span class="hl-contexto" title="CONTEXTO: Antecedentes y detalles">$1</span>')
                .replace(/{m}(.*?){\/m}/g, '<span class="hl-meta" title="META: Objetivo principal">$1</span>')
                .replace(/{l}(.*?){\/l}/g, '<span class="hl-limites" title="L√çMITES: Restricciones y reglas">$1</span>')
                .replace(/{f}(.*?){\/f}/g, '<span class="hl-formato" title="FORMATO: Estructura de salida">$1</span>')
                .replace(/\n/g, '<br>');
            return html;
        }

        function cleanAGIA(text) {
            return text.replace(/{[rcmlf]}/g, '').replace(/{\/[rcmlf]}/g, '');
        }

        // --- DATA ENGINE ---
        
        const categoryConfig = {
            office: { label: "Oficina & Excel", color: "emerald", icon: "business_center" },
            finance: { label: "Finanzas (Nuevo)", color: "cyan", icon: "attach_money" }, // NUEVA CATEGORIA
            marketing: { label: "Marketing", color: "pink", icon: "campaign" },
            personal: { label: "Vida Personal", color: "blue", icon: "home" },
            tech: { label: "Tecnolog√≠a", color: "violet", icon: "code" },
            education: { label: "Educaci√≥n", color: "amber", icon: "school" }
        };

        // Funci√≥n extendida con propiedad LOCKED (Bloqueo)
        const createCase = (id, cat, title, icon, problem, badPrompt, goodPromptTagged, goodResPreview, locked = false, deficiencies = []) => ({
            id, category: cat, title, icon, problem, 
            badPrompt, 
            agiaPromptTagged: goodPromptTagged, 
            previewResponse: goodResPreview,
            locked: locked, // TRUE = Candado, FALSE = Abierto (AHORA TODO FALSE PARA REVISI√ìN)
            deficiencies: deficiencies.length ? deficiencies : ["Sin Rol", "Contexto Vago"]
        });

        // --- BASE DE DATOS DE PROMPTS ---
        // NOTA: Para vender, despu√©s cambiaremos 'false' a 'true' en los casos Premium.
        const allCases = [
            
            // --- OFICINA & EXCEL (EL DOLOR M√ÅS GRANDE) ---
            createCase(22, 'office', 'El Mago de Excel', 'table_view', 'No s√© qu√© f√≥rmula usar.', 
                'Ayuda con excel para sumar si cumple condici√≥n.', 
                '{r}Act√∫a como un instructor experto de Excel MVP.{/r} {c}Tengo una tabla de Ventas con [Columna A: Vendedores, Columna B: Mes, Columna C: Monto].{/c} {m}Necesito una f√≥rmula para sumar el total vendido por "Juan" en "Enero".{/m} {f}Dame la f√≥rmula SUMAR.SI.CONJUNTO y explica los argumentos.{/f}',
                '<div class="font-mono text-xs bg-slate-800 text-green-400 p-3 rounded mb-2">=SUMAR.SI.CONJUNTO(C:C; A:A; "Juan"; B:B; "Enero")</div><ul class="list-disc ml-4 space-y-1 text-slate-600"><li><strong>C:C</strong> = Rango a sumar (Montos)</li><li><strong>A:A</strong> = Rango criterio 1 (Vendedores)</li><li><strong>B:B</strong> = Rango criterio 2 (Meses)</li></ul>',
                false, 
                ["Sin Contexto de Datos", "Petici√≥n Gen√©rica"]),

            createCase(21, 'office', 'Traductor Corporativo', 'translate', 'Escribir email dif√≠cil.', 
                'Redacta un correo para decir que no alcanzo a entregar.', 
                '{r}Act√∫a como experto en comunicaci√≥n asertiva.{/r} {c}Estoy atrasado con el informe mensual por falta de datos de Finanzas.{/c} {m}Escribe un correo a mi jefe informando el retraso sin sonar irresponsable.{/m} {l}Prop√≥n nueva fecha (Viernes). Tono profesional pero firme.{/l}',
                '<div class="bg-white p-2 rounded border border-slate-200 italic text-slate-600">"Hola [Nombre],<br><br>Te escribo para actualizarte sobre el informe mensual. Debido a una demora en la recepci√≥n de la data de Finanzas, no podr√© cerrarlo hoy como estaba previsto.<br><br>Ya gestion√© la entrega de los datos faltantes y podr√© enviarte el informe completo este <strong>viernes antes del mediod√≠a</strong>.<br><br>Gracias por tu comprensi√≥n."</div>',
                false, 
                ["Excusa Vaga", "Sin Propuesta de Soluci√≥n"]),

            // --- FINANZAS (NUEVO) ---
            createCase(90, 'finance', 'Negociador de Sueldo', 'payments', 'Pedir aumento da miedo.', 
                'C√≥mo pido un aumento de sueldo.', 
                '{r}Act√∫a como un coach de negociaci√≥n salarial.{/r} {c}Llevo 2 a√±os en la empresa, super√© mis KPIs en un 20% y el mercado paga un 15% m√°s.{/c} {m}Dame un guion para la reuni√≥n con mi jefe.{/m} {l}Sin ultimatums, enfocado en valor aportado.{/l} {f}Estructura: Apertura, Evidencia, Petici√≥n.{/f}',
                '<p class="font-bold mb-1">Guion de la Reuni√≥n:</p><ul class="list-disc ml-4 space-y-2"><li><strong>Apertura:</strong> "Gracias por el tiempo. Quer√≠a revisar mi trayectoria de estos 2 a√±os..."</li><li><strong>Evidencia:</strong> "Como sabes, logr√© superar la meta en un 20%, lo que trajo X beneficio..."</li><li><strong>Petici√≥n:</strong> "Basado en estos resultados y el mercado actual, solicito un ajuste salarial del 15% para alinear mi compensaci√≥n con mi aporte."</li></ul>',
                false, 
                ["Sin Datos", "Enfoque en Necesidad Propia"]),

            createCase(91, 'finance', 'Analista de Gastos', 'pie_chart', 'No s√© en qu√© se me va la plata.', 
                'Ay√∫dame a ordenar mis gastos.', 
                '{r}Act√∫a como asesor financiero personal.{/r} {c}Gano $1.5M l√≠quidos y siento que no llego a fin de mes.{/c} {m}Crea una estructura de presupuesto basada en la regla 50/30/20 adaptada a la realidad chilena.{/m} {f}Tabla con montos sugeridos y categor√≠as.{/f}',
                '<table class="w-full text-xs border-collapse"><thead><tr class="bg-cyan-100"><th class="p-1">Regla</th><th class="p-1">Monto</th><th class="p-1">Destino</th></tr></thead><tbody><tr><td>50% Necesidades</td><td>$750.000</td><td>Arriendo, Supermercado, Cuentas</td></tr><tr><td>30% Deseos</td><td>$450.000</td><td>Salidas, Netflix, Rappi</td></tr><tr><td>20% Ahorro/Deuda</td><td>$300.000</td><td>Fondo Emergencia, Pago Tarjeta</td></tr></tbody></table>',
                false, 
                ["Sin Cifras", "Meta Vaga"]),

            // --- MARKETING (GANCHO FUERTE) ---
            createCase(41, 'marketing', 'Calendario RRSS', 'calendar_month', 'Bloqueo creativo.', 
                'Ideas para posts de Instagram de caf√©.', 
                '{r}Social Media Manager experto en viralidad.{/r} {c}Vendo caf√© de grano online.{/c} {m}Dame 3 ideas de Reels que sean "Edutainment" (Educar + Entretener) para atraer clientes nuevos.{/m} {f}Tabla: T√≠tulo, Gancho Visual (primeros 3 seg) y CTA.{/f}',
                '<table class="w-full text-xs border-collapse"><thead><tr class="bg-pink-100"><th class="p-1">T√≠tulo</th><th class="p-1">Gancho Visual</th></tr></thead><tbody><tr><td>Tu caf√© sabe amargo</td><td>Tirar el caf√© al lavaplatos con cara de asco ü§¢</td></tr><tr><td>Ahorra $50.000/mes</td><td>Pantallazo de gastos en Starbucks vs. Bolsa de grano üìâ</td></tr><tr><td>ASMR Ma√±anero</td><td>Solo sonido de molienda y agua cayendo (Satisfying) üéß</td></tr></tbody></table>',
                false, 
                ["Muy Gen√©rico", "Sin Formato Viral"]),

            // --- PERSONAL ---
            createCase(1, 'personal', 'Men√∫ de Supervivencia', 'restaurant', 'Sobras en la nevera.', 
                'Qu√© cocino con huevo y arroz.', 
                '{r}Chef Michelin de cocina de aprovechamiento.{/r} {c}Tengo huevos, arroz fr√≠o y espinaca.{/c} {m}Receta gourmet en 15 min.{/m}',
                '<p class="font-bold text-indigo-700">Tortilla "Souffl√©" Florentina</p>...',
                false, ["Sin Rol", "Sin L√≠mites"]),

            createCase(3, 'personal', 'Consejero de Regalos', 'card_giftcard', 'Regalo hombre 40 a√±os.', 
                'Qu√© le regalo a mi marido.', 
                '{r}Personal Shopper.{/r} {c}40 a√±os, tecnol√≥gico, parrillero.{/c} {m}5 ideas bajo $30.000.{/m}',
                '1. Term√≥metro Bluetooth para asado...',
                false, ["Informaci√≥n Insuficiente"]),

            createCase(4, 'personal', 'Planificador de Viajes', 'flight', 'Viaje express.', 
                'Qu√© hacer en Buenos Aires 3 d√≠as.', 
                '{r}Gu√≠a porte√±o local.{/r} {c}Evitar trampas tur√≠sticas.{/c} {m}Itinerario real de comida y paseos.{/m}',
                'D√≠a 1: Pizza en Guerrin y Teatro Col√≥n...',
                false, ["Muy Amplio"]),

            // --- EDUCATION ---
            createCase(81, 'education', 'Tutor Socr√°tico', 'psychology', 'Estudiar activo.', 
                'Expl√≠came la inflaci√≥n.', 
                '{r}Profesor de Econom√≠a.{/r} {m}Expl√≠calo como si tuviera 10 a√±os usando el ejemplo de las l√°minas del √°lbum del mundial.{/m}',
                '"Imagina que todos tienen 10 l√°minas. Si de pronto el profesor regala 1000 l√°minas a cada uno, ¬øtus l√°minas valen m√°s o menos?..."',
                false, ["Muy Complejo"])
        ];

        // --- GENERADOR DE RELLENO (PARA QUE PAREZCAN 100+) ---
        const fillers = [
            {t: 'Crear Logo Midjourney', c: 'marketing'}, {t: 'Resumidor de Papers PDF', c: 'education'}, 
            {t: 'Debuggueador de Python', c: 'tech'}, {t: 'Script de Ventas en Fr√≠o', c: 'office'},
            {t: 'Plan de Entrenamiento Marat√≥n', c: 'personal'}, {t: 'Meditaci√≥n Guiada', c: 'personal'},
            {t: 'Analista de Contratos Legales', c: 'office'}, {t: 'Generador de Quiz', c: 'education'},
            {t: 'Traductor de C√≥digo Legacy', c: 'tech'}, {t: 'Estratega de SEO', c: 'marketing'},
            {t: 'Carta de Recomendaci√≥n', c: 'office'}, {t: 'Planificador de Boda', c: 'personal'}
        ];
        
        let idCounter = 100;
        // Multiplicamos los fillers para que se vea lleno
        for(let i=0; i<3; i++) {
            fillers.forEach(f => {
                allCases.push(createCase(idCounter++, f.c, f.t, 'lock', 'Contenido Premium', 'Ayuda...', '...', '...', false)); // <--- AQU√ç TAMBI√âN DESBLOQUEADO
            });
        }

        // --- L√ìGICA UI ---
        let currentCategory = 'office'; // Empezar en Oficina que es fuerte
        let searchQuery = '';

        function init() {
            renderCategories();
            renderCaseList();
            selectCase(22); // Seleccionar Excel por defecto
        }

        function renderCategories() {
            const nav = document.getElementById('category-nav');
            nav.innerHTML = Object.keys(categoryConfig).map(key => {
                const conf = categoryConfig[key];
                const isActive = currentCategory === key;
                const activeClass = isActive 
                    ? `bg-${conf.color}-100 text-${conf.color}-700 border-${conf.color}-200 shadow-sm` 
                    : `bg-white text-slate-500 border-slate-100 hover:bg-slate-50`;
                return `<button onclick="setCategory('${key}')" class="flex items-center gap-2 px-4 py-2 rounded-full border text-xs font-bold transition-all whitespace-nowrap ${activeClass}"><span class="material-symbols-outlined text-lg">${conf.icon}</span>${conf.label}</button>`;
            }).join('');
        }

        function renderCaseList() {
            const listEl = document.getElementById('case-list');
            const filtered = allCases.filter(c => (c.category === currentCategory || searchQuery !== '') && (c.title.toLowerCase().includes(searchQuery.toLowerCase()) || c.problem.toLowerCase().includes(searchQuery.toLowerCase())));
            
            document.getElementById('count-display').innerText = allCases.length; // Total real
            
            if (filtered.length === 0) {
                listEl.innerHTML = `<div class="p-8 text-center text-slate-400 text-xs">No hay resultados</div>`;
                return;
            }

            listEl.innerHTML = filtered.map(c => {
                const config = categoryConfig[c.category];
                // Icon logic: Lock if locked, Category icon if free
                const iconDisplay = c.locked ? 'lock' : c.icon;
                const iconColorClass = c.locked ? 'text-slate-300 bg-slate-50' : `text-${config.color}-500 bg-white`;
                const lockOpacity = c.locked ? 'opacity-70' : '';
                
                return `<button onclick="selectCase(${c.id})" class="w-full text-left p-3 rounded-lg group transition-all mb-2 hover:bg-slate-50 border border-transparent relative overflow-hidden ${lockOpacity}">
                    <div class="flex items-center gap-3 pl-2">
                        <div class="w-8 h-8 rounded-lg border border-slate-100 flex items-center justify-center flex-none shadow-sm ${iconColorClass}">
                            <span class="material-symbols-outlined text-lg">${iconDisplay}</span>
                        </div>
                        <div class="overflow-hidden">
                            <h4 class="text-sm font-semibold text-slate-700 truncate group-hover:text-indigo-700 transition-colors flex items-center gap-2">
                                ${c.title} 
                                ${!c.locked ? '<span class="text-[9px] bg-green-100 text-green-700 px-1.5 rounded-full">GRATIS</span>' : ''}
                            </h4>
                            <p class="text-[10px] text-slate-400 truncate">${c.locked ? 'Solo miembros Premium' : c.problem}</p>
                        </div>
                    </div>
                </button>`;
            }).join('');
        }

        function selectCase(id) {
            const c = allCases.find(x => x.id === id);
            if(!c) return;

            // PAYWALL CHECK
            if (c.locked) {
                openPaywall();
                return;
            }

            const conf = categoryConfig[c.category];

            // Render Detail
            document.getElementById('detail-title').innerText = c.title;
            document.getElementById('detail-icon').innerText = c.icon;
            document.getElementById('detail-icon-bg').className = `w-16 h-16 rounded-2xl flex items-center justify-center shadow-lg border-2 border-white bg-${conf.color}-50 text-${conf.color}-600`;
            document.getElementById('detail-category-badge').innerText = conf.label;
            document.getElementById('detail-category-badge').className = `text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded-full bg-${conf.color}-100 text-${conf.color}-700 border border-${conf.color}-200`;
            document.getElementById('detail-problem').innerText = c.problem;
            
            // Render Bad Prompt & Badges
            document.getElementById('detail-bad-prompt').innerText = `"${c.badPrompt}"`;
            document.getElementById('deficiency-badges').innerHTML = c.deficiencies.map(d => 
                `<span class="px-2 py-1 bg-red-50 text-red-600 text-[10px] font-bold rounded-md border border-red-100 flex items-center gap-1"><span class="material-symbols-outlined text-[10px]">warning</span>${d}</span>`
            ).join('');

            // Render Good Prompt
            document.getElementById('detail-prompt-rendered').innerHTML = renderAGIA(c.agiaPromptTagged);
            document.getElementById('preview-response').innerHTML = c.previewResponse;

            if(window.innerWidth < 768) toggleSidebar();
        }

        function setCategory(cat) {
            currentCategory = cat;
            searchQuery = '';
            document.getElementById('searchInput').value = '';
            renderCategories();
            renderCaseList();
        }

        function filterCases() {
            searchQuery = document.getElementById('searchInput').value;
            renderCaseList();
        }

        function copyPrompt() {
            const title = document.getElementById('detail-title').innerText;
            const c = allCases.find(x => x.title === title);
            if(!c) return;

            const rawText = cleanAGIA(c.agiaPromptTagged);
            navigator.clipboard.writeText(rawText);
            
            // Visual feedback
            const btn = document.querySelector('button[onclick="copyPrompt()"]');
            const originalHTML = btn.innerHTML;
            
            btn.innerHTML = `<span class="material-symbols-outlined text-sm">check_circle</span> <span>¬°COPIADO!</span>`;
            btn.classList.remove('bg-indigo-600', 'text-white');
            btn.classList.add('bg-green-500', 'text-white', 'shadow-none');
            
            setTimeout(() => {
                btn.innerHTML = originalHTML;
                btn.classList.remove('bg-green-500', 'text-white', 'shadow-none');
                btn.classList.add('bg-indigo-600', 'text-white');
            }, 2000);
        }

        // --- PAYWALL LOGIC ---
        function openPaywall() {
            document.getElementById('paywall-modal').classList.remove('hidden');
        }
        function closePaywall() {
            document.getElementById('paywall-modal').classList.add('hidden');
        }

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('-translate-x-full');
        }

        init();
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√≥veda de Prompts AGIA | Oferta Black Friday</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts & Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        
        /* Custom Scrollbar */
        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        
        .blur-locked { filter: blur(4px); user-select: none; pointer-events: none; }
        
        /* Highlight Classes for Prompts - AGIA SYSTEM */
        .hl-rol { background-color: #dbeafe; color: #1e40af; border-bottom: 2px solid #60a5fa; padding: 0 4px; border-radius: 4px; cursor: help; font-weight: 600; }
        .hl-contexto { background-color: #d1fae5; color: #065f46; border-bottom: 2px solid #34d399; padding: 0 4px; border-radius: 4px; cursor: help; font-weight: 600; }
        .hl-meta { background-color: #fef3c7; color: #92400e; border-bottom: 2px solid #fbbf24; padding: 0 4px; border-radius: 4px; cursor: help; font-weight: 600; }
        .hl-limites { background-color: #fee2e2; color: #b91c1c; border-bottom: 2px solid #f87171; padding: 0 4px; border-radius: 4px; cursor: help; font-weight: 600; }
        .hl-formato { background-color: #f3e8ff; color: #6b21a8; border-bottom: 2px solid #a855f7; padding: 0 4px; border-radius: 4px; cursor: help; font-weight: 600; }

        .prose-sm p { margin-bottom: 0.5em; }
        .prose-sm ul, .prose-sm ol { margin-left: 1.2em; margin-bottom: 0.5em; }
        .prose-sm li { margin-bottom: 0.2em; }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden text-slate-800">

    <!-- BLACK FRIDAY BANNER -->
    <div class="bg-black text-white text-center py-2 px-4 text-xs md:text-sm font-bold tracking-wide z-50 flex justify-center items-center gap-2">
        <span class="material-symbols-outlined text-sm text-yellow-400">local_fire_department</span>
        <span>BLACK FRIDAY: Desbloquea la B√≥veda Completa por solo $9.990</span>
        <a href="#" onclick="openPaywall()" class="underline text-yellow-400 hover:text-yellow-300 ml-2">Ver Oferta</a>
    </div>

    <!-- Header -->
    <header class="bg-white border-b border-slate-200 shadow-sm z-20 flex-none relative">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-4">
                    <!-- Logo Placeholder -->
                    <div class="h-10 w-10 bg-indigo-600 rounded-lg flex items-center justify-center text-white font-black text-xl">AG</div>
                    <div class="border-l border-slate-200 pl-4">
                        <h1 class="text-lg font-extrabold text-slate-900 tracking-tight">B√≥veda de Prompts <span class="text-indigo-600">AGIA</span></h1>
                        <p class="text-xs text-slate-500 font-medium">Librer√≠a de Ingenier√≠a de Prompts</p>
                    </div>
                </div>
                <!-- Bot√≥n Compra Header -->
                <button onclick="openPaywall()" class="hidden md:flex bg-gradient-to-r from-slate-900 to-slate-800 text-white px-4 py-2 rounded-lg text-xs font-bold hover:shadow-lg transition-all items-center gap-2 border border-slate-700">
                    <span class="material-symbols-outlined text-sm text-yellow-400">lock_open</span>
                    DESBLOQUEAR TODO
                </button>
            </div>

            <!-- Category Navigation -->
            <div class="overflow-x-auto custom-scroll pb-2">
                <div class="flex space-x-2 min-w-max" id="category-nav">
                    <!-- Injected by JS -->
                </div>
            </div>
        </div>
    </header>

    <!-- Main Layout -->
    <div class="flex flex-1 overflow-hidden max-w-7xl mx-auto w-full relative">
        
        <!-- Sidebar -->
        <aside class="w-full md:w-80 flex flex-col bg-white border-r border-slate-200 flex-none z-10 transition-all duration-300 absolute md:relative h-full transform -translate-x-full md:translate-x-0 shadow-xl md:shadow-none" id="sidebar">
            <div class="p-3 border-b border-slate-100">
                <div class="relative">
                    <span class="material-symbols-outlined absolute left-3 top-2.5 text-slate-400 text-lg">search</span>
                    <input type="text" id="searchInput" placeholder="Buscar prompt..." 
                        class="w-full pl-10 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 transition-all"
                        onkeyup="filterCases()">
                </div>
            </div>
            <div class="flex-1 overflow-y-auto custom-scroll p-2 space-y-1" id="case-list">
                <!-- Cases injected by JS -->
            </div>
            <div class="p-3 border-t border-slate-100 text-xs text-center text-slate-400 bg-slate-50">
                B√≥veda cargada con <span id="count-display" class="font-bold">0</span> prompts
            </div>
        </aside>

        <!-- Mobile Toggle -->
        <button onclick="toggleSidebar()" class="md:hidden absolute bottom-6 left-6 z-40 bg-indigo-600 text-white p-4 rounded-full shadow-lg hover:bg-indigo-700 transition-colors">
            <span class="material-symbols-outlined">menu_open</span>
        </button>

        <!-- Main Content -->
        <main class="flex-1 flex flex-col bg-slate-50/50 overflow-hidden relative w-full">
            
            <!-- Case Detail -->
            <div id="case-detail" class="flex-1 overflow-y-auto custom-scroll p-4 md:p-8 pb-24">
                <div class="max-w-4xl mx-auto fade-in">
                    
                    <!-- Title Header -->
                    <div class="flex items-center gap-4 mb-6 border-b border-slate-200 pb-6">
                        <div id="detail-icon-bg" class="w-16 h-16 rounded-2xl flex items-center justify-center shadow-md border border-white bg-white">
                            <span id="detail-icon" class="material-symbols-outlined text-3xl"></span>
                        </div>
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-1">
                                <span id="detail-category-badge" class="text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded-full bg-slate-200 text-slate-600">Categor√≠a</span>
                                <span class="text-[10px] font-medium text-slate-400 flex items-center gap-1 bg-white px-2 py-0.5 rounded border border-slate-100">
                                    <span class="material-symbols-outlined text-[10px] text-green-500">verified</span> Estructura AGIA
                                </span>
                            </div>
                            <h2 id="detail-title" class="text-2xl md:text-3xl font-bold text-slate-800 leading-tight">T√≠tulo del Caso</h2>
                            <p id="detail-problem" class="text-sm text-slate-500 mt-1 font-medium"></p>
                        </div>
                    </div>

                    <!-- AGIA LEGEND -->
                    <div class="mb-4 bg-white rounded-xl border border-slate-200 p-3 overflow-x-auto">
                        <div class="flex justify-between items-center min-w-max gap-4 md:gap-0">
                            <!-- ROL -->
                            <div class="flex items-center gap-2">
                                <div class="w-6 h-6 rounded bg-blue-100 text-blue-600 flex items-center justify-center text-[10px] font-bold hl-rol border-none">1</div>
                                <span class="text-[10px] font-bold uppercase text-slate-500">Rol</span>
                            </div>
                            <div class="w-8 h-[1px] bg-slate-200 hidden md:block"></div>
                            <!-- CONTEXTO -->
                            <div class="flex items-center gap-2">
                                <div class="w-6 h-6 rounded bg-emerald-100 text-emerald-600 flex items-center justify-center text-[10px] font-bold hl-contexto border-none">2</div>
                                <span class="text-[10px] font-bold uppercase text-slate-500">Contexto (Adjuntar)</span>
                            </div>
                            <div class="w-8 h-[1px] bg-slate-200 hidden md:block"></div>
                            <!-- META -->
                            <div class="flex items-center gap-2">
                                <div class="w-6 h-6 rounded bg-amber-100 text-amber-600 flex items-center justify-center text-[10px] font-bold hl-meta border-none">3</div>
                                <span class="text-[10px] font-bold uppercase text-slate-500">Meta</span>
                            </div>
                            <div class="w-8 h-[1px] bg-slate-200 hidden md:block"></div>
                            <!-- LIMITES -->
                            <div class="flex items-center gap-2">
                                <div class="w-6 h-6 rounded bg-red-100 text-red-600 flex items-center justify-center text-[10px] font-bold hl-limites border-none">4</div>
                                <span class="text-[10px] font-bold uppercase text-slate-500">L√≠mites</span>
                            </div>
                            <div class="w-8 h-[1px] bg-slate-200 hidden md:block"></div>
                            <!-- FORMATO -->
                            <div class="flex items-center gap-2">
                                <div class="w-6 h-6 rounded bg-purple-100 text-purple-600 flex items-center justify-center text-[10px] font-bold hl-formato border-none">5</div>
                                <span class="text-[10px] font-bold uppercase text-slate-500">Formato</span>
                            </div>
                        </div>
                    </div>

                    <!-- PROMPT BOX (HERO) -->
                    <div class="bg-slate-900 rounded-2xl p-1 shadow-2xl mb-8 border border-slate-700 relative group">
                        <div class="absolute top-0 right-0 w-32 h-32 bg-indigo-500 opacity-20 rounded-full -mr-10 -mt-10 blur-3xl group-hover:opacity-30 transition-opacity"></div>
                        
                        <!-- Header Prompt Box -->
                        <div class="bg-slate-800/50 rounded-t-xl px-4 py-3 flex justify-between items-center border-b border-slate-700">
                            <div class="flex items-center gap-2">
                                <span class="material-symbols-outlined text-yellow-400 text-sm">auto_awesome</span>
                                <span class="text-xs font-bold text-slate-300 tracking-wider">PROMPT MAESTRO</span>
                            </div>
                            
                            <!-- Suggested AI Badge (Inserted Here) -->
                            <div id="ai-badge-container" class="hidden md:flex"></div>

                            <div class="flex gap-2">
                                <button onclick="copyPrompt()" class="flex items-center gap-2 text-xs bg-indigo-600 text-white hover:bg-indigo-500 px-4 py-1.5 rounded-lg font-bold transition-all shadow-lg hover:shadow-indigo-500/25 ring-1 ring-white/10">
                                    <span class="material-symbols-outlined text-sm">content_copy</span> 
                                    <span>COPIAR</span>
                                </button>
                            </div>
                        </div>

                        <!-- Content Prompt Box -->
                        <div class="p-6 relative">
                            <!-- Mobile AI Badge -->
                            <div id="ai-badge-mobile" class="md:hidden mb-4"></div>
                            <p id="detail-prompt-rendered" class="font-mono text-sm md:text-base text-slate-200 leading-relaxed whitespace-pre-wrap select-all">...</p>
                        </div>
                    </div>

                    <!-- COMPARISON GRID -->
                    <div class="mb-8">
                        <div id="comparison-container" class="grid md:grid-cols-2 gap-6 bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                            <!-- Bad Prompt -->
                            <div>
                                <h3 class="text-xs font-bold text-slate-400 uppercase mb-2 flex items-center gap-1">
                                    <span class="material-symbols-outlined text-sm">close</span> Lo que escribe la mayor√≠a
                                </h3>
                                <div class="bg-slate-50 p-4 rounded-lg border border-slate-100 text-sm text-slate-500 italic font-mono">
                                    <p id="detail-bad-prompt">"..."</p>
                                </div>
                                <div class="mt-2 flex flex-wrap gap-2" id="deficiency-badges"></div>
                            </div>
                            <!-- Result Preview -->
                            <div class="border-l border-slate-100 pl-4 md:pl-6">
                                <h3 class="text-xs font-bold text-slate-400 uppercase mb-2 flex items-center gap-2">
                                    <span class="material-symbols-outlined text-sm text-indigo-500">check_circle</span> Resultado Estimado
                                </h3>
                                <!-- Contenedor con scroll si es muy ancho -->
                                <div class="overflow-x-auto">
                                    <div id="preview-response" class="text-xs text-slate-700 prose-sm bg-indigo-50/50 p-4 rounded-lg border border-indigo-50">
                                        <!-- JS injects preview here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- AGIA MODEL IMAGE (Reference) -->
                    <div class="mb-8 pt-8 border-t border-slate-200 opacity-80 hover:opacity-100 transition-opacity">
                         <h3 class="text-xs font-bold text-slate-400 uppercase mb-4 flex items-center gap-1">
                            <span class="material-symbols-outlined text-sm">schema</span> Referencia: La Estructura Maestra
                         </h3>
                         <div class="bg-white p-2 rounded-xl border border-slate-200 shadow-sm">
                             <img src="https://aulagenia.cl/maestro-prompts.png" alt="Modelo AGIA - Estructura Maestra" class="w-full h-auto rounded-lg">
                         </div>
                    </div>

                </div>
            </div>
        </main>
    </div>

    <!-- PAYWALL MODAL -->
    <div id="paywall-modal" class="fixed inset-0 z-[60] hidden">
        <div class="absolute inset-0 bg-slate-900/80 backdrop-blur-sm transition-opacity" onclick="closePaywall()"></div>
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-md p-4">
            <div class="bg-white rounded-2xl shadow-2xl overflow-hidden relative animate-in fade-in zoom-in duration-300">
                <button onclick="closePaywall()" class="absolute top-3 right-3 text-slate-400 hover:text-slate-600 bg-white rounded-full p-1 z-10">
                    <span class="material-symbols-outlined">close</span>
                </button>
                
                <div class="bg-slate-900 p-8 text-center relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-40 h-40 bg-indigo-600 rounded-full blur-3xl opacity-30 -mr-10 -mt-10"></div>
                    <span class="material-symbols-outlined text-5xl text-yellow-400 mb-2 relative z-10">lock</span>
                    <h3 class="text-white font-bold text-xl relative z-10">Contenido Premium</h3>
                    <p class="text-indigo-200 text-sm relative z-10">Este prompt es parte de la B√≥veda Privada.</p>
                </div>

                <div class="p-6 text-center">
                    <p class="text-slate-600 text-sm mb-6">
                        Est√°s viendo la versi√≥n gratuita. Accede a los <span class="font-bold text-slate-900">100+ casos avanzados</span> y copia mis f√≥rmulas validadas.
                    </p>
                    
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-6">
                        <p class="text-xs font-bold text-yellow-800 uppercase tracking-wide">üî• Oferta Black Friday</p>
                        <p class="text-2xl font-black text-slate-900">$9.990 <span class="text-sm font-normal text-slate-500 line-through">$19.990</span></p>
                        <p class="text-[10px] text-slate-500">Pago √∫nico. Acceso de por vida.</p>
                    </div>

                    <a id="payment-btn" href="#" target="_blank" class="block w-full bg-indigo-600 text-white py-3 rounded-xl font-bold hover:bg-indigo-700 hover:scale-[1.02] transition-all shadow-lg shadow-indigo-200 mb-3 flex items-center justify-center gap-2">
                        <span>DESBLOQUEAR B√ìVEDA AHORA</span>
                        <span class="material-symbols-outlined text-sm">arrow_forward</span>
                    </a>
                    
                    <p class="text-[10px] text-slate-400">Garant√≠a de satisfacci√≥n. Pago seguro v√≠a Mercado Pago.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==========================================
        // CONFIGURACI√ìN DE VENTA
        // ==========================================
        const LINK_MERCADO_PAGO = "#"; 
        document.getElementById('payment-btn').href = LINK_MERCADO_PAGO;

        // --- HELPERS PARA AGIA MARKUP ---
        function renderAGIA(text) {
            let html = text
                .replace(/{r}(.*?){\/r}/g, '<span class="hl-rol" title="ROL: ¬øQui√©n act√∫a?">$1</span>')
                .replace(/{c}(.*?){\/c}/g, '<span class="hl-contexto" title="CONTEXTO: Antecedentes y archivos (Verde)">$1</span>')
                .replace(/{m}(.*?){\/m}/g, '<span class="hl-meta" title="META: Objetivo principal">$1</span>')
                .replace(/{l}(.*?){\/l}/g, '<span class="hl-limites" title="LIMITES: Restricciones y reglas">$1</span>')
                .replace(/{f}(.*?){\/f}/g, '<span class="hl-formato" title="FORMATO: Estructura de salida">$1</span>')
                .replace(/\n/g, '<br>');
            return html;
        }

        function cleanAGIA(text) {
            return text.replace(/{[rcmlf]}/g, '').replace(/{\/[rcmlf]}/g, '');
        }

        // --- CONFIGURACI√ìN DE IAs ---
        const aiConfig = {
            chatgpt: { name: "ChatGPT 4o", bg: "bg-teal-600", icon: "bolt" },
            claude: { name: "Claude 3.5 Sonnet", bg: "bg-orange-700", icon: "auto_awesome" },
            gemini: { name: "Gemini 1.5 Pro", bg: "bg-blue-600", icon: "psychology" },
            midjourney: { name: "Midjourney v6", bg: "bg-indigo-900", icon: "palette" }
        };

        // --- DATA ENGINE ---
        const categoryConfig = {
            office: { label: "Oficina & Excel", color: "emerald", icon: "table_view" },
            finance: { label: "Finanzas & Dinero", color: "cyan", icon: "attach_money" },
            marketing: { label: "Marketing & RRSS", color: "pink", icon: "campaign" },
            personal: { label: "Vida & Hogar", color: "blue", icon: "home" },
            tech: { label: "Tecnolog√≠a & C√≥digo", color: "violet", icon: "terminal" },
            education: { label: "Educaci√≥n", color: "amber", icon: "school" }
        };

        const createCase = (id, cat, title, icon, problem, badPrompt, goodPromptTagged, goodResPreview, suggestedAI, locked = false, deficiencies = []) => ({
            id, category: cat, title, icon, problem, 
            badPrompt, 
            agiaPromptTagged: goodPromptTagged, 
            previewResponse: goodResPreview,
            suggestedAI: suggestedAI, // Nueva propiedad
            locked: locked, 
            deficiencies: deficiencies.length ? deficiencies : ["Sin Rol", "Contexto Vago"]
        });

        // --- BASE DE DATOS DE PROMPTS AGIA (Optimizada y Realista) ---
        const allCases = [
            
            // ==========================================================
            // CATEGOR√çA: OFICINA & EXCEL (20 CASOS)
            // ==========================================================
            
            createCase(22, 'office', 'El Limpiador de Data', 'cleaning_services', 'Base de datos sucia (Nombres, May√∫sculas).', 
                'Arregla esta lista.', 
                '{r}Act√∫a como Experto en Excel y Limpieza de Datos.{/r} {c}Te adjunto (pega aqu√≠ tu tabla) una lista de nombres con formatos mezclados y espacios extra.{/c} {m}Genera una f√≥rmula para dejar todo como "Nombre Propio" y eliminar espacios vac√≠os.{/m} {l}Solo f√≥rmulas, nada de macros.{/l} {f}Bloque de c√≥digo con la f√≥rmula y explicaci√≥n breve.{/f}',
                '<div class="font-mono text-xs bg-slate-800 text-green-400 p-2 rounded mb-2">=NOMPROPIO(ESPACIOS(A2))</div>',
                'claude', false, ["Sin Instrucci√≥n", "Vago"]),

            createCase(23, 'office', 'El "No" Diplom√°tico', 'block', 'Decir que NO al cliente sin perderlo.', 
                'Dile que no voy a hacer el cambio gratis.', 
                '{r}Act√∫a como Gerente de Cuentas Senior.{/r} {c}El cliente pide un cambio fuera del contrato original. Tenemos buena relaci√≥n.{/c} {m}Escribe un correo rechazando el trabajo gratis pero ofreciendo una cotizaci√≥n.{/m} {l}Tono emp√°tico, firme y profesional.{/l} {f}Estructura: Agradecer -> Explicar L√≠mite -> Ofrecer Soluci√≥n -> Cierre.{/f}',
                '<div class="bg-white p-2 text-xs italic text-slate-600">"Entiendo la necesidad... para mantener los est√°ndares de calidad, esto requiere un presupuesto adicional..."</div>',
                'chatgpt', false, ["Agresivo", "Sin Alternativa"]),

            createCase(201, 'office', 'Acta de Reuni√≥n Instant√°nea', 'history_edu', 'Tengo notas desordenadas de una reuni√≥n larga.', 
                'Resume esto.', 
                '{r}Act√∫a como Secretario Ejecutivo Eficiente.{/r} {c}Adjunto la transcripci√≥n desordenada de nuestra reuni√≥n de equipo.{/c} {m}Crea un Acta de Reuni√≥n profesional.{/m} {l}Ignora chistes o comentarios irrelevantes.{/l} {f}Formato: 1. Acuerdos Tomados 2. Tareas (Qui√©n hace qu√© y para cu√°ndo).{/f}',
                '<p class="font-bold">Acuerdos:</p><ul class="list-disc ml-4 text-xs"><li>Se aprueba presupuesto 2024.</li></ul><p class="font-bold mt-2">Tareas:</p><ul class="list-disc ml-4 text-xs"><li>Juan: Enviar reporte (Viernes).</li></ul>',
                'gemini', false, ["Sin Formato", "Muy Largo"]),

            createCase(202, 'office', 'Analista de Reportes PDF', 'picture_as_pdf', 'Me enviaron un PDF de 50 p√°ginas y no tengo tiempo.', 
                'De qu√© trata este pdf.', 
                '{r}Act√∫a como Analista de Negocios Senior.{/r} {c}Adjunto este reporte anual en PDF.{/c} {m}Extrae los 5 puntos cr√≠ticos que debo saber para mi reuni√≥n con el directorio.{/m} {l}M√°ximo 1 p√°gina de lectura.{/l} {f}Lista numerada con los hallazgos clave y riesgos.{/f}',
                '<ol class="list-decimal ml-4 text-xs"><li>Los ingresos cayeron un 5% en Q3.</li><li>Riesgo alto de cadena de suministro en Asia.</li></ol>',
                'gemini', false, ["Muy General", "Pierde Detalles"]),

            createCase(203, 'office', 'Creador de Diapositivas', 'slideshow', 'Tengo datos en Excel y necesito una slide.', 
                'Haz una presentaci√≥n con esto.', 
                '{r}Act√∫a como Dise√±ador de Presentaciones Corporativas.{/r} {c}Adjunto esta tabla de ventas trimestrales.{/c} {m}Dise√±a el contenido para una diapositiva de alto impacto.{/m} {l}No quiero que leas la tabla, quiero los "insights" (conclusiones).{/l} {f}T√≠tulo de la Slide -> 3 Bullets Clave -> Sugerencia de Gr√°fico.{/f}',
                '<p class="font-bold">T√≠tulo:</p> "Crecimiento Sostenido en Q4"<br><p class="font-bold">Bullets:</p> - Superamos meta en 12%...<br><p class="font-bold">Gr√°fico:</p> Barras apiladas.',
                'claude', false, ["Aburrido", "Solo Copia Datos"]),

            createCase(204, 'office', 'Modernizador de F√≥rmulas', 'functions', 'Mis BuscarV se rompen siempre.', 
                'Mejora esta f√≥rmula.', 
                '{r}Act√∫a como MVP de Excel.{/r} {c}Adjunto imagen de mi tabla donde uso BUSCARV y me da error si muevo columnas.{/c} {m}Reemplaza esto con INDICE/COINCIDIR o BUSCARX para que sea robusto.{/m} {f}La f√≥rmula nueva y por qu√© es mejor.{/f}',
                '<div class="font-mono text-xs bg-slate-800 text-green-400 p-2 rounded">=BUSCARX(H2; A:A; C:C; "No hallado")</div>',
                'claude', false, ["Usa F√≥rmulas Viejas", "Sin Explicaci√≥n"]),

            createCase(205, 'office', 'Cobrador Amable', 'money_off', 'Cliente no paga la factura hace 15 d√≠as.', 
                'Cobra la factura al cliente.', 
                '{r}Act√∫a como Asistente de Finanzas Diplomatico.{/r} {c}El cliente debe la factura #101 vencida hace 15 d√≠as. Es un buen cliente.{/c} {m}Escribe un recordatorio de pago.{/m} {l}No uses la palabra "deuda" ni amenaces. Asume que fue un olvido.{/l} {f}Email breve y cordial.{/f}',
                '<div class="bg-white p-2 text-xs italic text-slate-600">"Hola [Nombre], solo para chequear si recibieron la factura #101, quiz√°s se traspapel√≥..."</div>',
                'chatgpt', false, ["Muy Agresivo", "Sin Tacto"]),

            createCase(206, 'office', 'Arquitecto de Reuniones', 'calendar_today', 'Mis reuniones se alargan y no sirven.', 
                'Haz una agenda para reuni√≥n de ventas.', 
                '{r}Act√∫a como Facilitador Agile.{/r} {c}Tenemos reuni√≥n de revisi√≥n mensual de ventas (1 hora).{/c} {m}Crea una agenda minuto a minuto para no perder tiempo.{/m} {f}Tabla: Hora | Tema | Responsable | Objetivo del bloque.{/f}',
                '<table class="w-full text-xs border-collapse"><tr><td>0-5 min</td><td>Icebreaker</td></tr><tr><td>5-20 min</td><td>Revisi√≥n KPIs</td></tr></table>',
                'chatgpt', false, ["Sin Tiempos", "Desordenada"]),

            createCase(207, 'office', 'Feedback Constructivo', 'psychology', 'Tengo que corregir a alguien sin desmotivarlo.', 
                'Dile a Juan que llega tarde siempre.', 
                '{r}Act√∫a como Coach de Liderazgo.{/r} {c}Juan es muy bueno t√©cnicamente, pero llega tarde a las reuniones y retrasa al equipo.{/c} {m}Escribe un guion para darle feedback 1 a 1.{/m} {l}Usa el m√©todo SBI (Situaci√≥n, Comportamiento, Impacto).{/l} {f}Guion de conversaci√≥n.{/f}',
                '<p>"Juan, en la reuni√≥n de ayer (S), llegaste 10 min tarde (B), lo que hizo que el equipo esperara y perdi√©ramos foco (I)."</p>',
                'claude', false, ["Ataque Personal", "Vago"]),

            createCase(208, 'office', 'Traductor Corporativo', 'translate', 'Mi ingl√©s es b√°sico y debo escribir al CEO global.', 
                'Traduce esto a ingl√©s formal.', 
                '{r}Act√∫a como Editor Nativo de Ingl√©s de Negocios.{/r} {c}Adjunto mi borrador en espa√±ol sobre el retraso del proyecto.{/c} {m}Trad√∫celo a un ingl√©s corporativo, profesional y directo.{/m} {l}Evita sonar como traducci√≥n literal de Google.{/l} {f}Email en ingl√©s.{/f}',
                '<div class="bg-white p-2 text-xs italic text-slate-600">"Dear Mr. Smith, I am writing to provide an update regarding..."</div>',
                'claude', false, ["Spanglish", "Informal"]),

            createCase(209, 'office', 'Detective de Excel', 'find_in_page', 'Tengo dos listas y no s√© qui√©n falta.', 
                'Compara estas dos listas.', 
                '{r}Act√∫a como Analista de Datos.{/r} {c}Adjunto la Lista A (Invitados) y Lista B (Asistentes).{/c} {m}Dime exactamente qui√©nes de la Lista A NO est√°n en la Lista B.{/m} {l}Entrega solo los nombres faltantes.{/l} {f}Lista simple.{/f}',
                '<p>Faltaron:</p><ul class="list-disc ml-4 text-xs"><li>Pedro Perez</li><li>Ana Garcia</li></ul>',
                'claude', false, ["Confuso", "No Filtra"]),

            createCase(210, 'office', 'Gerente de Felicidad', 'celebration', 'El equipo remoto est√° desconectado.', 
                'Ideas para motivar al equipo.', 
                '{r}Act√∫a como Experto en Cultura Remota.{/r} {c}Tengo un equipo de 10 personas trabajando desde casa.{/c} {m}Dame 3 ideas de actividades de 15 minutos para el viernes.{/m} {l}Que se puedan hacer por Zoom y sin costo.{/l} {f}Actividad + Instrucciones.{/f}',
                '<p class="font-bold">"Tour del Escritorio":</p> Cada uno muestra un objeto curioso de su mesa y cuenta la historia.',
                'chatgpt', false, ["Cringe", "Requiere Presupuesto"]),

            createCase(211, 'office', 'Reclutador IT', 'badge', 'Necesito contratar a alguien y no s√© escribir el aviso.', 
                'Haz un aviso de trabajo.', 
                '{r}Act√∫a como Headhunter Especialista.{/r} {c}Busco un Asistente Administrativo. Adjunto mis notas sueltas sobre lo que debe hacer.{/c} {m}Redacta una Descripci√≥n de Cargo (JD) atractiva.{/m} {f}T√≠tulo del Cargo -> Responsabilidades -> Requisitos -> Beneficios.{/f}',
                '<p class="font-bold">Asistente Administrativo Estrella</p><p class="text-xs">Buscamos a la persona que mantendr√° el orden...</p>',
                'chatgpt', false, ["Aburrido", "Sin Estructura"]),

            createCase(212, 'office', 'Sem√°foro de Excel', 'traffic', 'Quiero que la tabla me avise si algo va mal.', 
                'Ponle colores a la tabla.', 
                '{r}Act√∫a como Instructor de Excel.{/r} {c}Adjunto tabla de inventario. Quiero que se ponga rojo si el stock es menor a 5.{/c} {m}Expl√≠came c√≥mo configurar el Formato Condicional.{/m} {f}Paso 1, Paso 2, Paso 3.{/f}',
                '<ol class="list-decimal ml-4 text-xs"><li>Selecciona la columna "Stock".</li><li>Ve a Formato Condicional > Reglas para resaltar celdas > Es menor que...</li><li>Escribe "5" y elige Rojo.</li></ol>',
                'claude', false, ["No Explica Pasos", "Confuso"]),

            createCase(213, 'office', 'Salida Elegante', 'door_front', 'Me voy de la empresa y no quiero quedar mal.', 
                'Escribe mi renuncia.', 
                '{r}Act√∫a como Asesor de Carrera.{/r} {c}Me voy porque me ofrecieron m√°s sueldo en otro lado, pero quiero dejar las puertas abiertas aqu√≠.{/c} {m}Redacta una carta de renuncia formal y agradecida.{/m} {l}No menciones el dinero.{/l} {f}Carta Formal.{/f}',
                '<div class="bg-white p-2 text-xs italic text-slate-600">"Estimados, por medio de la presente comunico mi renuncia... Agradezco profundamente las oportunidades..."</div>',
                'chatgpt', false, ["Muy Seca", "Quema Puentes"]),

            createCase(214, 'office', 'Arregla-Fechas', 'calendar_month', 'El sistema me baj√≥ las fechas al rev√©s (mes/d√≠a).', 
                'Arregla estas fechas que est√°n mal.', 
                '{r}Act√∫a como Experto en Datos.{/r} {c}Adjunto lista de fechas en formato gringo (MM/DD/YYYY) y mi Excel est√° en espa√±ol (DD/MM/YYYY).{/c} {m}Dame una f√≥rmula para invertirlas.{/m} {f}F√≥rmula de texto.{/f}',
                '<div class="font-mono text-xs bg-slate-800 text-green-400 p-2 rounded">=FECHA(DERECHA(A1;4);IZQUIERDA(A1;2);EXTRAE(A1;4;2))</div>',
                'claude', false, ["Manual", "Lento"]),

            createCase(215, 'office', 'Resumidor de Cadenas', 'mail', 'Me copiaron en un email con 30 respuestas.', 
                'Qu√© pas√≥ en estos correos.', 
                '{r}Act√∫a como Asistente Personal Inteligente.{/r} {c}Adjunto una cadena de correos eterna sobre el "Evento de Fin de A√±o".{/c} {m}Dime en 3 puntos: ¬øEn qu√© qued√≥? ¬øQu√© debo hacer yo?{/m} {f}Resumen Ejecutivo.{/f}',
                '<ul class="list-disc ml-4 text-xs"><li>Fecha confirmada: 15 Dic.</li><li>Tu tarea: Aprobar presupuesto antes del Jueves.</li></ul>',
                'gemini', false, ["Lee Todo", "Pierde Tiempo"]),

            createCase(216, 'office', 'Project Manager Express', 'checklist', 'Tengo un proyecto nuevo y no s√© por d√≥nde empezar.', 
                'Organiza este proyecto.', 
                '{r}Act√∫a como PMP Certificado.{/r} {c}Debemos organizar la "Fiesta de Navidad" para 100 personas.{/c} {m}Crea una lista de tareas dividida por fases (Pre, Durante, Post).{/m} {f}Lista de Checklist.{/f}',
                '<p class="font-bold">Fase 1: Planificaci√≥n</p> [ ] Definir Presupuesto...<br><p class="font-bold">Fase 2: Ejecuci√≥n</p> [ ] Reservar Local...',
                'chatgpt', false, ["Desordenado", "Olvida Pasos"]),

            createCase(217, 'office', 'Modo Vacaciones', 'beach_access', 'Me voy de vacaciones y necesito el auto-reply.', 
                'Mensaje de fuera de oficina.', 
                '{r}Act√∫a como Profesional Organizado.{/r} {c}Estar√© fuera del 1 al 15 de Febrero. Para urgencias contactar a Ana.{/c} {m}Redacta mi respuesta autom√°tica de correo.{/m} {l}Divertido pero profesional.{/l} {f}Texto del correo.{/f}',
                '<div class="bg-white p-2 text-xs italic text-slate-600">"Hola, estoy recargando bater√≠as üîã. Vuelvo el 15. Si se est√° incendiando algo, habla con Ana."</div>',
                'chatgpt', false, ["Muy Serio", "Sin Info"]),

            createCase(218, 'office', 'Unificador de Celdas', 'join', 'Tengo Nombre en Columna A y Apellido en B.', 
                'Junta nombre y apellido.', 
                '{r}Act√∫a como Ayudante de Excel.{/r} {c}Adjunto tabla. Columna A: Nombre, Columna B: Apellido.{/c} {m}Dame la f√≥rmula para unirlos en una sola celda con un espacio al medio.{/m} {f}F√≥rmula simple.{/f}',
                '<div class="font-mono text-xs bg-slate-800 text-green-400 p-2 rounded">=A2 & " " & B2</div>',
                'claude', false, ["Manual", "Lento"]),


            // ==========================================================
            // CATEGOR√çA: FINANZAS & DINERO (20 CASOS)
            // ==========================================================

            createCase(90, 'finance', 'FBI Salary Negotiator', 'verified_user', 'Miedo a pedir aumento en la evaluaci√≥n anual.', 
                'Dame argumentos para pedir m√°s sueldo.', 
                '{r}Act√∫a como un Ex-Negociador del FBI especializado en carreras corporativas.{/r} {c}Llevo 2 a√±os en la empresa. He ahorrado 15% de costos. Inflaci√≥n 5%.{/c} {m}Crea un guion para la reuni√≥n de evaluaci√≥n solicitando +20% de ajuste.{/m} {l}Evita "necesito plata". Usa "aporto valor".{/l} {f}Guion di√°logo: Yo digo / Jefe objeta / Yo respondo (T√©cnica del espejo).{/f}',
                '<p class="font-bold">Yo:</p> "Basado en el ahorro del 15%..."<br><p class="font-bold">Jefe:</p> "No hay presupuesto."<br><p class="font-bold">Yo:</p> "¬øSientes que la falta de presupuesto impide ajustar el salario al valor de mercado?"',
                'chatgpt', false, ["Enfoque en Necesidad", "Sin Objeciones"]),

            createCase(301, 'finance', 'Auditor de Gastos', 'receipt_long', 'No s√© en qu√© se me va la plata cada mes.', 
                'Analiza mis gastos.', 
                '{r}Act√∫a como Asesor Financiero Personal.{/r} {c}Adjunto una foto de mi estado de cuenta de la tarjeta de cr√©dito.{/c} {m}Identifica las 3 categor√≠as donde m√°s estoy gastando y detecta suscripciones recurrentes.{/m} {f}Tabla: Categor√≠a | Monto Total | % del Total.{/f}',
                '<table class="w-full text-xs border-collapse"><tr><td>Comida R√°pida</td><td>$150.000</td><td>30%</td></tr><tr><td>Suscripciones</td><td>$40.000</td><td>8%</td></tr></table>',
                'gemini', false, ["Sin Categor√≠as", "Solo Suma"]),

            createCase(302, 'finance', 'Arquitecto de Presupuesto', 'pie_chart', 'Quiero ordenar mi sueldo reci√©n recibido.', 
                'Hazme un presupuesto.', 
                '{r}Act√∫a como Experto en Finanzas Personales.{/r} {c}Gano $1.000.000 l√≠quidos. Adjunto mis gastos fijos (Arriendo, Luz).{/c} {m}Crea una estructura de presupuesto basada en la regla 50/30/20.{/m} {l}Ajusta si mis gastos fijos superan el 50%.{/l} {f}Lista: Necesidades ($) / Deseos ($) / Ahorro ($).{/f}',
                '<p><strong>Necesidades (50%):</strong> $500.000 (Est√°s pasado en $50k, recorta en luz).</p><p><strong>Deseos (30%):</strong> $300.000.</p><p><strong>Ahorro (20%):</strong> $200.000.</p>',
                'chatgpt', false, ["Sin Reglas", "N√∫meros al Azar"]),

            createCase(303, 'finance', 'Eliminador de Deudas', 'snowboarding', 'Tengo 3 tarjetas y un cr√©dito, estoy ahogado.', 
                'C√≥mo pago mis deudas.', 
                '{r}Act√∫a como Dave Ramsey (Experto en Deuda).{/r} {c}Adjunto lista de deudas con Monto Total y Cuota Mensual.{/c} {m}Dise√±a un plan de pago usando el "M√©todo Bola de Nieve" (Pagar la m√°s chica primero).{/m} {f}Paso 1, Paso 2, Paso 3.{/f}',
                '<ol class="list-decimal ml-4 text-xs"><li>Paga m√≠nimos de todo, excepto Visa ($50k).</li><li>Ataca Visa con todo el extra ($100k) hasta eliminarla en 2 meses.</li><li>Usa esos $150k liberados para la siguiente deuda.</li></ol>',
                'chatgpt', false, ["Pagar Todo Junto", "Sin Estrategia"]),

            createCase(304, 'finance', 'Broker Hipotecario', 'real_estate_agent', 'Tengo dos ofertas del banco y no entiendo el CAE.', 
                'Cu√°l cr√©dito es mejor.', 
                '{r}Act√∫a como Corredor de Propiedades Matem√°tico.{/r} {c}Adjunto Simulaci√≥n Banco A y Banco B.{/c} {m}Dime cu√°l es m√°s barato al final del periodo (Costo Total del Cr√©dito) y por qu√©.{/m} {l}Ignora la tasa, f√≠jate en el CAE y seguros.{/l} {f}Comparativa directa.{/f}',
                '<p class="text-green-600 font-bold">Ganador: Banco B.</p><p class="text-xs">Aunque la tasa es mayor, los seguros son m√°s baratos, ahorr√°ndote $2M en total.</p>',
                'claude', false, ["Mira solo Tasa", "Ignora Seguros"]),

            createCase(305, 'finance', 'Mentor de Inversiones', 'trending_up', 'Tengo unos ahorros y quiero que crezcan.', 
                'En qu√© invierto 1 mill√≥n.', 
                '{r}Act√∫a como Asesor de Inversiones Certificado.{/r} {c}Tengo perfil moderado, horizonte 5 a√±os, objetivo: pie para casa.{/c} {m}Sugiere un portafolio diversificado de ETFs o Fondos Mutuos.{/m} {l}Nada de Crypto ni apuestas arriesgadas.{/l} {f}Asignaci√≥n de Activos (Ej: 60% Renta Fija...).{/f}',
                '<p><strong>Portafolio Sugerido:</strong></p><ul class="list-disc ml-4 text-xs"><li>60% Renta Fija (Bonos UF) - Estabilidad.</li><li>40% Renta Variable Global (S&P 500) - Crecimiento.</li></ul>',
                'chatgpt', false, ["Crypto Bros", "Sin Perfil"]),

            createCase(306, 'finance', 'Mago del Inter√©s Compuesto', 'savings', 'Quiero saber cu√°nto tendr√© en 20 a√±os.', 
                'Calcula mi jubilaci√≥n.', 
                '{r}Act√∫a como Matem√°tico Financiero.{/r} {c}Ahorro $100.000 al mes. Retorno esperado 7% anual. Plazo 20 a√±os.{/c} {m}Calcula el monto final y cu√°nto es ganancia pura por inter√©s.{/m} {f}Monto Final vs Monto Aportado.{/f}',
                '<p><strong>Total Final:</strong> $52.000.000</p><p class="text-xs">T√∫ aportaste: $24M. El mercado te regal√≥: $28M (Magia del Inter√©s).</p>',
                'claude', false, ["C√°lculo Lineal", "Error Matem√°tico"]),

            createCase(307, 'finance', 'Regateador Profesional', 'call', 'Pago mucho de celular e internet.', 
                'Ay√∫dame a bajar la cuenta del tel√©fono.', 
                '{r}Act√∫a como Cliente Insatisfecho pero Amable.{/r} {c}Pago $40.000. La competencia ofrece lo mismo por $25.000.{/c} {m}Escribe el guion exacto para decirle al ejecutivo de retenci√≥n y obtener el descuento.{/m} {f}Guion telef√≥nico.{/f}',
                '<p>"Hola, vi que la compa√±√≠a X ofrece esto por $25k. Llevo 5 a√±os con ustedes y me gustar√≠a quedarme, ¬øpueden igualar esa oferta o debo gestionar la portabilidad ahora?"</p>',
                'chatgpt', false, ["Amenaza Vaga", "Sin Datos"]),

            createCase(308, 'finance', 'Profesor de Econom√≠a', 'school', 'No entiendo por qu√© todo est√° tan caro.', 
                'Expl√≠came la inflaci√≥n.', 
                '{r}Act√∫a como Profesor de Primaria.{/r} {c}Quiero entender la inflaci√≥n.{/c} {m}Expl√≠calo con una analog√≠a de manzanas o dulces.{/m} {l}Sin t√©rminos t√©cnicos como "IPC".{/l} {f}Analog√≠a simple.{/f}',
                '<p>Imagina que tienes 10 monedas y compras 10 dulces. Si ma√±ana el kiosco imprime m√°s tickets pero hay los mismos dulces, ahora necesitar√°s 2 tickets para 1 dulce. Tu dinero vale menos.</p>',
                'chatgpt', false, ["Muy T√©cnico", "Aburrido"]),

            createCase(309, 'finance', 'Constructor de Seguridad', 'shield', '¬øCu√°nto debo tener guardado por si acaso?', 
                'Calcula mi fondo de emergencia.', 
                '{r}Act√∫a como Planificador Financiero.{/r} {c}Mis gastos fijos mensuales son $600.000. Soy empleado dependiente (riesgo medio).{/c} {m}Define el monto ideal de mi colch√≥n de seguridad.{/m} {f}Monto Total y sugerencia de d√≥nde guardarlo.{/f}',
                '<p><strong>Meta:</strong> $1.800.000 (3 meses de gastos).</p><p class="text-xs">Gu√°rdalo en un Dep√≥sito a Plazo renovable a 30 d√≠as para que no pierda valor pero est√© disponible.</p>',
                'chatgpt', false, ["Sin Cifras", "Debajo del Colch√≥n"]),

            createCase(310, 'finance', 'Calculadora Freelance', 'work', 'Me ofrecieron un trabajo freelance y no s√© cu√°nto cobrar.', 
                'Cu√°nto cobro por hora.', 
                '{r}Act√∫a como Consultor de Negocios.{/r} {c}En mi trabajo normal gano $10k la hora. Como freelance tengo que pagar mis propios impuestos y salud.{/c} {m}Calcula mi tarifa por hora freelance para ganar lo mismo netamente.{/m} {f}F√≥rmula y Tarifa Final.{/f}',
                '<p><strong>Tarifa Sugerida:</strong> $15.000 - $17.000 / hora.</p><p class="text-xs">Debes sumar un 30-40% extra para cubrir impuestos, salud, vacaciones y d√≠as sin proyectos.</p>',
                'claude', false, ["Mismo Precio", "Pierde Plata"]),

            createCase(311, 'finance', 'Exterminador de Hormigas', 'pest_control', 'Se me va la plata en tonter√≠as.', 
                'Identifica mis gastos hormiga.', 
                '{r}Act√∫a como Minimalista Financiero.{/r} {c}Adjunto lista de mis compras de la semana pasada (Caf√©s, Kiosco, Uber).{/c} {m}Calcula cu√°nto es esto al a√±o y qu√© podr√≠a comprar con eso.{/m} {f}Proyecci√≥n Anual impactante.{/f}',
                '<p>Gastas $20.000/semana en caf√© y snacks.</p><p class="font-bold text-red-600">Al a√±o son $1.040.000.</p><p>Podr√≠as haber pagado unas vacaciones en el Caribe.</p>',
                'gemini', false, ["Solo Suma", "Sin Impacto"]),

            createCase(312, 'finance', 'Estratega FIRE', 'volunteer_activism', 'Quiero jubilarme a los 45 a√±os.', 
                'C√≥mo logro la libertad financiera.', 
                '{r}Act√∫a como Experto en Movimiento FIRE.{/r} {c}Gasto anual: $12.000 USD. Edad actual: 25.{/c} {m}Calcula mi "N√∫mero de Libertad" (Regla del 25x) y cu√°nto debo invertir mensual para llegar a los 45.{/m} {f}C√°lculo Matem√°tico.{/f}',
                '<p><strong>N√∫mero FIRE:</strong> $300.000 USD.</p><p>Para llegar en 20 a√±os (al 7% inter√©s), debes invertir aprox $600 USD mensuales desde hoy.</p>',
                'claude', false, ["Fantasioso", "Sin Matem√°ticas"]),

            createCase(313, 'finance', 'Juez Inmobiliario', 'house', '¬øMe compro un depa o sigo arrendando?', 
                'Qu√© me conviene m√°s, comprar o arrendar.', 
                '{r}Act√∫a como Analista Inmobiliario Objetivo.{/r} {c}Arriendo: $400k. Dividendo estimado: $600k + Contribuciones. Plazo 20 a√±os.{/c} {m}Analiza el costo de oportunidad de comprar vs invertir la diferencia ($200k) en el mercado.{/m} {f}Comparativa a 20 a√±os.{/f}',
                '<p>Si inviertes los $200k de diferencia al 7% anual, en 20 a√±os tendr√≠as $100M l√≠quidos. Compara eso con la plusval√≠a esperada del departamento menos los intereses pagados.</p>',
                'chatgpt', false, ["Siempre Comprar", "Ignora Intereses"]),

            createCase(314, 'finance', 'Doctor de Cr√©dito', 'credit_score', 'El banco no me presta plata.', 
                'C√≥mo mejoro mi perfil para el banco.', 
                '{r}Act√∫a como Ejecutivo de Riesgo Bancario.{/r} {c}Tengo Dicom hist√≥rico ya pagado, pero mi score es bajo.{/c} {m}Dame 3 acciones concretas para subir mi puntaje en 6 meses.{/m} {f}Plan de Acci√≥n.{/f}',
                '<ol class="list-decimal ml-4 text-xs"><li>Saca una tarjeta de casa comercial y √∫sala poco (10% cupo).</li><li>Paga siempre 5 d√≠as antes del vencimiento.</li><li>Acredita patrimonio (auto/dep√≥sito) en el banco.</li></ol>',
                'chatgpt', false, ["Espera 5 a√±os", "Sin Soluci√≥n"]),

            createCase(315, 'finance', 'Contador Amigo', 'calculate', 'No entiendo la devoluci√≥n de impuestos.', 
                'Expl√≠came la retenci√≥n de boletas.', 
                '{r}Act√∫a como Contador Auditor.{/r} {c}Soy boleteador en Chile. Me retienen el 13.75%.{/c} {m}Expl√≠came simple: ¬øEsa plata la pierdo? ¬øMe la devuelven? ¬øQu√© pasa con la AFP?{/m} {f}Explicaci√≥n clara.{/f}',
                '<p>Esa plata es un adelanto. En Abril, el SII usa ese monto para pagar tu AFP y Salud obligatoria. Si sobra, te lo devuelven. Si falta (porque ganaste mucho), te toca pagar la diferencia.</p>',
                'chatgpt', false, ["Jerga Tributaria", "Confuso"]),

            createCase(316, 'finance', 'Coach de Metas', 'flag', 'Quiero ahorrar pero no tengo objetivo claro.', 
                'Ay√∫dame a definir metas financieras.', 
                '{r}Act√∫a como Coach SMART.{/r} {c}Quiero "ahorrar m√°s" y "viajar".{/c} {m}Convierte estos deseos en Metas SMART (Espec√≠ficas, Medibles, Alcanzables...).{/m} {f}Tabla: Deseo vs Meta SMART.{/f}',
                '<p><strong>Antes:</strong> "Quiero viajar".</p><p><strong>SMART:</strong> "Ahorrar $100.000 mensuales por 12 meses para ir a Brasil en Febrero 2025."</p>',
                'chatgpt', false, ["Deseos Vagos", "Sin Plazos"]),

            createCase(317, 'finance', 'Chef Ahorrativo', 'restaurant_menu', 'Gasto mucho en el supermercado.', 
                'Hazme un men√∫ barato y sano.', 
                '{r}Act√∫a como Nutricionista Economista.{/r} {c}Presupuesto: $30.000 semanal. Una persona.{/c} {m}Crea un plan de comidas (Almuerzo/Cena) basado en ingredientes baratos (Legumbres, Huevo, Estacional).{/m} {f}Lista de Compras + Men√∫.{/f}',
                '<p><strong>Lista:</strong> 1kg Lentejas, 1 Bandeja Huevos, Acelga, Arroz...</p><p><strong>Lunes:</strong> Lentejas con Arroz. <strong>Martes:</strong> Tortilla de Acelga.</p>',
                'chatgpt', false, ["Ingredientes Caros", "Complejo"]),

            createCase(318, 'finance', 'Hacker de Viajes', 'flight_takeoff', 'Quiero ir a Europa pero es muy caro.', 
                'C√≥mo viajar barato.', 
                '{r}Act√∫a como Agente de Viajes Low Cost.{/r} {c}Quiero ir a Madrid en Octubre.{/c} {m}Dame 3 estrategias para bajar el costo del pasaje y estad√≠a.{/m} {l}No sugieras dormir en la calle.{/l} {f}Tips accionables.{/f}',
                '<ul class="list-disc ml-4 text-xs"><li>Usa Google Flights en modo "Explorar" sin fecha fija.</li><li>Viaja con solo mochila (sin maleta bodega).</li><li>Busca hostales con cocina para no comer fuera siempre.</li></ul>',
                'chatgpt', false, ["Tips Gen√©ricos", "Obvio"]),

            createCase(319, 'finance', 'Detector de Fugas', 'subscriptions', 'Tengo Netflix, HBO, Disney y no veo nada.', 
                'Ay√∫dame a cancelar cosas.', 
                '{r}Act√∫a como Asesor de Eficiencia.{/r} {c}Adjunto lista de mis 10 suscripciones digitales.{/c} {m}Calcula el costo anual y recomi√©ndame una estrategia de rotaci√≥n (tener solo 1 a la vez).{/m} {f}Estrategia de Rotaci√≥n.{/f}',
                '<p>Total Anual: $120.000.</p><p><strong>Estrategia:</strong> Enero-Marzo solo Netflix. Abril-Junio solo Disney. Ahorras 70% y siempre tienes contenido nuevo.</p>',
                'claude', false, ["Cancela Todo", "Sin Plan"]),

            // ==========================================================
            // CATEGOR√çA: MARKETING & RRSS (20 CASOS - NUEVO)
            // ==========================================================

            // 1. Ganchos Virales (Cl√°sico)
            createCase(401, 'marketing', 'Estratega de Ganchos', 'bolt', 'Mis videos no tienen visitas (0 visualizaciones).', 
                'Ideas para videos virales.', 
                '{r}Act√∫a como Consultor de Viralidad (Estilo Alex Hormozi).{/r} {c}Soy Abogado. Mi contenido es t√©cnico y aburrido.{/c} {m}Dame 3 Ganchos (Hooks) visuales y auditivos que detengan el scroll en <2 seg.{/m} {l}Usa curiosidad o miedo.{/l} {f}Tabla: Hook Verbal | Concepto Visual | Por qu√© funciona.{/f}',
                '<table class="w-full text-xs border-collapse"><tr><td>"No te cases sin firmar esto..."</td><td>Rompiendo un papel frente a c√°mara üìÑ</td><td>Miedo</td></tr></table>',
                'chatgpt', false, ["Aburrido", "Hola soy Juan"]),

            // 2. Calendario Editorial 30 D√≠as
            createCase(402, 'marketing', 'Calendario Editorial 30 D√≠as', 'calendar_month', 'No s√© qu√© postear ma√±ana, estoy bloqueado.', 
                'Plan de contenidos para el mes.', 
                '{r}Act√∫a como Head of Content.{/r} {c}Vendo Ropa Sustentable. Audiencia: Millennials.{/c} {m}Genera un calendario de 4 semanas con 3 posts semanales (Lunes: Educativo, Mi√©r: Venta, Vie: Humor).{/m} {f}Tabla: D√≠a | T√≠tulo | Formato (Reel/Carrusel).{/f}',
                '<table class="w-full text-xs border-collapse"><tr><td>Lun</td><td>"5 Telas T√≥xicas"</td><td>Carrusel</td></tr><tr><td>Vie</td><td>"Mi perro eligiendo mi outfit"</td><td>Reel</td></tr></table>',
                'chatgpt', false, ["Postea lo mismo", "Sin Estrategia"]),

            // 3. Guion de Video Corto (Reel/TikTok)
            createCase(403, 'marketing', 'Guionista de TikTok', 'movie_filter', 'Me trabo al grabar y mis videos son largos.', 
                'Guion para un video de ventas.', 
                '{r}Act√∫a como Director de Cine Publicitario.{/r} {c}Quiero vender mi curso de Excel.{/c} {m}Escribe un guion de 30 segundos con estructura HVC (Hook, Value, Call to Action).{/m} {f}Guion l√≠nea por l√≠nea con indicaciones de c√°mara.{/f}',
                '<p><strong>0-3s (Hook):</strong> "Deja de perder 2 horas al d√≠a en esto..." (Muestra Excel desordenado).</p><p><strong>3-20s (Value):</strong> "Con esta f√≥rmula..."</p><p><strong>20-30s (CTA):</strong> "Comenta DATA para enviarte el truco".</p>',
                'chatgpt', false, ["Hola amigos", "Muy Largo"]),

            // 4. Analista de Competencia (Adjuntar Screenshot)
            createCase(404, 'marketing', 'Esp√≠a de Marketing', 'visibility', 'Mi competencia crece m√°s r√°pido que yo.', 
                'Analiza esta cuenta de Instagram.', 
                '{r}Act√∫a como Analista de Redes Sociales.{/r} {c}Adjunto screenshot del perfil de mi competidor.{/c} {m}Dime qu√© est√°n haciendo bien (sus pilares de contenido) y qu√© les falta (mi oportunidad).{/m} {f}An√°lisis FODA r√°pido.{/f}',
                '<p><strong>Fortaleza:</strong> Usan muy buen UGC (contenido de usuarios).</p><p><strong>Oportunidad:</strong> No responden comentarios. Ah√≠ puedes ganar t√∫ creando comunidad.</p>',
                'gemini', false, ["Copia Todo", "Envidia"]),

            // 5. Creador de Memes Corporativos
            createCase(405, 'marketing', 'Jefe de Memes', 'sentiment_very_satisfied', 'Mi marca es muy seria y aburrida.', 
                'Ideas de memes para empresa.', 
                '{r}Act√∫a como Comediante Corporativo.{/r} {c}Soy Contador. Quiero conectar con el dolor de mis clientes en Operaci√≥n Renta.{/c} {m}Describe 3 memes usando plantillas famosas adaptadas a mi nicho.{/m} {f}Descripci√≥n de Imagen + Texto Superior/Inferior.{/f}',
                '<p><strong>Plantilla:</strong> Drake Hotline Bling.</p><p><strong>No:</strong> "Hacer la declaraci√≥n solo".</p><p><strong>S√≠:</strong> "Contratar a un contador y dormir tranquilo".</p>',
                'chatgpt', false, ["Chistes Malos", "Ofensivo"]),

            // 6. Respondedor de Haters
            createCase(406, 'marketing', 'Gestor de Crisis', 'policy', 'Me pusieron un comentario horrible en un post.', 
                'Responde a este hater.', 
                '{r}Act√∫a como Relacionador P√∫blico Senior.{/r} {c}Comentario: "Su servicio es una estafa, nunca lleg√≥". (Es mentira, el pedido va en camino).{/c} {m}Redacta una respuesta p√∫blica que nos haga ver profesionales y calme al usuario.{/m} {l}Sin pelear ni borrar.{/l} {f}Texto respuesta.{/f}',
                '<div class="bg-white p-2 text-xs italic text-slate-600">"Hola [Nombre], lamentamos que te sientas as√≠. Tu pedido #123 est√° en ruta. Te enviamos el tracking por DM para que lo revises. ¬°Quedamos atentos!"</div>',
                'chatgpt', false, ["Borrar y Bloquear", "Pelear"]),

            // 7. Optimizador de Bio (Instagram/LinkedIn)
            createCase(407, 'marketing', 'Cirujano de Perfiles', 'face', 'Nadie me sigue cuando visita mi perfil.', 
                'Mejora mi biograf√≠a.', 
                '{r}Act√∫a como Experto en Marca Personal.{/r} {c}Soy Nutricionista Vegana.{/c} {m}Reescribe mi biograf√≠a de Instagram para que quede claro qu√© hago y tenga un CTA fuerte.{/m} {l}M√°ximo 150 caracteres.{/l} {f}Nombre (SEO) + Bio + Enlace.{/f}',
                '<p><strong>Nombre:</strong> Cata | Nutrici√≥n Vegana üå±</p><p><strong>Bio:</strong> Te ayudo a comer plantas sin perder sabor ü•ó | +1000 pacientes felices. üëá Agenda tu hora aqu√≠:</p>',
                'chatgpt', false, ["Bio Vacia", "Frases Motivacionales"]),

            // 8. Generador de Carrusel Educativo
            createCase(408, 'marketing', 'Arquitecto de Slides', 'view_carousel', 'Quiero ense√±ar algo pero no s√© estructurarlo.', 
                'Estructura un carrusel de 5 slides.', 
                '{r}Act√∫a como Dise√±ador Instruccional.{/r} {c}Tema: "C√≥mo invertir en ETFs".{/c} {m}Escribe el texto para cada l√°mina usando el m√©todo AIDA (Atenci√≥n, Inter√©s, Deseo, Acci√≥n).{/m} {f}Slide 1 (T√≠tulo) -> Slide 2-4 (Contenido) -> Slide 5 (Guardar).{/f}',
                '<p><strong>S1:</strong> "Invierte en Apple, Tesla y Google con $10 d√≥lares".</p><p><strong>S5:</strong> "Guarda este post para tu yo del futuro üíæ".</p>',
                'claude', false, ["Texto Plano", "Sin Dise√±o"]),

            // 9. Ideas de Stories Interactivas
            createCase(409, 'marketing', 'Rey del Engagement', 'touch_app', 'Mis stories no tienen interacci√≥n.', 
                'Ideas para stories divertidas.', 
                '{r}Act√∫a como Experto en Gamificaci√≥n.{/r} {c}Vendo Zapatillas.{/c} {m}Dame 3 ideas de stories usando los stickers de Instagram (Encuesta, Pregunta, Quiz) para conocer los gustos de mi audiencia.{/m} {f}Idea + Sticker a usar.{/f}',
                '<p><strong>"Batalla de Modelos":</strong> Pon foto A vs Foto B y usa el Sticker de ENCUESTA. "¬øCu√°l te pondr√≠as para una primera cita?".</p>',
                'chatgpt', false, ["Solo Foto Producto", "Aburrido"]),

            // 10. Redactor de Captions (Copywriting)
            createCase(410, 'marketing', 'Copywriter Persuasivo', 'edit_note', 'Tengo la foto pero no s√© qu√© escribir abajo.', 
                'Escribe el texto del post.', 
                '{r}Act√∫a como Copywriter de Ventas.{/r} {c}Foto: Yo trabajando en mi laptop en un caf√©. Vendo servicios de dise√±o.{/c} {m}Escribe un caption que hable sobre la libertad de emprender y venda mi servicio de branding.{/m} {f}Gancho -> Historia -> CTA.{/f}',
                '<p>"¬øTu oficina se ve as√≠? ‚òïÔ∏è..." (Historia sobre dejar el jefe)... "Si quieres libertad, empieza por tu marca. Escribe BRANDING y empezamos".</p>',
                'claude', false, ["Emojis Random", "Sin Texto"]),

            // 11. Analista de M√©tricas (Adjuntar Excel/Screenshot)
            createCase(411, 'marketing', 'Cient√≠fico de Datos', 'analytics', 'Tengo muchos n√∫meros y no entiendo nada.', 
                'Analiza mis estad√≠sticas.', 
                '{r}Act√∫a como Analista de Datos de Marketing.{/r} {c}Adjunto screenshot de mis estad√≠sticas de Instagram del √∫ltimo mes.{/c} {m}Dime cu√°l fue el mejor formato (Reel/Post) y a qu√© hora est√° m√°s activa mi audiencia.{/m} {f}Conclusi√≥n + Recomendaci√≥n.{/f}',
                '<p>Tus Reels tienen 3x m√°s alcance que tus fotos, pero las fotos tienen m√°s guardados. <strong>Recomendaci√≥n:</strong> Sube Reels para crecer y Carruseles para vender.</p>',
                'gemini', false, ["Mira Likes", "Vanidad"]),

            // 12. Plan de Lanzamiento de Producto
            createCase(412, 'marketing', 'Launch Manager', 'rocket_launch', 'Voy a sacar un producto nuevo y quiero hype.', 
                'Estrategia de lanzamiento.', 
                '{r}Act√∫a como Jeff Walker (Product Launch Formula).{/r} {c}Lanzo una Agenda 2025 en 2 semanas.{/c} {m}Crea un plan de 3 fases (Intriga, Educaci√≥n, Venta) para Instagram Stories.{/m} {f}D√≠a a d√≠a.{/f}',
                '<p><strong>Fase 1 (Intriga):</strong> Muestra solo un borde de la agenda. "¬øQu√© color creen que es?".</p><p><strong>Fase 3 (Venta):</strong> Cuenta regresiva y link de compra.</p>',
                'chatgpt', false, ["Subir foto y ya", "Sin Previa"]),

            // 13. Influencer Outreach
            createCase(413, 'marketing', 'Agente de Talentos', 'handshake', 'Quiero colaborar con influencers pero no me responden.', 
                'Escribe un DM para influencer.', 
                '{r}Act√∫a como PR de Marcas.{/r} {c}Quiero enviarle mi crema a una influencer de belleza (100k seguidores). No tengo presupuesto, solo canje.{/c} {m}Escribe un DM corto, personalizado y halagador para proponerle enviarle el regalo sin compromiso.{/m} {f}Mensaje DM.{/f}',
                '<div class="bg-white p-2 text-xs italic text-slate-600">"Hola Cami! Amo tus tips de skincare, sobre todo el √∫ltimo sobre... Nos encantar√≠a enviarte nuestro serum estrella sin compromiso, solo para que lo pruebes..."</div>',
                'chatgpt', false, ["Copiar Pegar", "Spam"]),

            // 14. Prompt para Midjourney (Imagen con IA)
            createCase(414, 'marketing', 'Artista de IA', 'palette', 'No tengo fotos profesionales de mi producto.', 
                'Crea una foto de producto con IA.', 
                '{r}Act√∫a como Ingeniero de Prompts de Midjourney.{/r} {c}Producto: Botella de Jugo de Naranja natural.{/c} {m}Escribe un prompt para generar una fotograf√≠a publicitaria ultra realista, con luz solar, salpicaduras de agua y fondo de campo frutal.{/m} {f}Prompt en ingl√©s (para Midjourney).{/f}',
                '<div class="font-mono text-xs bg-slate-800 text-purple-400 p-2 rounded">/imagine prompt: cinematic product shot of a fresh orange juice bottle, condensation droplets, splashing water, sunny orange grove background, natural lighting, 8k, photorealistic --ar 4:5</div>',
                'midjourney', false, ["Dibujo Feo", "Poco Realista"]),

            // 15. Transcribir y Reutilizar (Adjuntar Audio/Video)
            createCase(415, 'marketing', 'Reciclador de Contenidos', 'recycling', 'Hice un video bueno y quiero sacarle m√°s jugo.', 
                'Convierte este video en un blog post.', 
                '{r}Act√∫a como Redactor SEO.{/r} {c}Adjunto la transcripci√≥n de mi video de YouTube sobre "C√≥mo cuidar plantas".{/c} {m}Transf√≥rmalo en un art√≠culo de blog estructurado con H1, H2 y listas.{/m} {f}Art√≠culo Blog.{/f}',
                '<p><strong>T√≠tulo H1:</strong> Gu√≠a Definitiva para Cuidar tus Plantas.</p><p><strong>H2:</strong> ¬øCu√°nta agua necesitan?</p><p>Seg√∫n el video, el error #1 es regar demasiado...</p>',
                'gemini', false, ["Solo Transcribe", "Sin Formato"]),

            // 16. T√≠tulos Clickbait (YouTube/Blog)
            createCase(416, 'marketing', 'Maestro del Clickbait', 'mouse', 'Nadie hace clic en mis enlaces.', 
                'Mejora estos t√≠tulos.', 
                '{r}Act√∫a como Editor de BuzzFeed.{/r} {c}T√≠tulo original: "Consejos para ahorrar".{/c} {m}Dame 5 opciones de t√≠tulos irresistibles (Clickbait √©tico) que prometan un beneficio espec√≠fico o generen curiosidad extrema.{/m} {f}Lista de T√≠tulos.{/f}',
                '<ul class="list-disc ml-4 text-xs"><li>"7 trucos de ahorro que los bancos no quieren que sepas"</li><li>"C√≥mo ahorr√© $1000 en un mes (sin dejar de comer fuera)"</li></ul>',
                'chatgpt', false, ["T√≠tulo Aburrido", "Nadie entra"]),

            // 17. Buyer Persona Detallado
            createCase(417, 'marketing', 'Psic√≥logo de Consumo', 'person_search', 'No s√© a qui√©n le estoy vendiendo.', 
                'Define a mi cliente ideal.', 
                '{r}Act√∫a como Investigador de Mercado.{/r} {c}Vendo: Kits de Rob√≥tica para ni√±os.{/c} {m}Crea un perfil de Buyer Persona (Padre/Madre) detallando sus miedos, deseos y qu√© redes usa.{/m} {f}Nombre Ficticio + Perfil.{/f}',
                '<p><strong>Nombre:</strong> "Andrea, la Mam√° Tech".</p><p><strong>Miedo:</strong> Que sus hijos pasen todo el d√≠a en TikTok sin aprender nada.</p><p><strong>Deseo:</strong> Que aprendan habilidades del futuro (programaci√≥n).</p>',
                'chatgpt', false, ["Todo el mundo", "Sin Foco"]),

            // 18. Estrategia de Hashtags
            createCase(418, 'marketing', 'Estratega de Alcance', 'tag', 'Uso siempre los mismos hashtags.', 
                'Dame hashtags nuevos.', 
                '{r}Act√∫a como Experto en SEO de Instagram.{/r} {c}Nicho: Fotograf√≠a de Bodas en Chile.{/c} {m}Dame 3 grupos de hashtags: Grandes (Alcance), Medianos (Nicho) y Espec√≠ficos (Local).{/m} {l}M√°ximo 30.{/l} {f}Listas copiables.{/f}',
                '<p><strong>Locales:</strong> #MatrimoniosChile #NoviasSantiago</p><p><strong>Nicho:</strong> #FotografiaBodaDocumental #BrideToBe</p>',
                'chatgpt', false, ["#Love #Like", "Baneados"]),

            // 19. Lead Magnet Generator
            createCase(419, 'marketing', 'Im√°n de Clientes', 'magnet', 'Quiero correos de potenciales clientes.', 
                'Ideas para un ebook gratis.', 
                '{r}Act√∫a como Estratega de Email Marketing.{/r} {c}Soy Entrenador Personal.{/c} {m}Dame 3 ideas de "Lead Magnets" (Regalos) irresistibles para que la gente me deje su email a cambio.{/m} {f}T√≠tulo + Promesa.{/f}',
                '<p><strong>1. Checklist:</strong> "La lista de compras de supermercado fit por menos de $20k".</p><p><strong>2. Video:</strong> "Rutina de 10 min para hacer en pijama".</p>',
                'chatgpt', false, ["Newsletter", "Nadie se suscribe"]),

            // 20. Auditor√≠a de Cuenta (Adjuntar Perfil)
            createCase(420, 'marketing', 'Doctor de Instagram', 'medical_services', 'Siento que mi perfil se ve desordenado.', 
                'Audita mi cuenta.', 
                '{r}Act√∫a como Director de Arte Digital.{/r} {c}Adjunto captura de mi Feed de Instagram.{/c} {m}Critica constructivamente mi est√©tica, foto de perfil y destacados. Dime 1 cambio urgente.{/m} {f}Diagn√≥stico + Receta.{/f}',
                '<p><strong>Diagn√≥stico:</strong> Tus portadas de Reels cortan los textos. Se ve desprolijo.</p><p><strong>Cambio Urgente:</strong> Usa una plantilla de Canva para unificar tipograf√≠as y colores.</p>',
                'gemini', false, ["Se ve bien", "Mentira Piadosa"]),
        ];

        // --- L√ìGICA UI ---
        let currentCategory = 'office'; 
        let searchQuery = '';

        function init() {
            renderCategories();
            renderCaseList();
            // Start at marketing to show changes? Or keep office default.
            // Keeping Office default but user can switch easily.
            selectCase(22); 
        }

        function renderCategories() {
            const nav = document.getElementById('category-nav');
            nav.innerHTML = Object.keys(categoryConfig).map(key => {
                const conf = categoryConfig[key];
                const isActive = currentCategory === key;
                const activeClass = isActive 
                    ? `bg-${conf.color}-100 text-${conf.color}-700 border-${conf.color}-200 shadow-sm ring-1 ring-${conf.color}-300` 
                    : `bg-white text-slate-500 border-slate-100 hover:bg-slate-50`;
                return `<button onclick="setCategory('${key}')" class="flex items-center gap-2 px-4 py-2 rounded-full border text-xs font-bold transition-all whitespace-nowrap ${activeClass}"><span class="material-symbols-outlined text-lg">${conf.icon}</span>${conf.label}</button>`;
            }).join('');
        }

        function renderCaseList() {
            const listEl = document.getElementById('case-list');
            const filtered = allCases.filter(c => (c.category === currentCategory || searchQuery !== '') && (c.title.toLowerCase().includes(searchQuery.toLowerCase()) || c.problem.toLowerCase().includes(searchQuery.toLowerCase())));
            
            document.getElementById('count-display').innerText = allCases.length; 
            
            if (filtered.length === 0) {
                listEl.innerHTML = `<div class="p-8 text-center text-slate-400 text-xs">No hay resultados</div>`;
                return;
            }

            listEl.innerHTML = filtered.map(c => {
                const config = categoryConfig[c.category];
                const iconDisplay = c.locked ? 'lock' : c.icon;
                const iconColorClass = c.locked ? 'text-slate-300 bg-slate-50' : `text-${config.color}-500 bg-white`;
                const lockOpacity = c.locked ? 'opacity-70 grayscale' : '';
                
                return `<button onclick="selectCase(${c.id})" class="w-full text-left p-3 rounded-lg group transition-all mb-2 hover:bg-slate-50 border border-transparent relative overflow-hidden ${lockOpacity}">
                    <div class="flex items-center gap-3 pl-2">
                        <div class="w-8 h-8 rounded-lg border border-slate-100 flex items-center justify-center flex-none shadow-sm ${iconColorClass}">
                            <span class="material-symbols-outlined text-lg">${iconDisplay}</span>
                        </div>
                        <div class="overflow-hidden">
                            <h4 class="text-sm font-semibold text-slate-700 truncate group-hover:text-indigo-700 transition-colors flex items-center gap-2">
                                ${c.title} 
                                ${!c.locked ? '<span class="text-[9px] bg-green-100 text-green-700 px-1.5 rounded-full border border-green-200">GRATIS</span>' : ''}
                            </h4>
                            <p class="text-[10px] text-slate-400 truncate">${c.locked ? 'Solo miembros Premium' : c.problem}</p>
                        </div>
                    </div>
                </button>`;
            }).join('');
        }

        function selectCase(id) {
            const c = allCases.find(x => x.id === id);
            if(!c) return;

            if (c.locked) {
                openPaywall();
                return;
            }

            const conf = categoryConfig[c.category];
            const ai = aiConfig[c.suggestedAI] || aiConfig['chatgpt']; // Default fallback

            // Render Detail
            document.getElementById('detail-title').innerText = c.title;
            document.getElementById('detail-icon').innerText = c.icon;
            document.getElementById('detail-icon-bg').className = `w-16 h-16 rounded-2xl flex items-center justify-center shadow-lg border-2 border-white bg-${conf.color}-50 text-${conf.color}-600`;
            document.getElementById('detail-category-badge').innerText = conf.label;
            document.getElementById('detail-category-badge').className = `text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded-full bg-${conf.color}-100 text-${conf.color}-700 border border-${conf.color}-200`;
            document.getElementById('detail-problem').innerText = c.problem;
            
            // RENDER AI BADGE
            const badgeHTML = `
                <div class="${ai.bg} text-white px-3 py-1 rounded-full flex items-center gap-2 shadow-lg ring-1 ring-white/20">
                    <span class="material-symbols-outlined text-sm">${ai.icon}</span>
                    <span class="text-[10px] font-bold tracking-wide uppercase">Recomendada: ${ai.name}</span>
                </div>
            `;
            document.getElementById('ai-badge-container').innerHTML = badgeHTML;
            document.getElementById('ai-badge-mobile').innerHTML = badgeHTML;

            // Render Bad Prompt & Badges
            document.getElementById('detail-bad-prompt').innerText = `"${c.badPrompt}"`;
            document.getElementById('deficiency-badges').innerHTML = c.deficiencies.map(d => 
                `<span class="px-2 py-1 bg-red-50 text-red-600 text-[10px] font-bold rounded-md border border-red-100 flex items-center gap-1"><span class="material-symbols-outlined text-[10px]">warning</span>${d}</span>`
            ).join('');

            // Render Good Prompt
            document.getElementById('detail-prompt-rendered').innerHTML = renderAGIA(c.agiaPromptTagged);
            document.getElementById('preview-response').innerHTML = c.previewResponse;

            if(window.innerWidth < 768) toggleSidebar();
        }

        function setCategory(cat) {
            currentCategory = cat;
            searchQuery = '';
            document.getElementById('searchInput').value = '';
            renderCategories();
            renderCaseList();
        }

        function filterCases() {
            searchQuery = document.getElementById('searchInput').value;
            renderCaseList();
        }

        function copyPrompt() {
            const title = document.getElementById('detail-title').innerText;
            const c = allCases.find(x => x.title === title);
            if(!c) return;

            const rawText = cleanAGIA(c.agiaPromptTagged);
            navigator.clipboard.writeText(rawText);
            
            const btn = document.querySelector('button[onclick="copyPrompt()"]');
            const originalHTML = btn.innerHTML;
            
            btn.innerHTML = `<span class="material-symbols-outlined text-sm">check_circle</span> <span>¬°COPIADO!</span>`;
            btn.classList.remove('bg-indigo-600', 'text-white');
            btn.classList.add('bg-green-500', 'text-white', 'shadow-none');
            
            setTimeout(() => {
                btn.innerHTML = originalHTML;
                btn.classList.remove('bg-green-500', 'text-white', 'shadow-none');
                btn.classList.add('bg-indigo-600', 'text-white');
            }, 2000);
        }

        function openPaywall() {
            document.getElementById('paywall-modal').classList.remove('hidden');
        }
        function closePaywall() {
            document.getElementById('paywall-modal').classList.add('hidden');
        }

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('-translate-x-full');
        }

        init();
    </script>
</body>
</html>

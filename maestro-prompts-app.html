<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Maestro Prompts - Aula GenIA (v3.4 - TEST-1323)</title>
    <link href="css/styles.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <!-- Meta Pixel Code -->
    <script>
        !function (f, b, e, v, n, t, s) {
            if (f.fbq) return; n = f.fbq = function () {
                n.callMethod ?
                    n.callMethod.apply(n, arguments) : n.queue.push(arguments)
            };
            if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
            n.queue = []; t = b.createElement(e); t.async = !0;
            t.src = v; s = b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t, s)
        }(window, document, 'script',
            'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '1356922049450142');
        fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
            src="https://www.facebook.com/tr?id=1356922049450142&ev=PageView&noscript=1" /></noscript>
    <!-- End Meta Pixel Code -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0">
    <link
        href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --brand-teal: #14b8a6;
            --brand-teal-light: #ccfbf1;
            --brand-teal-dark: #0f766e;
            --brand-blue: #3b82f6;
            --brand-yellow: #f59e0b;
            --brand-gradient: linear-gradient(90deg, #2DD4BF 0%, #0D9488 100%);
            --text-primary: #0f172a;
            --text-secondary: #64748b;
            --primary: #0f766e;
            --bg-canvas: #f8fafc;
            --card-radius: 16px;
        }

        .gradient-btn {
            background: var(--brand-teal);
            transition: all .2s cubic-bezier(.4, 0, .2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 12px 0 rgba(20, 184, 166, 0.15);
        }

        .gradient-btn::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg, #115e59 0, #0f766e 100%);
            opacity: 0;
            transition: opacity .2s ease
        }

        .gradient-btn:hover::before {
            opacity: 1
        }

        .gradient-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 16px -4px rgba(20, 184, 166, 0.25);
        }

        .gradient-btn>* {
            position: relative;
            z-index: 1
        }

        .glassmorphism {
            background: rgba(255, 255, 255, .85);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(226, 232, 240, 0.8);
        }

        .card-hover-brand {
            transition: all 0.2s ease-out;
            border: 1px solid #e2e8f0;
        }

        .card-hover-brand:hover {
            transform: translateY(-2px);
            border-color: var(--brand-teal);
            box-shadow: 0 10px 30px -10px rgba(20, 184, 166, 0.15);
        }

        .gradient-text-brand {
            color: var(--brand-teal-dark);
            background: none;
            -webkit-text-fill-color: initial;
            font-weight: 800;
            letter-spacing: -0.02em;
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg-canvas);
            color: var(--text-primary);
            -webkit-font-smoothing: antialiased
        }

        .font-mono {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9em;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none
        }

        .no-scrollbar::-webkit-scrollbar {
            display: none
        }

        .custom-scroll::-webkit-scrollbar {
            width: 4px;
            height: 4px
        }

        .custom-scroll::-webkit-scrollbar-track {
            background: transparent
        }

        .custom-scroll::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px
        }

        .custom-scroll::-webkit-scrollbar-thumb:hover {
            background: #94a3b8
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(5px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        .fade-in {
            animation: fadeIn .4s cubic-bezier(.16, 1, .3, 1) forwards
        }

        /* --- REDESIGNED TAGS (The Fix) --- */
        /* All attributes now share a unified, cleaner aesthetic */

        .hl-tag {
            display: inline-flex;
            align-items: center;
            padding: 2px 10px;
            border-radius: 6px;
            margin: 0 4px;
            font-weight: 600;
            font-size: .85em;
            cursor: default;
            border: 1px solid transparent;
            transition: all .2s ease;
            line-height: 1.6;
            letter-spacing: 0.01em;
        }

        /* ROL: Neutral / Foundation (Slate) */
        .hl-rol {
            color: #334155;
            background: #f1f5f9;
            border-color: #e2e8f0;
        }

        /* CONTEXTO: Brand / Core (Teal) */
        .hl-contexto {
            color: #0f766e;
            background: #f0fdfa;
            border-color: #ccfbf1;
        }

        /* META: Goal / Target (Indigo - but muted) */
        .hl-meta {
            color: #4338ca;
            background: #eef2ff;
            border-color: #e0e7ff;
        }

        /* RESTRICCIONES: Warning / Guardrails (Rose - softer) */
        .hl-restricciones {
            color: #be123c;
            background: #fff1f2;
            border-color: #ffe4e6;
        }

        /* FORMATO: Output / Structure (Violet - softer) */
        .hl-formato {
            color: #6d28d9;
            background: #f5f3ff;
            border-color: #ede9fe;
        }

        .dimmed {
            opacity: .3;
            filter: grayscale(.5)
        }

        .highlighted {
            transform: scale(1.05);
            box-shadow: 0 2px 4px rgba(0, 0, 0, .1);
            z-index: 10;
            position: relative
        }

        .var-highlight {
            background-color: #f0fdfa;
            /* Teal-50 */
            border-bottom: 2px solid #0d9488;
            /* Teal-600 */
            color: #0f766e;
            /* Teal-700 */
            font-weight: 700;
            padding: 0 4px;
            border-radius: 4px
        }

        .var-highlight-bad {
            background-color: #f8fafc;
            border-bottom: 2px dotted #94a3b8;
            color: #64748b;
            font-weight: 500;
            /* Reduced weight */
            padding: 0 2px
        }

        .no-scrollbar::-webkit-scrollbar {
            display: none
        }

        .blur-prompt {
            filter: blur(8px);
            user-select: none;
            pointer-events: none;
            opacity: .5;
            transition: all .5s ease
        }

        .switch-toggle {
            transition: transform .3s cubic-bezier(.34, 1.56, .64, 1)
        }

        @keyframes subtle-bounce {

            0%,
            100% {
                transform: translateY(0)
            }

            50% {
                transform: translateY(3px)
            }
        }

        .motivate-click {
            animation: subtle-bounce 2s infinite
        }

        @keyframes pulse-ring {
            0% {
                box-shadow: 0 0 0 0 rgba(79, 70, 229, .4)
            }

            70% {
                box-shadow: 0 0 0 6px rgba(79, 70, 229, 0)
            }

            100% {
                box-shadow: 0 0 0 0 rgba(79, 70, 229, 0)
            }
        }

        .pulse-attention {
            animation: pulse-ring 2s infinite
        }

        .search-container:focus-within {
            box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.15);
            border-color: var(--brand-teal);
        }

        @keyframes slide-in-right {
            from {
                transform: translateX(400px);
                opacity: 0
            }

            to {
                transform: translateX(0);
                opacity: 1
            }
        }

        @keyframes slide-out-right {
            from {
                transform: translateX(0);
                opacity: 1
            }

            to {
                transform: translateX(400px);
                opacity: 0
            }
        }

        .animate-slide-in-right {
            animation: slide-in-right .4s cubic-bezier(.68, -.55, .265, 1.55)
        }

        [title]:hover::after,
        [title]:hover::before {
            transition-delay: 0s !important
        }

        @keyframes smoke-rise {
            0% {
                opacity: 0;
                transform: translateY(10px) scale(.95);
                filter: blur(2px)
            }

            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
                filter: blur(0px)
            }
        }

        .smoke-effect {
            animation: smoke-rise .4s ease-out forwards
        }

        #category-nav>* {
            position: relative;
            padding-right: 8px !important
        }

        #category-nav>*>span:last-child {
            position: absolute;
            top: -4px;
            right: -4px;
            background: #f0fdfa;
            color: #0d9488;
            font-size: 9px;
            font-weight: 800;
            min-width: 16px;
            height: 16px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 4px;
            box-shadow: 0 1px 2px rgba(13, 148, 136, .1);
            border: 1px solid #ccfbf1
        }

        .category-item.active {
            background: #f0fdfa !important;
            color: #0f766e !important;
            border-color: #5eead4 !important;
            box-shadow: 0 0 0 1px #ccfbf1 !important;
        }

        .category-item.active .badge {
            background: #0f766e !important;
            color: #fff !important
        }

        .markdown-content {
            line-height: 1.7;
            color: #334155
        }

        .markdown-content strong {
            font-weight: 700;
            color: #0f172a
        }

        .markdown-content em {
            font-style: italic;
            color: #475569
        }

        .markdown-content code {
            font-family: 'JetBrains Mono', 'Courier New', monospace;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 2px 6px;
            font-size: .85em;
            color: #be123c;
            font-weight: 500;
        }

        .markdown-content pre {
            background: #0f172a;
            color: #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            overflow-x: auto;
            margin: 16px 0;
            border: 1px solid #1e293b;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .markdown-content pre code {
            background: 0 0;
            border: none;
            padding: 0;
            color: #e2e8f0;
            font-size: .85rem;
            font-weight: 400;
        }

        .markdown-content table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 20px 0;
            font-size: .9em;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            overflow: hidden
        }

        .markdown-content table thead {
            background: #f8fafc;
            color: #0f172a
        }

        .markdown-content table th {
            padding: 12px 16px;
            text-align: left;
            font-weight: 600;
            text-transform: uppercase;
            font-size: .75em;
            letter-spacing: .05em;
            border-bottom: 1px solid #e2e8f0;
            color: #64748b;
        }

        .markdown-content table td {
            padding: 12px 16px;
            border-bottom: 1px solid #e2e8f0;
            background: #fff;
            color: #334155;
        }

        .markdown-content table tbody tr:last-child td {
            border-bottom: none
        }

        .markdown-content ol,
        .markdown-content ul {
            margin: 12px 0;
            padding-left: 24px
        }

        .markdown-content ul {
            list-style-type: disc;
            color: #64748b;
        }

        .markdown-content ol {
            list-style-type: decimal;
            color: #64748b;
        }

        .markdown-content li {
            margin: 6px 0;
            line-height: 1.6
        }

        .markdown-content p {
            margin: 12px 0
        }

        .markdown-content blockquote {
            border-left: 3px solid #14b8a6;
            padding: 12px 20px;
            margin: 20px 0;
            background: #f0fdfa;
            border-radius: 4px;
            color: #0f766e;
            font-style: italic
        }
    </style>
</head>

<body class="h-screen flex flex-col overflow-hidden text-slate-800 bg-slate-50">
    <div id="system-status-overlay"
        class="fixed inset-0 z-[100] flex flex-col items-center justify-center p-6 text-center transition-opacity duration-500"
        style="background: #0B101B;">

        <!-- Interactive Blueprint Grid Background -->
        <div id="blueprint-grid" class="absolute inset-0 opacity-[0.02] transition-transform duration-100"
            style="background-image: linear-gradient(rgba(20, 184, 166, 1) 1px, transparent 1px), linear-gradient(90deg, rgba(20, 184, 166, 1) 1px, transparent 1px); background-size: 40px 40px;">
        </div>

        <!-- Glow effect -->
        <div
            class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-teal-500/15 rounded-full blur-3xl animate-pulse">
        </div>

        <div
            class="relative bg-slate-900/90 backdrop-blur-xl p-8 rounded-[2rem] shadow-2xl border border-teal-500/30 max-w-md w-full animate-in zoom-in duration-300">

            <!-- Wireframe 3D Cube with Glowing Edges -->
            <div id="status-icon" class="w-24 h-24 mx-auto mb-6 relative" style="perspective: 800px;">
                <div class="cube-wireframe"
                    style="transform-style: preserve-3d; animation: cubeRotate 6s linear infinite; width: 70px; height: 70px; position: relative; margin: 0 auto;">
                    <!-- Cube faces with wireframe effect -->
                    <div class="cube-face front"
                        style="position: absolute; width: 70px; height: 70px; border: 2px solid; border-image: linear-gradient(135deg, #00FF9D, #14b8a6) 1; transform: translateZ(35px); background: rgba(20,184,166,0.05); box-shadow: inset 0 0 20px rgba(0,255,157,0.1); animation: edgeGlow 2s ease-in-out infinite;">
                        <span
                            class="material-symbols-rounded text-teal-400 text-3xl absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">hub</span>
                    </div>
                    <div class="cube-face back"
                        style="position: absolute; width: 70px; height: 70px; border: 2px solid; border-image: linear-gradient(135deg, #14b8a6, #00D1FF) 1; transform: translateZ(-35px) rotateY(180deg); background: rgba(20,184,166,0.03); animation: edgeGlow 2s ease-in-out infinite 0.3s;">
                    </div>
                    <div class="cube-face left"
                        style="position: absolute; width: 70px; height: 70px; border: 2px solid; border-image: linear-gradient(135deg, #00D1FF, #14b8a6) 1; transform: rotateY(-90deg) translateZ(35px); background: rgba(20,184,166,0.03); animation: edgeGlow 2s ease-in-out infinite 0.6s;">
                    </div>
                    <div class="cube-face right"
                        style="position: absolute; width: 70px; height: 70px; border: 2px solid; border-image: linear-gradient(135deg, #14b8a6, #00FF9D) 1; transform: rotateY(90deg) translateZ(35px); background: rgba(20,184,166,0.03); animation: edgeGlow 2s ease-in-out infinite 0.9s;">
                    </div>
                    <div class="cube-face top"
                        style="position: absolute; width: 70px; height: 70px; border: 2px solid; border-image: linear-gradient(135deg, #00FF9D, #00D1FF) 1; transform: rotateX(90deg) translateZ(35px); background: rgba(20,184,166,0.03); animation: edgeGlow 2s ease-in-out infinite 1.2s;">
                    </div>
                    <div class="cube-face bottom"
                        style="position: absolute; width: 70px; height: 70px; border: 2px solid; border-image: linear-gradient(135deg, #00D1FF, #00FF9D) 1; transform: rotateX(-90deg) translateZ(35px); background: rgba(20,184,166,0.03); animation: edgeGlow 2s ease-in-out infinite 1.5s;">
                    </div>
                </div>
            </div>

            <style>
                @keyframes cubeRotate {
                    0% {
                        transform: rotateX(-15deg) rotateY(0deg);
                    }

                    100% {
                        transform: rotateX(-15deg) rotateY(360deg);
                    }
                }

                @keyframes edgeGlow {

                    0%,
                    100% {
                        box-shadow: 0 0 5px rgba(0, 255, 157, 0.3), inset 0 0 10px rgba(0, 255, 157, 0.1);
                    }

                    50% {
                        box-shadow: 0 0 20px rgba(0, 255, 157, 0.8), inset 0 0 25px rgba(0, 255, 157, 0.3);
                    }
                }
            </style>

            <h2 id="status-title" class="text-xl font-extrabold text-white mb-2">Accediendo a la Biblioteca de
                Instrucciones Maestras
            </h2>
            <p id="status-desc" class="text-sm text-white mb-6 font-medium" style="color: #ffffff !important;">Probadas
                por nuestra comunidad y validadas por
                nuestros expertos.</p>

            <!-- Terminal Console with Sequential Text -->
            <div class="bg-slate-950/80 p-4 rounded-xl text-left font-mono text-xs overflow-hidden border border-slate-700/50 space-y-2"
                id="status-console">
                <!-- Line 1: 0.0s -->
                <p class="terminal-line opacity-0" style="animation: terminalType 0.5s ease forwards 0s;">
                    <span class="text-white">&gt;</span> <span class="text-white">System:</span> <span
                        style="color: #00FF9D; font-weight: 600;">Secure Vault Connected</span>
                </p>
                <!-- Line 2: 0.8s -->
                <p class="terminal-line opacity-0" style="animation: terminalType 0.5s ease forwards 0.8s;">
                    <span class="text-white">&gt;</span> <span class="text-white">Protocol:</span> <span
                        style="color: #00D1FF; font-weight: 600;">AGIA Framework 5.2 Loaded</span>
                </p>
                <!-- Line 3: 1.5s with typing cursor -->
                <p class="terminal-line opacity-0" style="animation: terminalType 0.5s ease forwards 1.5s;">
                    <span class="text-white">&gt;</span> <span class="text-white">Action:</span> <span
                        class="text-white/90">Fetching
                        100 Mastery Prompts<span class="cursor">|</span></span>
                </p>
                <!-- Line 4: 2.5s bright yellow -->
                <p class="terminal-line opacity-0" style="animation: terminalType 0.5s ease forwards 2.5s;">
                    <span class="text-white">&gt;</span> <span class="text-white">Status:</span> <span id="status-code"
                        style="color: #FFD700; font-weight: 700; text-shadow: 0 0 10px rgba(255,215,0,0.5);">Ready to
                        recover your 10 hours.</span>
                </p>
            </div>

            <style>
                @keyframes terminalType {
                    0% {
                        opacity: 0;
                        transform: translateX(-5px);
                    }

                    100% {
                        opacity: 1;
                        transform: translateX(0);
                    }
                }

                @keyframes cursorBlink {

                    0%,
                    50% {
                        opacity: 1;
                    }

                    51%,
                    100% {
                        opacity: 0;
                    }
                }

                .cursor {
                    animation: cursorBlink 0.8s infinite;
                    color: #00D1FF;
                }

                @keyframes flicker {

                    0%,
                    80% {
                        opacity: 0.7;
                    }

                    82%,
                    84%,
                    86%,
                    88% {
                        opacity: 1;
                        text-shadow: 0 0 15px rgba(45, 212, 191, 0.9);
                    }

                    83%,
                    85%,
                    87% {
                        opacity: 0.5;
                    }

                    90%,
                    100% {
                        opacity: 1;
                        text-shadow: 0 0 20px rgba(45, 212, 191, 1);
                    }
                }

                .flicker-text {
                    animation: flicker 3s ease-in-out forwards 2.5s;
                }
            </style>

            <button id="retry-btn" onclick="window.location.reload()"
                class="hidden w-full mt-4 py-3 bg-gradient-to-r from-teal-500 to-teal-600 text-white rounded-xl font-bold text-sm shadow-lg shadow-teal-500/30 hover:shadow-teal-500/50 transition-all">Reintentar</button>

            <!-- Pertenencia Badge with Flicker -->
            <p class="mt-6 text-xs text-white italic flicker-text text-center px-4 font-medium tracking-wide">Bienvenido
                al 1.5% de los
                profesionales que
                dominan la nueva frontera.</p>
        </div>

        <!-- Blueprint Grid Mouse Interaction Script -->
        <script>
            (function () {
                const grid = document.getElementById('blueprint-grid');
                const overlay = document.getElementById('system-status-overlay');
                if (grid && overlay) {
                    overlay.addEventListener('mousemove', function (e) {
                        const rect = overlay.getBoundingClientRect();
                        const x = (e.clientX - rect.left - rect.width / 2) / 50;
                        const y = (e.clientY - rect.top - rect.height / 2) / 50;
                        grid.style.transform = `translate(${x}px, ${y}px)`;
                    });
                }
            })();
        </script>
    </div>
    <header
        class="bg-white/80 backdrop-blur-md border-b border-gray-100 z-30 flex-none h-12 md:h-14 shadow-sm relative z-[60]">
        <div class="h-full pl-2 pr-2 md:pl-4 md:pr-4 flex items-center gap-1 md:gap-4"><button id="mobile-menu-toggle"
                class="lg:hidden p-2 ml-2 text-slate-500 hover:bg-slate-100 rounded-lg transition-colors"><span
                    class="material-symbols-rounded text-xl">menu</span></button>
            <div class="min-w-max flex items-center gap-2"><img src="https://aulagenia.cl/Logo_AGIA_big.webp"
                    alt="AulaGenIA" class="h-7 md:h-10 w-auto">
                <div class="hidden xs:block">
                    <h1 class="text-xs md:text-sm font-bold text-slate-900 leading-none tracking-tight">AGIA Generator
                        <span class="text-indigo-600">3.0</span>
                    </h1>
                    <p class="text-[10px] text-slate-500 font-medium tracking-wider uppercase mt-0.5">Powered by
                        AulaGenIA</p>
                </div>
            </div>
            <div
                class="hidden lg:flex flex-1 mx-4 min-w-0 items-center gap-3 bg-gradient-to-r from-indigo-50 via-blue-50 to-teal-50 rounded-lg px-4 py-2 border border-indigo-100 shadow-sm relative overflow-hidden">
                <div
                    class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5">
                </div>
                <div class="flex items-center gap-2 shrink-0 relative z-10"><span
                        class="bg-yellow-400 text-yellow-900 text-[9px] font-black px-1.5 py-0.5 rounded uppercase tracking-wider shadow-sm animate-pulse">Pro</span>
                    <h4 class="text-slate-900 font-bold text-xs truncate">Pide lo que necesitas</h4>
                </div>
                <p class="text-[10px] text-slate-600 font-medium truncate flex-1 relative z-10">¿Quieres dominar la
                    ingeniería de prompts y crear herramientas a medida?</p><a href="landing-nuevo.html"
                    class="gradient-btn shrink-0 text-white text-[10px] uppercase font-bold px-3 py-1.5 rounded-lg whitespace-nowrap flex items-center gap-1 relative z-10"><span>Ver
                        Método</span> <span class="material-symbols-rounded text-sm">arrow_forward</span></a>
            </div>
            <div class="flex gap-1 md:gap-2 items-center ml-auto">

                <!-- Founder Trust Badge -->

                <div class="hidden md:flex items-center gap-2 mr-2 group relative cursor-help">
                    <div class="relative">
                        <img src="Bernardita.webp" alt="Bernardita Mery"
                            class="w-9 h-9 rounded-full border-2 border-white shadow-sm object-cover grayscale group-hover:grayscale-0 transition-all duration-300">
                        <div
                            class="absolute -bottom-1 -right-1 bg-teal-500 text-white text-[7px] font-bold px-1.5 py-0.5 rounded shadow-sm border border-white">
                            CEO</div>
                    </div>
                    <div class="flex flex-col">
                        <span
                            class="text-[10px] font-bold text-slate-700 leading-tight group-hover:text-indigo-700 transition-colors">Bernardita
                            Mery</span>
                        <span class="text-[9px] text-slate-400 leading-tight">Fundadora Aula GenIA</span>
                    </div>
                    <!-- Hover Tooltip -->
                    <div
                        class="absolute top-full right-1/2 translate-x-1/2 mt-3 w-48 p-3 bg-white border border-slate-100/50 rounded-xl shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-[100] text-center transform origin-top hover:scale-105">
                        <div
                            class="absolute -top-1.5 right-1/2 translate-x-1/2 w-3 h-3 bg-white rotate-45 border-t border-l border-slate-100/50">
                        </div>
                        <p class="text-[10px] text-slate-600 leading-relaxed font-medium italic relative z-10">"Diseñé
                            este sistema para que recuperes 10 horas de tu semana. Disfrútalo."</p>
                    </div>
                </div>

                <div class="h-8 w-px bg-slate-200 mx-2 hidden xl:block"></div>

                <button onclick="generateFullPDF()"
                    class="group flex items-center gap-2 bg-gradient-to-r from-indigo-600 to-indigo-500 hover:from-indigo-700 hover:to-indigo-600 text-white px-4 py-2 rounded-xl shadow-lg shadow-indigo-200 hover:shadow-indigo-300 transition-all hover:-translate-y-0.5"
                    title="Descargar 100 Prompts Maestros (PDF)"><span
                        class="material-symbols-rounded text-lg group-hover:scale-110 transition-transform">download</span>
                    <span class="hidden sm:inline font-bold text-xs tracking-wide">Descargar PDF</span></button> <button
                    id="unlock-btn" onclick="window.location.href='landing-nuevo.html?action=buy'"
                    class="bg-slate-900 hover:bg-slate-800 text-white px-2 py-1.5 md:px-3 rounded-lg text-xs font-bold shadow-md flex items-center gap-1.5 transition-transform hover:-translate-y-0.5"><span
                        class="material-symbols-rounded text-sm text-teal-400">rocket_launch</span> <span
                        class="hidden sm:inline">Acceso Premium</span></button>
                <div id="user-profile" class="hidden items-center gap-3 ml-2"><span id="user-display-name"
                        class="hidden md:block text-sm font-semibold text-slate-700 truncate max-w-[12ch]"></span>
                    <button id="user-avatar-btn" class="relative"><img id="user-avatar"
                            class="w-8 h-8 md:w-9 md:h-9 rounded-full border-2 border-indigo-500 cursor-pointer hover:opacity-90 transition-opacity"
                            alt="Avatar"></button> <button id="logout-btn"
                        class="hidden md:block text-xs text-slate-500 hover:text-rose-600 transition-colors font-medium">Cerrar
                        sesión</button>
                </div>
            </div>
        </div>
    </header>
    <div class="bg-white border-b border-slate-200 shadow-sm flex-none z-40 relative group">
        <div class="w-full h-12 flex items-center relative"><button id="btn-scroll-left"
                onclick="window.scrollCategories(-200)" onmouseenter="window.startAutoScroll(-15)"
                onmouseleave="window.stopAutoScroll()"
                class="hidden lg:hidden absolute left-2 top-1/2 -translate-y-1/2 z-50 w-8 h-8 flex items-center justify-center bg-white/90 backdrop-blur-sm border border-slate-200 text-indigo-600 hover:text-indigo-800 hover:scale-110 rounded-full shadow-md transition-all"><span
                    class="material-symbols-rounded text-xl font-bold">chevron_left</span></button>
            <div class="overflow-x-auto no-scrollbar flex items-center space-x-2 scroll-smooth w-full px-4 h-full"
                id="category-nav"></div><button id="btn-scroll-right" onclick="window.scrollCategories(200)"
                onmouseenter="window.startAutoScroll(15)" onmouseleave="window.stopAutoScroll()"
                style="display:flex!important"
                class="hidden lg:flex absolute right-2 top-1/2 -translate-y-1/2 z-50 flex-none w-8 h-8 items-center justify-center bg-white/90 backdrop-blur-sm border border-slate-200 text-indigo-600 hover:text-indigo-800 hover:scale-110 rounded-full shadow-md transition-all"><span
                    class="material-symbols-rounded text-xl font-bold">chevron_right</span></button>
        </div>
    </div>
    <div class="flex flex-1 overflow-hidden w-full relative bg-slate-50">
        <aside
            class="fixed inset-0 z-50 flex flex-col bg-white md:relative md:inset-auto md:w-72 lg:w-80 border-r border-slate-200 transform -translate-x-full md:translate-x-0 transition-transform duration-300 shadow-2xl md:shadow-none"
            id="sidebar">
            <div class="md:hidden flex items-center justify-between p-4 border-b border-slate-100 bg-white"><span
                    class="font-bold text-slate-800">Menú de Casos</span> <button id="close-sidebar-btn"
                    class="p-2 text-slate-500 hover:text-slate-700 bg-slate-50 rounded-lg"><span
                        class="material-symbols-rounded">close</span></button></div>
            <div class="px-5 pt-5 pb-3 border-b border-slate-100">
                <div class="relative group">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><span
                            class="material-symbols-rounded text-indigo-500 text-xl">search</span></div><input
                        type="text" id="searchInput"
                        class="w-full pl-10 pr-4 py-3 bg-white border-2 border-slate-100 rounded-xl text-sm font-medium focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 outline-none transition-all placeholder:text-slate-400 text-slate-700 shadow-sm search-container"
                        placeholder="Buscar..." onkeyup="filterCases()">
                </div>
                <div id="search-stats" class="hidden mt-2 px-1 flex justify-between items-center animate-pulse"><span
                        class="text-[10px] uppercase font-bold text-indigo-500 tracking-wider">Buscando...</span> <span
                        class="text-[10px] font-bold text-slate-400" id="results-count"></span></div>
            </div>
            <div class="flex-1 overflow-y-auto custom-scroll p-3 space-y-1" id="case-list"></div>
            <div
                class="p-3 border-t border-slate-100 bg-slate-50/50 text-[10px] text-slate-400 flex justify-between px-4 font-medium">
                <span>Estado: Online</span> <span>Casos: <span id="total-display"
                        class="text-slate-700 font-bold">0</span></span>
            </div>
        </aside>
        <main class="flex-1 flex flex-col overflow-hidden relative w-full h-full bg-slate-100/50">
            <div id="workspace-empty" class="hidden flex-col items-center justify-center h-full text-center p-4 md:p-8">
                <div
                    class="w-24 h-24 bg-white rounded-full flex items-center justify-center mb-4 shadow-xl text-indigo-200">
                    <span class="material-symbols-rounded text-5xl">compare_arrows</span>
                </div>
                <h3 class="text-base md:text-lg font-bold text-slate-800">Selecciona un caso</h3>
                <p class="text-xs text-slate-500 text-center px-4">Comienza tu comparativa en el menú lateral.</p>
            </div>
            <div id="case-detail"
                class="flex flex-col h-full w-full p-2 md:p-3 gap-2 overflow-hidden max-w-5xl mx-auto">
                <div
                    class="flex-none flex flex-col md:flex-row md:items-center justify-between gap-2 md:gap-3 bg-white rounded-lg md:rounded-xl px-3 py-2 md:px-4 md:py-2 border border-slate-200 shadow-sm">
                    <div class="flex items-center gap-3 min-w-0 flex-1"><span id="detail-category-badge"
                            class="flex-none text-[9px] font-bold uppercase tracking-wider px-2 py-0.5 rounded border bg-indigo-50 text-indigo-600 border-indigo-100">CAT</span>
                        <div class="min-w-0">
                            <h2 id="detail-title"
                                class="text-sm md:text-base lg:text-lg font-bold text-slate-900 truncate">Título del
                                Caso</h2>
                            <p id="detail-problem" class="text-[11px] text-slate-500 hidden md:block leading-snug"></p>
                        </div>
                    </div>
                    <div
                        class="flex items-center justify-between md:justify-end gap-2 flex-none w-full md:w-auto border-t md:border-t-0 border-slate-100 pt-2 md:pt-0 mt-1 md:mt-0">
                        <div class="relative bg-slate-100 rounded-lg p-0.5 flex items-center"><button
                                onclick='setMode("basic")'
                                class="relative z-10 px-2 md:px-3 py-1.5 text-[10px] font-bold transition-colors duration-200 rounded-md text-slate-600"
                                id="btn-basic">Básico</button>
                            <div class="relative group"><button onclick='setMode("agia")'
                                    class="relative z-10 px-2 md:px-3 py-1.5 text-[10px] font-bold transition-all duration-300 rounded-md flex items-center gap-1 bg-indigo-600 text-white cursor-pointer hover:scale-105 hover:shadow-lg hover:shadow-indigo-500/30 hover:ring-2 hover:ring-indigo-200 active:scale-95"
                                    id="btn-agia"><span class="material-symbols-rounded text-xs">verified</span>
                                    <span>Maestro</span> <span id="maestro-cta-badge"
                                        class="hidden absolute -top-2 -right-2 bg-teal-500 text-white text-[8px] font-black px-1.5 py-0.5 rounded-full shadow-lg animate-bounce">!</span></button>
                            </div>
                        </div>
                        <div class="flex items-center gap-2"><span id="benefit-badge"
                                class="hidden xs:flex text-[9px] font-bold px-2 py-1 rounded-md border items-center gap-1 bg-teal-50 text-teal-600 border-teal-100"><span
                                    class="material-symbols-rounded text-xs">bolt</span> ~15m</span>
                            <div class="relative hidden" id="copy-btn-container"><button
                                    onclick="copyPromptWithFeedback(this)" id="copy-btn"
                                    class="text-[10px] font-bold px-3 py-1.5 rounded-lg bg-slate-300 text-slate-500 flex items-center gap-1.5 transition-all cursor-not-allowed opacity-60"
                                    disabled="disabled"><span
                                        class="material-symbols-rounded text-sm copy-icon">content_copy</span> <span
                                        class="copy-text hidden sm:inline">Copiar</span></button></div>
                        </div>
                    </div>
                </div>
                <div class="flex-1 bg-white rounded-xl border border-slate-200 shadow-lg flex flex-col overflow-hidden"
                    id="main-card-container">
                    <div id="detail-scroll-container" class="flex-1 overflow-y-auto custom-scroll relative bg-white">
                        <div id="content-basic" class="p-3 md:p-6 lg:p-8 space-y-4 md:space-y-6 fade-in">
                            <div
                                class="bg-slate-50 border border-slate-200 rounded-lg md:rounded-xl p-4 md:p-6 relative overflow-hidden">
                                <div
                                    class="absolute top-0 right-0 bg-rose-100 text-rose-700 text-[10px] font-bold px-3 py-1 rounded-bl-xl uppercase tracking-wider border-l border-b border-rose-200 z-10">
                                    ❌ Prompt Deficiente</div>
                                <div id="bad-prompt-rendered"
                                    class="font-mono text-sm text-slate-600 italic leading-relaxed"></div>
                            </div>
                            <div class="border-l-4 border-amber-300 bg-amber-50/50 p-3 md:p-4 rounded-r-lg relative">
                                <div class="absolute top-2 right-2 text-[9px] text-amber-400 font-mono">v3.0 (Updated)
                                </div><label
                                    class="text-[10px] font-bold text-amber-600 uppercase mb-2 block tracking-wider flex items-center gap-1"><span
                                        class="material-symbols-rounded text-sm">chat</span> Muestra de respuesta
                                    Típica</label>
                                <div id="bad-result-preview" class="text-sm text-slate-600 leading-relaxed italic">
                                </div>
                            </div>
                            <div class="border-l-4 border-rose-300 bg-rose-50/50 p-3 md:p-4 rounded-r-lg"><label
                                    class="text-[10px] font-bold text-rose-500 uppercase mb-2 block tracking-wider flex items-center gap-1"><span
                                        class="material-symbols-rounded text-sm">bug_report</span> ¿Por qué falla este
                                    prompt?</label>
                                <div id="bad-response-analysis" class="text-sm text-slate-600 leading-relaxed"></div>
                            </div>
                        </div>
                        <div id="content-agia" class="hidden p-0 fade-in flex flex-col h-full">
                            <div
                                class="relative bg-white rounded-lg md:rounded-xl p-3 md:p-4 lg:p-5 border border-slate-100 flex-none w-full shadow-[0_4px_20px_-4px_rgba(0,0,0,0.06)] ring-1 ring-slate-400/5 overflow-hidden">
                                <div
                                    class="hidden absolute top-0 right-0 bg-rose-100 text-rose-700 text-[10px] font-bold px-3 py-1 rounded-bl-xl uppercase tracking-wider border-l border-b border-rose-200 z-10">
                                    ❌ Prompt Deficiente</div>
                                <div id="prompt-blur-wrapper" class="transition-all duration-500 relative">
                                    <!-- Prompt Maestro Header with Inline Metadata Pills -->
                                    <div class="flex items-center justify-between border-b border-slate-100 pb-3 mb-4">
                                        <div class="flex items-center gap-3">
                                            <label
                                                class="text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2 flex-none">
                                                <span
                                                    class="material-symbols-rounded text-sm text-indigo-500">auto_awesome</span>
                                                Prompt Maestro
                                            </label>

                                            <div id="maestro-social-proof"
                                                class="hidden items-center gap-1.5 bg-orange-50 border border-orange-100 rounded-full px-2.5 py-0.5">
                                                <span
                                                    class="material-symbols-rounded text-[10px] text-orange-500 animate-pulse">local_fire_department</span>
                                                <span class="text-[9px] font-bold text-orange-600">
                                                    <span id="maestro-counter">0</span> visitas
                                                </span>
                                            </div>
                                        </div>

                                        <div class="flex items-center gap-2">
                                            <div id="ai-suggestion-badge"
                                                class="hidden items-center gap-1.5 bg-blue-50 border border-blue-100 rounded-full px-2.5 py-0.5"
                                                title="Modelo de IA recomendado">
                                                <span
                                                    class="material-symbols-rounded text-[14px] text-blue-500">psychology</span>
                                                <div class="flex items-center gap-1">
                                                    <span
                                                        class="hidden sm:inline text-[9px] font-bold text-blue-400 uppercase tracking-wide">Modelo:</span>
                                                    <span id="ai-name"
                                                        class="text-[9px] font-black text-blue-700 uppercase"></span>
                                                </div>
                                            </div>

                                            <div id="tip-container"
                                                class="hidden items-center gap-1.5 bg-amber-50 hover:bg-amber-100 border border-amber-200/60 rounded-full px-2.5 py-0.5 cursor-help transition-all relative group">
                                                <span
                                                    class="material-symbols-rounded text-[14px] text-amber-500">lightbulb</span>
                                                <span
                                                    class="text-[9px] font-black text-amber-600 uppercase tracking-wide">Estrategia</span>
                                                <!-- Hover Tooltip -->
                                                <div
                                                    class="absolute top-full right-0 mt-2 w-64 p-3 bg-white border border-slate-200 rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 text-left pointer-events-none group-hover:pointer-events-auto">
                                                    <div
                                                        class="text-[10px] uppercase font-bold text-amber-500 mb-1 flex items-center gap-1">
                                                        <span class="material-symbols-rounded text-sm">lightbulb</span>
                                                        Estrategia
                                                    </div>
                                                    <p id="detail-example-tip"
                                                        class="text-xs text-slate-600 leading-relaxed font-normal normal-case">
                                                    </p>
                                                </div>
                                            </div>

                                            <div id="validation-container"
                                                class="hidden items-center gap-1.5 bg-teal-50 hover:bg-teal-100 border border-teal-200/60 rounded-full px-2.5 py-0.5 cursor-help transition-all relative group">
                                                <span
                                                    class="material-symbols-rounded text-[14px] text-teal-500">fact_check</span>
                                                <span
                                                    class="text-[9px] font-black text-teal-600 uppercase tracking-wide">Validación</span>
                                                <!-- Hover Tooltip -->
                                                <div
                                                    class="absolute top-full right-0 mt-2 w-64 p-3 bg-white border border-slate-200 rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 text-left pointer-events-none group-hover:pointer-events-auto">
                                                    <div
                                                        class="text-[10px] uppercase font-bold text-teal-500 mb-1 flex items-center gap-1">
                                                        <span class="material-symbols-rounded text-sm">fact_check</span>
                                                        Validación
                                                    </div>
                                                    <p id="detail-validation-tip"
                                                        class="text-xs text-slate-600 leading-relaxed font-normal normal-case">
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div id="agia-legend-inline" class="hidden"></div>
                                    <div id="agia-sections-container" class="text-[14px] text-slate-800"></div>
                                    <div id="detail-prompt-rendered" class="hidden"></div>
                                </div>
                                <!-- Premium Locked State -->
                                <div id="locked-teaser"
                                    class="hidden flex flex-col items-center justify-center text-center py-12 px-6 w-full max-w-lg bg-white rounded-2xl shadow-2xl border border-indigo-100 ring-4 ring-indigo-50/50 absolute top-[75px] left-1/2 transform -translate-x-1/2 z-50 overflow-hidden group">
                                    <div
                                        class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10">
                                    </div>
                                    <div
                                        class="absolute inset-0 bg-gradient-to-b from-transparent via-white/50 to-white pointer-events-none">
                                    </div>

                                    <div
                                        class="w-20 h-20 bg-gradient-to-br from-indigo-500 to-violet-600 rounded-3xl flex items-center justify-center mb-6 shadow-lg shadow-indigo-500/30 group-hover:scale-110 group-hover:rotate-3 transition-all duration-500 relative z-10">
                                        <span class="material-symbols-rounded text-4xl text-white">lock</span>
                                        <div
                                            class="absolute -top-2 -right-2 bg-yellow-400 text-yellow-900 text-[10px] font-black px-2 py-0.5 rounded-full shadow-sm animate-pulse">
                                            PRO</div>
                                    </div>

                                    <h3 class="text-2xl font-black text-slate-800 mb-3 relative z-10">Recurso Exclusivo
                                        de Aula Genia</h3>
                                    <p id="teaser-message"
                                        class="text-sm text-slate-500 mb-8 leading-relaxed max-w-sm mx-auto relative z-10">
                                        Accede a la biblioteca completa de Instrucciones Maestras probadas por nuestra
                                        comunidad y
                                        validadas por nuestros expertos. Nuestra metodología estructurada para optimizar
                                        tu tiempo con
                                        IA.
                                    </p>

                                    <button id="teaser-action-btn"
                                        class="relative z-10 bg-gradient-to-r from-slate-900 to-slate-800 hover:from-slate-800 hover:to-slate-700 text-white px-8 py-4 rounded-xl font-bold text-sm shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 w-full sm:w-auto flex items-center justify-center gap-2 group-hover:ring-4 group-hover:ring-slate-900/10">
                                        <span
                                            class="material-symbols-rounded text-lg text-teal-400 group-hover:animate-pulse">rocket_launch</span>
                                        <span id="teaser-action-text">Obtener acceso exclusivo</span>
                                        <span
                                            class="material-symbols-rounded text-lg opacity-70 group-hover:translate-x-1 transition-transform">arrow_forward</span>
                                    </button>

                                    <p class="mt-4 text-[10px] text-slate-400 font-medium relative z-10">¿Ya tienes
                                        cuenta? Tu sesión se detectará automáticamente.</p>
                                </div>
                            </div>
                            <div class="mt-4 relative bg-slate-50 rounded-xl p-5 border border-slate-200">
                                <div
                                    class="absolute -top-3 left-4 bg-white text-indigo-600 text-[10px] font-black uppercase tracking-widest px-3 py-1 rounded-full border border-indigo-100 shadow-sm flex items-center gap-1 z-10">
                                    <span class="material-symbols-rounded text-sm">auto_awesome</span> Muestra de
                                    respuesta Optimizada
                                </div>
                                <div id="good-result-preview"
                                    class="text-sm text-slate-700 leading-relaxed font-medium mt-2"></div>
                                <div id="result-teaser-label"
                                    class="hidden absolute top-3 right-3 bg-indigo-50 text-indigo-700 text-[9px] font-bold px-2 py-0.5 rounded border border-indigo-100 flex items-center gap-1">
                                    <span class="material-symbols-rounded text-[10px] filled">visibility</span> PREVIEW
                                </div>
                            </div>
                        </div>
                        <div class="h-12"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <div id="toast" class="fixed bottom-10 right-10 z-[70] transform translate-x-full transition-all duration-500">
    </div>
    <div id="sales-toast"
        class="fixed bottom-24 right-6 z-[50] pointer-events-none md:pointer-events-auto transition-all duration-500 translate-y-24 opacity-0">
    </div>
    <div id="tutorial-modal" class="hidden fixed inset-0 z-[90] flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-slate-900/80 backdrop-blur-sm transition-opacity" onclick="closeTutorial()">
        </div>
        <div
            class="relative bg-white rounded-2xl shadow-2xl max-w-4xl w-full overflow-hidden animate-in zoom-in duration-200">
            <div class="p-6 border-b border-slate-100 flex justify-between items-center">
                <h3 class="font-bold text-lg text-indigo-900">Protocolo de Aprendizaje: Las 3 C</h3><button
                    onclick="closeTutorial()" class="text-slate-400 hover:text-slate-600"><span
                        class="material-symbols-rounded">close</span></button>
            </div>
            <div class="p-6 overflow-y-auto max-h-[75vh]">
                <div
                    class="w-full max-w-[320px] mx-auto aspect-video bg-slate-100 rounded-xl mb-8 flex items-center justify-center text-slate-300 relative group cursor-pointer overflow-hidden shadow-inner border border-slate-200">
                    <div
                        class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1611162617474-5b21e879e113?q=80&w=1000&auto=format&fit=crop')] bg-cover bg-center opacity-50">
                    </div><span
                        class="material-symbols-rounded text-5xl relative z-10 bg-white/20 p-4 rounded-full backdrop-blur text-white shadow-xl group-hover:scale-110 transition-transform">play_arrow</span>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 text-center">
                    <div
                        class="group p-6 bg-white border border-slate-100 rounded-2xl shadow-sm hover:shadow-xl hover:border-indigo-200 hover:-translate-y-2 transition-all duration-300 cursor-default relative overflow-hidden">
                        <div
                            class="absolute inset-0 bg-gradient-to-br from-indigo-50/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        </div>
                        <div class="relative z-10">
                            <div
                                class="w-14 h-14 bg-indigo-50 text-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-sm group-hover:scale-110 group-hover:rotate-3 transition-transform duration-300 group-hover:bg-white group-hover:text-indigo-700">
                                <span class="material-symbols-rounded text-2xl">psychology</span>
                            </div>
                            <div class="font-black text-indigo-800 text-lg mb-2">1. Confrontar</div>
                            <p class="text-xs text-slate-500 leading-relaxed group-hover:text-slate-700">Antes de ver la
                                solución, pregúntate: <strong>"¿Qué le pediría yo a la IA?"</strong>. Intenta resolverlo
                                mentalmente.</p>
                        </div>
                    </div>
                    <div
                        class="group p-6 bg-white border border-slate-100 rounded-2xl shadow-sm hover:shadow-xl hover:border-emerald-200 hover:-translate-y-2 transition-all duration-300 cursor-default relative overflow-hidden">
                        <div
                            class="absolute inset-0 bg-gradient-to-br from-emerald-50/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        </div>
                        <div class="relative z-10">
                            <div
                                class="w-14 h-14 bg-emerald-50 text-emerald-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-sm group-hover:scale-110 group-hover:-rotate-3 transition-transform duration-300 group-hover:bg-white group-hover:text-emerald-700">
                                <span class="material-symbols-rounded text-2xl">manage_search</span>
                            </div>
                            <div class="font-black text-emerald-800 text-lg mb-2">2. Comprender</div>
                            <p class="text-xs text-slate-500 leading-relaxed group-hover:text-slate-700">Analiza el
                                Prompt Maestro. Identifica los <strong>5 ingredientes clave</strong>: Rol, Contexto,
                                Meta, Restricciones y Formato.</p>
                        </div>
                    </div>
                    <div
                        class="group p-6 bg-white border border-slate-100 rounded-2xl shadow-sm hover:shadow-xl hover:border-amber-200 hover:-translate-y-2 transition-all duration-300 cursor-default relative overflow-hidden">
                        <div
                            class="absolute inset-0 bg-gradient-to-br from-amber-50/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        </div>
                        <div class="relative z-10">
                            <div
                                class="w-14 h-14 bg-amber-50 text-amber-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-sm group-hover:scale-110 group-hover:rotate-3 transition-transform duration-300 group-hover:bg-white group-hover:text-amber-700">
                                <span class="material-symbols-rounded text-2xl">handshake</span>
                            </div>
                            <div class="font-black text-amber-800 text-lg mb-2">3. Colaborar</div>
                            <p class="text-xs text-slate-500 leading-relaxed group-hover:text-slate-700">¡Acción! Copia
                                la estructura maestra y <strong>sustituye los datos</strong> por tu problema real del
                                día a día.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="paywall-modal" class="hidden fixed inset-0 z-[90] flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-slate-900/90 backdrop-blur-sm transition-opacity" onclick="closePaywall()">
        </div>
        <div
            class="relative bg-white rounded-2xl shadow-2xl max-w-sm w-full p-8 text-center animate-in zoom-in duration-200">
            <div
                class="w-12 h-12 bg-yellow-400 rounded-full flex items-center justify-center mx-auto mb-4 font-black text-xl shadow-lg">
                %</div>
            <h3 class="text-xl font-black text-slate-900 mb-2">¡Oportunidad Única!</h3>
            <p class="text-xs text-slate-500 mb-6 leading-relaxed">Obtén acceso inmediato a la <strong
                    class="text-slate-800">Bóveda de Prompts</strong> + <strong class="text-slate-800">Curso IA
                    Aplicada</strong>.<br><span
                    class="text-emerald-600 font-bold bg-emerald-50 px-2 py-0.5 rounded mt-2 inline-block">🔥 Oferta
                    Pack Starter</span></p><button id="unlock-btn-modal"
                onclick="window.location.href='https://aulagenia.web.app/landing-nuevo.html'"
                class="w-full bg-slate-900 hover:bg-slate-800 text-white py-3 rounded-xl font-bold text-sm shadow-xl hover:scale-105 transition-transform flex items-center justify-center gap-2"><span>Ver
                    Planes y Precios</span> <span
                    class="bg-yellow-400 text-slate-900 text-[10px] px-1.5 py-0.5 rounded font-black">OFERTA</span></button>
            <button onclick="closePaywall()" class="mt-3 text-xs text-slate-400 hover:text-slate-600">No
                gracias</button>
        </div>
    </div>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-functions-compat.js"></script>
    <script>const firebaseConfig = { apiKey: "AIzaSyC9sVJwEfFdIN4VmSMooAoQLXYl5Mcu1yM", authDomain: "aulagenia.firebaseapp.com", projectId: "aulagenia", storageBucket: "aulagenia.appspot.com", messagingSenderId: "173328075630", appId: "1:173328075630:web:825606db4271ea1e66cf7f" }; firebase.apps.length || firebase.initializeApp(firebaseConfig); const auth = firebase.auth(), db = firebase.firestore(), functions = firebase.functions();</script>
    <script type="module">let casesData = []; const externalDBUrl = "./prompts_db.js", statusOverlay = document.getElementById("system-status-overlay"), statusIcon = document.getElementById("status-icon"), statusTitle = document.getElementById("status-title"), statusDesc = document.getElementById("status-desc"), statusCode = document.getElementById("status-code"), retryBtn = document.getElementById("retry-btn"); function showSystemError(e) { statusOverlay.classList.remove("hidden"), statusOverlay.classList.add("flex"), statusIcon.innerHTML = '<span class="material-symbols-rounded text-3xl text-red-500">error</span>', statusIcon.className = "w-16 h-16 bg-white border border-red-100 text-red-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-sm", statusTitle.innerText = "Error de Conexión", e.message.includes("Failed to fetch") || e.message.includes("NetworkError") ? (statusDesc.innerText = "No pudimos conectar con el servidor de AulaGenia. Verifica tu conexión o que prompts_db.js exista.", statusCode.innerText = "NETWORK_ERROR") : (statusDesc.innerText = "Error al procesar la base de datos de prompts.", statusCode.innerText = "DATA_ERROR: " + e.message), statusCode.className = "text-red-500 font-bold", retryBtn.classList.remove("hidden") } async function loadDatabase() { try { const e = new URLSearchParams(window.location.search); if ("true" === e.get("dev")) { console.warn("🚧 DEV MODE: Intentando cargar prompts_db.js localmente..."); const e = document.createElement("script"); return e.src = "prompts_db.js", e.onload = () => { void 0 !== window.casesData && Array.isArray(window.casesData) && (casesData = window.casesData, console.log("✅ Local Load Success"), setTimeout(() => { statusOverlay.classList.add("hidden"), initApp() }, 100)) }, e.onerror = () => { console.error("❌ Falló carga local. Asegúrate de tener prompts_db.js"), showSystemError(new Error("Falló carga local en modo dev")) }, void document.head.appendChild(e) } console.log("⏳ Esperando autenticación de Firebase..."), await new Promise(e => { const t = auth.onAuthStateChanged(o => { t(), e(o) }) }); const t = auth.currentUser; if (!t) { console.log("❌ Usuario no autenticado, redirigiendo a login..."); const e = encodeURIComponent(window.location.href); return void (window.location.href = `https://aulagenia.web.app/acceso.html?redirect=${e}`) } console.log("✅ Usuario autenticado:", t.email), console.log("🔒 Secure Load: Solicitando prompts a Cloud Function..."); const o = firebase.functions().httpsCallable("getPromptsData"), a = await o(); if (!a.data.success) throw new Error("Respuesta inválida del servidor seguro."); casesData = a.data.data, console.log(`✅ Secure Load Success: ${casesData.length} prompts loaded.`), setTimeout(() => { statusOverlay.classList.add("hidden"), initApp() }, 100) } catch (e) { if (console.error("Secure Load Error:", e), "functions/unauthenticated" === e.code) { console.log("Usuario no autenticado, redirigiendo a login..."); const e = encodeURIComponent(window.location.href); return void (window.location.href = `https://aulagenia.web.app/acceso.html?redirect=${e}`) } "functions/permission-denied" === e.code ? showSystemError(new Error("Acceso denegado: Necesitas inscripción activa.")) : showSystemError(e) } } loadDatabase(); const config = { categories: { "Productividad Ninja": { label: "Productividad", color: "teal", icon: "rocket_launch" }, "Ventas & Persuasión": { label: "Ventas", color: "teal", icon: "campaign" }, "Contenido & Redes": { label: "Marketing", color: "indigo", icon: "share" }, "Finanzas Inteligentes": { label: "Finanzas", color: "slate", icon: "payments" }, "Legal & Formalización": { label: "Legal", color: "slate", icon: "gavel" }, "Estrategia & Lanzamiento": { label: "Estrategia", color: "indigo", icon: "flag" }, "Diseño & Arte Digital": { label: "Diseño", color: "teal", icon: "palette" }, "Operaciones & Procesos": { label: "Operaciones", color: "slate", icon: "settings_suggest" }, "Liderazgo & Equipos": { label: "Liderazgo", color: "indigo", icon: "groups" }, "Tecnología & Herramientas": { label: "Tecnología", color: "slate", icon: "terminal" }, "Otros / Análisis": { label: "Análisis", color: "gray", icon: "analytics" } } }; let autoScrollFrame, currentPromptTemplate = "", currentBadPromptTemplate = "", currentVariables = {}, currentDifficulty = "beginner", currentViewMode = "basic", autoScrollSpeed = 0; window.startAutoScroll = function (e) { console.log("AutoScroll started:", e); const t = document.getElementById("category-nav"); if (!t) return void console.error("Nav element not found!"); console.log("Nav scrollWidth:", t.scrollWidth), console.log("Nav clientWidth:", t.clientWidth), console.log("Can scroll:", t.scrollWidth > t.clientWidth), console.log("Current scrollLeft:", t.scrollLeft), autoScrollSpeed = e, autoScrollFrame && cancelAnimationFrame(autoScrollFrame), t.style.scrollBehavior = "auto"; let o = 0; const a = () => { const e = t.scrollLeft; t.scrollLeft += autoScrollSpeed; const n = t.scrollLeft; o < 5 && console.log(`Scroll attempt ${o}: ${e} -> ${n}`), o++, autoScrollFrame = requestAnimationFrame(a) }; a() }, window.stopAutoScroll = function () { autoScrollFrame && cancelAnimationFrame(autoScrollFrame); const e = document.getElementById("category-nav"); e && (e.style.scrollBehavior = "smooth") }; let currentCaseId = null, isVaultUnlocked = !1; function getEncryptionKey() { return [65, 71, 73, 65, 50, 48, 50, 53].map(e => String.fromCharCode(e)).join("") } async function sha256(e) { const t = (new TextEncoder).encode(e), o = await crypto.subtle.digest("SHA-256", t); return Array.from(new Uint8Array(o)).map(e => e.toString(16).padStart(2, "0")).join("") } function generateFullPDF() { window.location.href = "campus.html?download=pdf" } function initApp() {
            if (window.loadCase = n, window.filterCases = function () { const e = document.getElementById("searchInput").value.toLowerCase().trim(); if (!e) return void c(casesData); const t = e.split(/\s+/), o = new Set(t); t.forEach(e => { Object.keys(l).forEach(t => { (t.includes(e) || e.includes(t)) && l[t].forEach(e => o.add(e)) }) }); const a = Array.from(o), n = casesData.filter(e => { const t = `${e.title} ${e.problem} ${e.category} ${e.badPrompt}`.toLowerCase(); return a.some(e => t.includes(e)) }); c(n, a); const r = document.getElementById("search-stats"), s = document.getElementById("results-count"); e.length > 0 ? (r.classList.remove("hidden"), r.classList.add("flex"), 0 === n.length ? (s.innerText = "0 resultados", s.className = "text-[10px] font-bold text-red-400") : (s.innerText = `${n.length} encontrados`, s.className = "text-[10px] font-bold text-emerald-500")) : (r.classList.add("hidden"), r.classList.remove("flex")) }, window.filterByCategory = function (e) { window.currentCategory = e, document.getElementById("searchInput").value = ""; const t = casesData.filter(t => t.category === e); c(t), t.length > 0 && n(t[0].id); document.querySelectorAll(".category-item").forEach(e => e.classList.remove("active")); const o = document.querySelector(`.category-item[data-category="${e}"]`); o && o.classList.add("active") }, window.copyPrompt = function (btn) { const currentPrompt = casesData.find(p => p.id === currentCaseId); const promptIsLocked = currentPrompt && currentPrompt.locked === true; if (!isVaultUnlocked && promptIsLocked) { return window.location.href = 'https://aulagenia.web.app/landing-nuevo.html'; } s(btn) }, window.openPaywall = function () { confetti({ particleCount: 150, spread: 100, origin: { y: .6 }, colors: ["#FFE400", "#FFBD00", "#E89400", "#FFCA6C", "#FDFFB8"] }), document.getElementById("paywall-modal").classList.remove("hidden") }, window.closePaywall = function () { document.getElementById("paywall-modal").classList.add("hidden") }, window.showTutorial = function () { document.getElementById("tutorial-modal").classList.remove("hidden") }, window.closeTutorial = function () { document.getElementById("tutorial-modal").classList.add("hidden") }, window.downloadPDF = function () { const e = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], t = casesData.length, a = casesData.filter(t => isVaultUnlocked || e.includes(t.id)).length, n = `\n                <html>\n                <head>\n                    <title>Bóveda de Prompts AGIA</title>\n                    <style>\n                        body { font-family: sans-serif; padding: 40px; color: #333; line-height: 1.6; }\n                        h1 { text-align: center; color: #4f46e5; margin-bottom: 5px; }\n                        .subtitle { text-align: center; font-size: 0.9em; color: #666; margin-bottom: 40px; }\n                        .case { border: 1px solid #e2e8f0; padding: 20px; margin-bottom: 20px; page-break-inside: avoid; border-radius: 8px; }\n                        .title { font-weight: 800; font-size: 1.2em; color: #1e293b; }\n                        .meta { font-size: 0.75em; color: #64748b; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 0.05em; font-weight: 700; }\n                        .problem { font-style: italic; color: #475569; margin-bottom: 15px; font-size: 0.9em; }\n                        .label { font-weight: bold; font-size: 0.8em; text-transform: uppercase; color: #4f46e5; margin-bottom: 5px; }\n                        .prompt-box { background: #f8fafc; border: 1px solid #cbd5e1; padding: 15px; border-radius: 6px; font-family: 'Courier New', monospace; white-space: pre-wrap; font-size: 0.85em; color: #334155; }\n                        .locked-box { background: #fef2f2; border: 1px dashed #fca5a5; color: #991b1b; text-align: center; font-style: italic; padding: 20px; display: flex; align-items: center; justify-content: center; gap: 10px; }\n                        .watermark { text-align: center; margin-top: 50px; font-size: 0.8em; color: #cbd5e1; }\n                    </style>\n                </head>\n                <body>\n                    <h1>Bóveda Maestra AGIA</h1>\n                    <p class="subtitle">Reporte Generado el ${(new Date).toLocaleDateString()} | ${a}/${t} Desbloqueados</p>\n                    \n                    ${casesData.map(t => { const a = e.includes(t.id), n = !(isVaultUnlocked || a); let r = ""; n || (r = t.agiaPromptTagged && t.agiaPromptTagged.startsWith("U2F") ? o(t.agiaPromptTagged) : t.agiaPromptTagged || ""); const s = n ? '<div class="locked-box">🔒 CONTENIDO EXCLUSIVO - Inicia sesión en AulaGenia para ver este contenido.</div>' : `<div class="prompt-box">${r.replace(/{[a-z]+\}|{\/[a-z]+\}/g, "")}</div>`; return `\n                            <div class="case">\n                                <div class="title">${t.title}</div>\n                                <div class="meta">${t.category} • ${t.difficulty}</div>\n                                <p class="problem">"${t.problem}"</p>\n                                <div class="label">Prompt Optimizado:</div>\n                                ${s}\n                            </div>\n                        ` }).join("")}\n                    \n                    <div class="watermark">Generado por AGIA Generator 3.0</div>\n                </body>\n                </html>\n            `, r = window.open("", "_blank"); r.document.write(n), r.document.close() }, window.setMode = a, window.generateFullPDF = generateFullPDF, function () { const e = document.getElementById("category-nav"); if (!e) return; const t = [...new Set(casesData.map(e => e.category))]; e.innerHTML = t.map(e => { const t = config.categories[e] || { label: e, color: "slate", icon: "category" }, o = casesData.filter(t => t.category === e).length, a = e === window.currentCategory; return `<button data-category="${e}" onclick="filterByCategory('${e}')" class="category-item shrink-0 whitespace-nowrap px-3 py-1 rounded-lg text-[10px] font-bold bg-white border border-slate-100 text-slate-500 hover:border-teal-300 hover:bg-teal-50 hover:text-teal-700 transition-all flex items-center gap-1.5 group ${a ? "active" : ""}">\n                    <span class="material-symbols-rounded text-sm text-slate-300 group-hover:text-teal-600">${t.icon}</span> \n                    ${e}\n                    <span class="badge bg-white border border-slate-100 text-slate-400 text-[9px] px-1.5 py-0.5 rounded-full ml-1 group-hover:bg-teal-100 group-hover:text-teal-700 transition-colors">${o}</span>\n                </button>` }).join("") }(), c(casesData), casesData.length > 0 && n(casesData[0].id), function () { let e = 14, t = 59; const o = document.getElementById("countdown"); if (!o) return; setInterval(() => { if (0 === t) { if (0 === e) return; e--, t = 59 } else t--; o.innerText = `${e}:${t < 10 ? "0" + t : t}` }, 1e3) }(), function () { const e = ["Carlos R.", "Maria Jose L.", "StartUp Vision", "David Gonzalez", "Sofia P.", "Agencia Nova", "Mario B.", "Fernanda S.", "Juan Pablo M.", "TechSolution Ltda", "Laura D.", "Pedro A.", "Consuelo V.", "Ignacio R.", "Camila T.", "Estudio Creativo", "Rodrigo F.", "Andrea M.", "Felipe S.", "Gabriela O.", "Nicolas C.", "Valentina H.", "Javier E.", "Digital Growth", "Carolina U.", "Ricardo P.", "Daniela B.", "Sebastian V.", "Francisca A.", "Matias L.", "Jorge M.", "Beatriz S.", "Luis G.", "Global Trends", "Elena K.", "Pablo R.", "Teresa V.", "Hugo C.", "Verónica N.", "Innova Corp", "Diego A.", "Natalia F.", "Roberto S.", "Clara D.", "Smart Biz", "Manuel J.", "Patricia L.", "Gabriel M.", "Isabel T.", "Fusion Media", "Alejandro V.", "Lucía B.", "Fernando R.", "Marta P.", "NextGen Agency", "Alberto D.", "Carmen S.", "Raúl G.", "Silvia M.", "Eco Systems", "Adrián L.", "Lorena C.", "Oscar P.", "Rosa T.", "Data Mind", "Sergio H.", "Paula R.", "Iván F.", "Mónica G.", "Web Solutions", "Antonio M.", "Eva S.", "Francisco J.", "Alicia V.", "Market Pro", "Julián R.", "Cristina B.", "Rubén D.", "Nuria L.", "Cloud Nine", "Héctor S.", "Marina P.", "Emilio C.", "Diana M.", "Alpha Group", "Gonzalo V.", "Pilar R.", "Esteban G.", "Julia T.", "Net Connect", "Álvaro F.", "Raquel S.", "Vicente M.", "Celia D.", "Future Tech", "Santiago L.", "Inés P.", "Tomás R.", "Gloria V.", "Prime Corp", "Rafael G.", "Angela M.", "Joaquín S.", "Olga B.", "Elite Services", "Mariano D.", "Irene C.", "Salvador P.", "Adela R.", "Visionary Labs", "Samuel V.", "Lidia M.", "Isaac G.", "Esther T.", "Quantum Leap", "Félix R.", "Aurora S.", "Gustavo P.", "Blanca D.", "Apex Solutions", "César M.", "Elisa V.", "Arturo L.", "Sara G.", "Nexus Point", "Ramón B.", "Vanesa C.", "Domingo R.", "Fátima P.", "Synergy Hub", "Gregorio S.", "Amalia M.", "Lorenzo D.", "Sonia V.", "Bright Ideas", "Marcos P.", "Noelia R.", "Eugenio G.", "Miriam T.", "Zenith Corp", "Benjamín L.", "Rocío S.", "Alfonso M.", "Virginia D.", "Core Systems", "Cristóbal V.", "Begoña P.", "Leandro R.", "Matilde G.", "Flux Media", "Simón D.", "Ariadna M.", "Damián S.", "Erika V.", "Spark Labs", "Teodoro P.", "Carlota R.", "Fabián G.", "Lara D.", "Velocity Inc", "Mauricio M.", "Daniela S.", "René V.", "Paulina C.", "Titan Group", "Bruno L.", "Valeria P.", "Axel R.", "Camila G.", "Nova Tech", "Ezequiel M.", "Ximena D.", "Dante S.", "Zoe V.", "Omega Corp", "Lucas P.", "Abril R.", "Mateo G.", "Luna D.", "Starlight Co", "Thiago M.", "Mia S.", "Ian V.", "Emma P.", "Blue Sky", "Oliver R.", "Olivia G.", "Noah D.", "Ava M.", "Green Leaf", "Liam S.", "Sophia V.", "Ethan P.", "Isabella R.", "Red Rock", "Mason G.", "Charlotte D.", "Logan M.", "Amelia S.", "Silver Lining", "Jacob P.", "Harper V.", "William R.", "Evelyn G.", "Golden Gate", "Michael D.", "Abigail M.", "Alexander S.", "Emily P.", "Diamond Edge", "James R.", "Elizabeth V.", "Benjamin G.", "Mila D.", "Iron Clad", "Daniel M.", "Ella S.", "Henry P.", "Avery R.", "Steel Works", "Jackson V.", "Sofia G.", "Sebastian D.", "Camila M.", "Bronze Age"], t = ["Santiago", "Viña del Mar", "Concepción", "Valparaíso", "Antofagasta", "La Serena", "Temuco", "Rancagua", "CDMX", "Monterrey", "Guadalajara", "Puebla", "Cancún", "Tijuana", "Mérida", "Querétaro", "León", "Veracruz", "Bogotá", "Medellín", "Cali", "Barranquilla", "Cartagena", "Bucaramanga", "Pereira", "Buenos Aires", "Rosario", "Córdoba", "Mendoza", "Tucumán", "Mar del Plata", "Salta", "Lima", "Arequipa", "Trujillo", "Cusco", "Chiclayo", "Madrid", "Barcelona", "Valencia", "Bilbao", "Sevilla", "Zaragoza", "Málaga", "Alicante", "Miami", "Quito", "Guayaquil", "Montevideo", "San José", "Panamá", "Asunción", "La Paz", "Santo Domingo", "San Juan", "Guatemala City", "San Salvador", "Tegucigalpa"], o = ["se inscribió en el Programa", "comenzó el Curso de IA", "accedió a la Bóveda", "desbloqueó su primer caso", "está optimizando sus procesos", "mejoró su prompt en 90%", "ahorró 4 horas esta semana", "descargó la guía maestra"]; let a = new Set; try { const e = sessionStorage.getItem("agia_used_names"); e && (a = new Set(JSON.parse(e))) } catch (e) { console.warn("Session storage inaccessible") } const n = document.getElementById("sales-toast"); setTimeout(function r() { if (!n || document.hidden) return; const { buyer: s, location: l, action: i, time: c } = function () { let n = e.filter(e => !a.has(e)); 0 === n.length && (a.clear(), n = e); const r = n[Math.floor(Math.random() * n.length)]; a.add(r); try { sessionStorage.setItem("agia_used_names", JSON.stringify([...a])) } catch (e) { } return { buyer: r, location: t[Math.floor(Math.random() * t.length)], action: o[Math.floor(Math.random() * o.length)], time: Math.random() > .7 ? "Hace instantes" : `Hace ${Math.floor(59 * Math.random()) + 1} min` } }(), d = s.charAt(0), m = ["bg-indigo-500", "bg-blue-500", "bg-emerald-500", "bg-violet-500", "bg-rose-500", "bg-amber-500"], u = m[Math.floor(Math.random() * m.length)]; n.innerHTML = `\n                <div class="bg-white rounded-lg shadow-xl border border-slate-100 p-3 flex items-center gap-3 w-80 relative overflow-hidden group hover:scale-[1.02] transition-transform cursor-pointer" onclick="openPaywall()">\n                     <div class="absolute left-0 top-0 bottom-0 w-1 ${u}"></div>\n                     <div class="flex-none w-10 h-10 rounded-full ${u} text-white flex items-center justify-center font-bold text-lg shadow-md relative">\n                        ${d}\n                        <div class="absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-400 border-2 border-white rounded-full"></div>\n                     </div>\n                     <div class="flex-1 min-w-0">\n                        <div class="flex justify-between items-start">\n                             <p class="text-sm font-bold text-slate-800 truncate pr-1">${s} <span class="font-normal text-slate-500 text-xs">adquirió la Licencia Pro</span></p>\n                        </div>\n                        <div class="flex items-center gap-1.5 mt-0.5">\n                             <span class="material-symbols-rounded text-slate-300 text-[10px]">public</span>\n                             <p class="text-[10px] text-slate-400 font-medium truncate">${c} • ${l}</p>\n                        </div>\n                     </div>\n                </div>`, n.classList.remove("translate-y-24", "opacity-0"), setTimeout(() => { n.classList.add("translate-y-24", "opacity-0") }, 1e4); const p = Math.floor(3e4 * Math.random()) + 15e3; setTimeout(r, p) }, 5e3) }(), "undefined" != typeof auth) {
                auth.onAuthStateChanged(async e => {
                    const t = document.getElementById("unlock-btn"); if (e) {
                        const o = document.getElementById("user-profile"), a = document.getElementById("user-display-name"), r = document.getElementById("user-avatar"); if (o && a && r) { const t = (e.displayName || e.email.split("@")[0] || "Usuario").split(" ")[0]; if (a.textContent = t, e.photoURL) r.src = e.photoURL; else { t.charAt(0).toUpperCase(); r.src = `https://ui-avatars.com/api/?name=${encodeURIComponent(t)}&background=6366f1&color=fff&bold=true` } o.classList.remove("hidden"), o.classList.add("flex") } const s = db.collection("users").doc(e.uid); let l = !1; try {
                            const t = await s.get(); if (console.log("🔍 Verificando enrollment para:", e.email), t.exists) {
                                const e = t.data();
                                console.log("📦 User Data:", e), console.log("📋 Enrollments:", e.enrollments);
                                const o = "ia-aplicada-esencial",
                                    a = "inteligencia-aplicada",
                                    start = "ia-aplicada-starter"; // ADDED STARTER ID
                                e.enrollments && (console.log(`✅ Checking ${o}:`, e.enrollments[o]), console.log(`✅ Checking ${start}:`, e.enrollments[start])),
                                    !e.enrollments || (!0 !== e.enrollments[o] && !0 !== e.enrollments[a] && !0 !== e.enrollments[start]) // CHECK ALL
                                        ?
                                        console.log("❌ NO HAY ENROLLMENT - Manteniendo bloqueado") : (l = !0, console.log("✅ ENROLLMENT DETECTADO - Desbloqueando contenido"))
                            } else console.log("❌ Usuario no existe en Firestore")
                        } catch (e) {
                            console.error("❌ Error verificando enrollment:", e)
                        }
                        isVaultUnlocked = l, isVaultUnlocked ? console.log("🔓 Desbloqueando vault (Usuario Premium)...") : console.log("🔒 Vault bloqueado (Usuario Freemium)..."), t && t.classList.add("hidden");
                        const i = document.getElementById("locked-teaser");
                        i && (i.classList.add("hidden"), i.classList.remove("flex")), currentCaseId && n(currentCaseId);
                        const c = document.getElementById("unlock-btn");
                        c && (l ? c.classList.add("hidden") : (c.innerHTML = '<span class="material-symbols-rounded text-sm text-emerald-400">rocket_launch</span><span class="hidden sm:inline">Acceso Premium</span>', c.onclick = e => {
                            e.preventDefault(), window.location.href = "landing-nuevo.html?action=buy" // REDIRECT TO LANDING WITH BUY ACTION
                        }));
                        if ("buy" === new URLSearchParams(window.location.search).get("action"))
                            if (isVaultUnlocked) {
                                console.log("User already enrolled. Creating smooth clean URL.");
                                const e = window.location.pathname;
                                window.history.replaceState({}, document.title, e);
                                const t = document.getElementById("toast");
                                t && (t.innerHTML = '<div class="bg-emerald-500 text-white px-4 py-3 rounded-xl shadow-xl flex items-center gap-3"><span class="material-symbols-rounded">check_circle</span><div><p class="font-bold text-sm">¡Ya tienes acceso!</p></div></div>', t.classList.remove("translate-x-full"), setTimeout(() => t.classList.add("translate-x-full"), 3e3))
                            } else console.log("User NOT enrolled. Redirecting to landing..."), window.location.href = "https://aulagenia.web.app/landing-nuevo.html"; // REDIRECT
                        const d = document.getElementById("teaser-message"),
                            m = document.getElementById("teaser-action-text"),
                            u = document.getElementById("teaser-action-btn");
                        d && (d.innerHTML = "Aprende a <strong>usar IA sin saber programar</strong>. Accede al Curso + Bóveda de Prompts con descuento especial."), m && (m.textContent = "Ver Ofertas"), u && (u.onclick = e => { e.preventDefault(); window.location.href = 'landing-nuevo.html?action=buy'; }), currentCaseId && n(currentCaseId) // UPDATE TEASER
                    } else {
                        const e = document.getElementById("user-profile");
                        e && (e.classList.add("hidden"), e.classList.remove("flex"));
                        const t = document.getElementById("teaser-message"),
                            o = document.getElementById("teaser-action-text"),
                            a = document.getElementById("teaser-action-btn");
                        t && (t.innerHTML = "Aprende a <strong>usar IA sin saber programar</strong>. Accede al Curso + Bóveda de Prompts con descuento especial."), o && (o.textContent = "Ver Ofertas"), a && (a.onclick = e => { e.preventDefault(); window.location.href = 'landing-nuevo.html?action=buy'; }); // SHOW COUPON MODAL
                        const r = document.getElementById("unlock-btn");
                        if (r) {
                            const e = r.querySelector("span:last-child");
                            e && (e.textContent = "Acceso Premium")
                        }
                        isVaultUnlocked = !1, r && r.classList.remove("hidden"), currentCaseId && n(currentCaseId)
                    }
                });
                const e = document.getElementById("logout-btn");
                e && e.addEventListener("click", async () => {
                    try {
                        await auth.signOut(), window.location.reload()
                    } catch (e) {
                        console.error("Error al cerrar sesión:", e), alert("Error al cerrar sesión. Intenta nuevamente.")
                    }
                })
            } function e(e) {
                return e ? String(e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;") : ""
            } function t(t) { if (!t) return ""; let o = String(t).trim(); console.log("📥 INPUT:", o.substring(0, 200)), o = o.replace(/<\/?[^>]+(>|$)/g, ""), o = o.replace(/^["']|["']$/g, "").trim(), o = o.replace(/[ \t]+/g, " ").trim(), o = o.replace(/\\n/g, "\n"), o = function (e) { const t = /(\|[^\n]+\|\n(?:\|[\s:-]+\|[\s\S]*?\n)?(?:\|[^\n]+\|\n?)*)/g; return e.replace(t, e => { const t = e.trim().split("\n").filter(e => e.trim()); if (t.length < 2) return e; const o = t[0].split("|").filter(e => e.trim()).map(e => e.trim()); let a = 1; (t[1] && t[1].includes("---") || t[1].includes(":--")) && (a = 2); const n = t.slice(a).map(e => e.split("|").filter(e => e.trim()).map(e => e.trim())); let r = "<table><thead><tr>"; return o.forEach(e => { r += `<th>${e}</th>` }), r += "</tr></thead><tbody>", n.forEach(e => { r += "<tr>", e.forEach(e => { r += `<td>${e}</td>` }), r += "</tr>" }), r += "</tbody></table>", r }) }(o), o = o.replace(/```([a-z]*)\n([\s\S]*?)```/gi, (e, t, o) => `§§§PRE§§§${o.trim()}§§§/PRE§§§`), o = o.replace(/`([^`]+)`/g, "§§§CODE§§§$1§§§/CODE§§§"), o = o.replace(/\*\*([^\*]+)\*\*/g, "§§§STRONG§§§$1§§§/STRONG§§§"), o = o.replace(/\*([^\*\n]+)\*/g, "§§§EM§§§$1§§§/EM§§§"), o = o.replace(/((?:^|\n)- .+(?:\n|$))+/g, e => `§§§UL§§§${e.trim().split("\n").map(e => `§§§LI§§§${e.replace(/^- /, "").trim()}§§§/LI§§§`).join("")}§§§/UL§§§`), o = o.replace(/((?:^|\n)\d+\. .+(?:\n|$))+/g, e => `§§§OL§§§${e.trim().split("\n").map(e => `§§§LI§§§${e.replace(/^\d+\. /, "").trim()}§§§/LI§§§`).join("")}§§§/OL§§§`), o = o.replace(/^---$/gm, "§§§HR§§§"); const a = [], n = /(§§§[^§]+§§§|<table>[\s\S]*?<\/table>)/g; let r, s = 0; for (; null !== (r = n.exec(o));)r.index > s && a.push(e(o.substring(s, r.index))), a.push(r[0]), s = r.index + r[0].length; s < o.length && a.push(e(o.substring(s))), o = a.join(""), o = o.replace(/§§§HR§§§/g, '<hr class="my-6 border-t-2 border-dashed border-slate-200 w-full">'), o = o.replace(/§§§PRE§§§/g, "<pre><code>"), o = o.replace(/§§§\/PRE§§§/g, "</code></pre>"), o = o.replace(/§§§CODE§§§/g, "<code>"), o = o.replace(/§§§\/CODE§§§/g, "</code>"), o = o.replace(/§§§STRONG§§§/g, "<strong>"), o = o.replace(/§§§\/STRONG§§§/g, "</strong>"), o = o.replace(/§§§EM§§§/g, "<em>"), o = o.replace(/§§§\/EM§§§/g, "</em>"), o = o.replace(/§§§UL§§§/g, "<ul>"), o = o.replace(/§§§\/UL§§§/g, "</ul>"), o = o.replace(/§§§OL§§§/g, "<ol>"), o = o.replace(/§§§\/OL§§§/g, "</ol>"), o = o.replace(/§§§LI§§§/g, "<li>"), o = o.replace(/§§§\/LI§§§/g, "</li>"), o = o.split("\n\n").map(e => { if (!(e = e.trim())) return ""; if (e.startsWith("<table") || e.startsWith("<pre") || e.startsWith("<ul") || e.startsWith("<ol") || e.startsWith("<hr")) return e; const t = e.split("\n"), o = t.some(e => e.trim().match(/^- /)), a = t.some(e => e.trim().match(/^\d+\.\s/)); if (o || a) { let e = "", o = !1, a = !1; const n = "list-disc ml-5 space-y-1 text-slate-600 my-2", r = "list-decimal ml-5 space-y-1 text-slate-600 my-2", s = "mb-1 leading-snug text-slate-600"; return t.forEach(t => { let l = t.trim(); if (l.match(/^-{3,}$/)) return o && (e += "</ul>", o = !1), a && (e += "</ol>", a = !1), void (e += '<hr class="my-6 border-t-2 border-dashed border-slate-200 w-full">'); if (!l.includes("|") || !l.includes("-") || 0 !== l.replace(/[\s\:\-\|]/g, "").length) if (l.match(/^- /)) { a && (e += "</ol>", a = !1), o || (e += `<ul class="${n}">`, o = !0); const t = l.substring(2).trim(); e += `<li>${t}</li>` } else if (l.match(/^\d+\.\s/)) { o && (e += "</ul>", o = !1), a || (e += `<ol class="${r}">`, a = !0); const t = l.replace(/^\d+\.\s+/, "").trim(); e += `<li>${t}</li>` } else o && (e += "</ul>", o = !1), a && (e += "</ol>", a = !1), l && (e += `<div class="${s}">${l}</div>`) }), o && (e += "</ul>"), a && (e += "</ol>"), e } return `<div class="mb-2 leading-snug text-slate-600">${e.replace(/\n/g, "<br>")}</div>` }).join(""); const l = `<div class="markdown-content">${o}</div>`; return console.log("📤 OUTPUT:", l.substring(0, 300)), l } function o(e) { try { if (!e) return ""; if (!e.startsWith("U2F")) return e; const t = CryptoJS.AES.decrypt(e, getEncryptionKey()); return t.toString(CryptoJS.enc.Utf8) || "Error: Corrupted Data" } catch (e) { return console.error("Decryption failed", e), "Error: Decryption Failed" } } function a(e) { currentViewMode = e; const t = document.getElementById("btn-basic"), o = document.getElementById("btn-agia"), a = document.getElementById("maestro-cta-badge"), n = document.getElementById("content-basic"), r = document.getElementById("content-agia"), s = document.getElementById("copy-btn"), l = document.getElementById("copy-btn-container"); if ("basic" === e) { n.classList.remove("hidden"), r.classList.add("hidden"), t.classList.add("bg-slate-600", "text-white"), t.classList.remove("text-slate-600"), o.classList.remove("bg-indigo-600", "text-white"), o.classList.add("text-slate-600", "animate-pulse", "ring-2", "ring-teal-400", "ring-offset-2"), a && a.classList.remove("hidden"), l && l.classList.add("hidden"), s.disabled = !0, s.classList.remove("bg-indigo-600", "hover:bg-indigo-700", "text-white", "shadow-sm"), s.classList.add("bg-slate-300", "text-slate-500", "cursor-not-allowed", "opacity-60"); const e = document.getElementById("maestro-social-proof"); e && (e.classList.add("hidden"), e.classList.remove("flex")) } else { n.classList.add("hidden"), r.classList.remove("hidden"), t.classList.remove("bg-slate-600", "text-white"), t.classList.add("text-slate-600"), o.classList.add("bg-indigo-600", "text-white"), o.classList.remove("text-slate-600", "animate-pulse", "ring-2", "ring-teal-400", "ring-offset-2"), a && a.classList.add("hidden"), l && l.classList.remove("hidden"), s.disabled = !1, s.classList.add("bg-indigo-600", "hover:bg-indigo-700", "text-white", "shadow-sm"), s.classList.remove("bg-slate-300", "text-slate-500", "cursor-not-allowed", "opacity-60"); const e = document.getElementById("maestro-social-proof"), i = document.getElementById("maestro-counter"), c = document.querySelector("#maestro-social-proof .text-\\[9px\\]"); if (e && i && c && currentCaseId) { const t = `social-proof-${currentCaseId}`; let o = localStorage.getItem(t); o || (o = Math.floor(251 * Math.random()) + 150, localStorage.setItem(t, o)), i.textContent = o; const a = ["visitas", "visitas", "visitas", "visitas"], n = currentCaseId % a.length; c.innerHTML = `<span id="maestro-counter">${o}</span> ${a[n]}`, e.classList.remove("smoke-effect"), e.classList.remove("hidden"), e.classList.add("flex"), e.offsetWidth, e.classList.add("smoke-effect") } } } function n(n) { currentCaseId = n; const r = casesData.find(e => e.id === n); if (!r) return; const s = document.getElementById("detail-scroll-container"); s && (s.scrollTop = 0); const l = !0 === r.locked, i = isVaultUnlocked || !l, c = !i; console.log(`🔒 Prompt #${n} "${r.title}": locked=${r.locked}, enrollment=${isVaultUnlocked} => effectivelyLocked=${c}`), currentDifficulty = r.difficulty || "beginner", document.querySelectorAll(".case-item").forEach(e => { e.classList.remove("bg-indigo-50", "border-indigo-100", "text-indigo-700"), e.classList.add("border-transparent", "text-slate-600") }); const d = document.getElementById(`case-item-${n}`); d && (d.classList.remove("border-transparent", "text-slate-600"), d.classList.add("bg-indigo-50", "border-indigo-100", "text-indigo-700")), document.getElementById("workspace-empty").classList.add("hidden"), document.getElementById("case-detail").classList.remove("hidden"), document.getElementById("detail-title").innerText = r.title, document.getElementById("detail-problem").innerText = r.description || r.problem, document.getElementById("bad-result-preview").innerHTML = t(r.badResponsePreview || ""), document.getElementById("bad-response-analysis").innerHTML = r.badResponseAnalysis || "", document.getElementById("good-result-preview").innerHTML = t(r.previewResponse); const m = config.categories[r.category] || { label: "General", color: "slate" }, u = document.getElementById("detail-category-badge"); u.innerText = r.category, u.className = `text-[9px] font-bold uppercase tracking-wider px-2 py-0.5 rounded border shadow-sm bg-white text-${m.color}-600 border-${m.color}-100`; const p = document.getElementById("ai-suggestion-badge"), g = document.getElementById("ai-name"); if (r.suggestedAI) { let e = r.suggestedAI.toUpperCase(); g.innerText = e, p.classList.remove("hidden"), p.classList.add("flex") } else p.classList.add("hidden"), p.classList.remove("flex"); const b = document.getElementById("benefit-badge"); b && ("beginner" === currentDifficulty ? (b.innerHTML = '<span class="material-symbols-rounded text-sm">bolt</span> Ahorro: ~15 min', b.className = "text-[10px] font-bold text-teal-600 bg-teal-50 px-2.5 py-1 rounded-md border border-teal-100 flex items-center gap-1.5 shadow-sm") : "intermediate" === currentDifficulty ? (b.innerHTML = '<span class="material-symbols-rounded text-sm">rocket_launch</span> Ahorro: ~45 min', b.className = "text-[10px] font-bold text-amber-600 bg-amber-50 px-2.5 py-1 rounded-md border border-amber-100 flex items-center gap-1.5 shadow-sm") : (b.innerHTML = '<span class="material-symbols-rounded text-sm">diamond</span> Ahorro: +2 Horas', b.className = "text-[10px] font-bold text-rose-600 bg-rose-50 px-2.5 py-1 rounded-md border border-rose-100 flex items-center gap-1.5 shadow-sm")); const f = document.getElementById("tip-container"), h = document.getElementById("validation-container"), y = document.getElementById("detail-example-tip"), x = document.getElementById("detail-validation-tip"); if (r.exampleTip ? (y.innerHTML = r.exampleTip, f.classList.remove("hidden"), f.classList.add("flex")) : (f.classList.add("hidden"), f.classList.remove("flex")), r.validationTip ? (x.innerHTML = r.validationTip, h.classList.remove("hidden"), h.classList.add("flex")) : (h.classList.add("hidden"), h.classList.remove("flex")), currentPromptTemplate = r.agiaPromptTagged, currentPromptTemplate.startsWith("U2F") && i && (currentPromptTemplate = o(currentPromptTemplate)), currentBadPromptTemplate = r.badPromptDynamic || r.badPrompt, currentVariables = {}, !currentPromptTemplate.startsWith("U2F")) { const e = /{([a-z0-9_]+)\|([^}]+)}/g; let t; for (; null !== (t = e.exec(currentPromptTemplate));)currentVariables[t[1]] = t[2] } !function () { let t = e(currentPromptTemplate); Object.keys(currentVariables).forEach(o => { const a = currentVariables[o] || "___", n = e(a), r = new RegExp(`{${o}\\|[^}]+}`, "g"); t = t.replace(r, `<span class="var-highlight">${n}</span>`) }); const o = { r: "rol", c: "contexto", m: "meta", l: "restricciones", f: "formato" }; Object.keys(o).forEach(e => { const a = `hl-${o[e]}`, n = new RegExp(`{${e}}(.*?){/${e}}`, "gs"); t = t.replace(n, `<span class="hl-tag ${a}" data-tag-type="${e}">$1</span>`) }), t = t.replace(/\n/g, "<br>"), document.getElementById("detail-prompt-rendered").innerHTML = t, function (t) { const o = document.getElementById("agia-sections-container"); if (!o) return; o.innerHTML = ""; const a = { ROL: { bg: "bg-slate-50", text: "text-slate-700", label: "Rol", border: "border-slate-200" }, CONTEXTO: { bg: "bg-teal-50", text: "text-teal-800", label: "Contexto", border: "border-teal-200" }, META: { bg: "bg-indigo-50", text: "text-indigo-800", label: "Meta", border: "border-indigo-200" }, RESTRICCIONES: { bg: "bg-rose-50", text: "text-rose-800", label: "Restricciones", border: "border-rose-200" }, FORMATO: { bg: "bg-violet-50", text: "text-violet-800", label: "Formato", border: "border-violet-200" } }; let n = {}; if (/\d+\.\s*(ROL|CONTEXTO|META|RESTRICCIONES|FORMATO):/i.test(t)) { const e = /(\d+)\.\s*(ROL|CONTEXTO|META|RESTRICCIONES|FORMATO):\s*([^]*?)(?=\d+\.\s*(?:ROL|CONTEXTO|META|RESTRICCIONES|FORMATO):|$)/gi; let o; for (; null !== (o = e.exec(t));) { const e = o[2].toUpperCase(), t = o[3].trim(); n[e] = t } } else { const e = { ROL: /{r}|(?:^|\n)(?:Eres un|Actúa como)/i, CONTEXTO: /{c}|\nCONTEXTO:/i, META: /{m}|\nMETA:/i, RESTRICCIONES: /{l}|\nRESTRICCIONES:/i, FORMATO: /{f}|\nFORMATO:/i }; let o = []; if (Object.entries(e).forEach(([e, a]) => { let n; const r = new RegExp(a.source, "gi"); for (; null !== (n = r.exec(t));)o.push({ index: n.index, length: n[0].length, section: e }) }), o.sort((e, t) => e.index - t.index), 0 === o.length) n.ROL = t; else for (let e = 0; e < o.length; e++) { const a = o[e], r = e + 1 < o.length ? o[e + 1].index : t.length, s = a.index + a.length; let l = t.substring(s, r).trim(); l = l.replace(/^(ROL:|CONTEXTO:|META:|RESTRICCIONES:|FORMATO:)\s*/i, "").trim(), l && (n[a.section] || (n[a.section] = ""), n[a.section] += (n[a.section] ? " " : "") + l) } } ["ROL", "CONTEXTO", "META", "FORMATO", "RESTRICCIONES"].forEach(t => { const r = n[t]; if (!r) return; const s = a[t] || { bg: "bg-slate-50", text: "text-slate-800", label: t, border: "border-slate-200" }, l = document.createElement("div"); l.className = `my-2 rounded-lg border ${s.border} hover:border-indigo-300 transition-all ${s.bg} px-4 py-3 shadow-sm`; let i = e(r).replace(/^-{3,}\s*$/gm, "").replace(/{\/?[rcmlf]}/gi, "").replace(/\[([^\]\n]+)\](?!\()/g, '<span class="var-highlight">$1</span>').replace(/\n/g, "<br>"); l.innerHTML = `\n                        <div class="flex items-start gap-2">\n                            <span class="text-[10px] font-extrabold uppercase tracking-wider ${s.text} bg-white/60 px-2 py-1 rounded border ${s.border} flex-shrink-0 shadow-sm">\n                                ${s.label}\n                            </span>\n                            <span class="${s.text} text-sm leading-relaxed flex-1" style="word-wrap: break-word; overflow-wrap: break-word;">\n                                ${i}\n                            </span>\n                        </div>\n                    `, o.appendChild(l) }) }(currentPromptTemplate); let a = e(currentBadPromptTemplate); Object.keys(currentVariables).forEach(t => { const o = currentVariables[t] || "...", n = e(o), r = new RegExp(`{${t}}`, "g"); a = a.replace(r, `<span class="var-highlight-bad">${n}</span>`) }), document.getElementById("bad-prompt-rendered").innerHTML = `"${a}"` }(); const w = document.getElementById("detail-tier-badge"); if (w) { [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15].includes(r.id) ? (w.innerHTML = '<span class="material-symbols-rounded text-[10px]">campaign</span> GRATUITO', w.className = "text-[9px] font-black uppercase tracking-wider px-2 py-0.5 rounded border shadow-sm bg-teal-100 text-teal-700 border-teal-200") : c ? (w.innerHTML = '<span class="material-symbols-rounded text-[10px] filled">lock</span> MAESTRO', w.className = "text-[9px] font-black uppercase tracking-wider px-2 py-0.5 rounded border shadow-sm bg-indigo-600 text-white border-indigo-700") : (w.innerHTML = '<span class="material-symbols-rounded text-[10px] filled">lock_open</span> MAESTRO', w.className = "text-[9px] font-black uppercase tracking-wider px-2 py-0.5 rounded border shadow-sm bg-indigo-100 text-indigo-700 border-indigo-200") } const v = document.getElementById("locked-teaser"), E = document.getElementById("prompt-blur-wrapper"), L = document.getElementById("copy-btn"), T = document.getElementById("result-teaser-label"), I = document.getElementById("teaser-action-btn"); I && (I.onclick = e => { e.preventDefault(), window.location.href = 'landing-nuevo.html?action=buy' }); const S = document.getElementById("vault-password"); S && (S.value = ""), c ? (v.classList.remove("hidden"), E.classList.add("blur-prompt"), L.disabled = !0, L.classList.add("opacity-50", "cursor-not-allowed"), L.classList.remove("bg-indigo-600", "hover:bg-indigo-700", "text-white", "cursor-pointer"), L.innerHTML = '<span class="material-symbols-rounded text-sm copy-icon">lock</span><span class="copy-text">Bloqueado</span>', T.classList.remove("hidden"), T.classList.add("flex")) : (v.classList.add("hidden"), E.classList.remove("blur-prompt"), L.disabled = !1, L.classList.remove("opacity-50", "cursor-not-allowed"), L.classList.add("bg-indigo-600", "hover:bg-indigo-700", "text-white", "cursor-pointer"), L.innerHTML = '<span class="material-symbols-rounded text-sm copy-icon">content_copy</span><span class="copy-text">Copiar</span>', T.classList.add("hidden"), T.classList.remove("flex")), a(currentViewMode); const C = document.getElementById("social-proof-text"); if (C) { const e = Math.floor(.8 * r.id) + 7 * r.id % 30 * 5 + 45, t = [`Usado <span class="text-orange-600 text-xs">${e}</span> veces en la última hora`, `<span class="text-orange-600 text-xs">${e}</span> personas lo están usando ahora`, `Tendencia: <span class="text-orange-600 text-xs">${e}</span> usos recientes`], o = r.id % t.length; C.innerHTML = t[o] } const M = document.getElementById("social-counter-header"); if (M) { const e = Math.floor(.8 * r.id) + 7 * r.id % 30 * 5 + 45, t = [`${e} copiaron`, `${e} usando`, `${e} aplicaron`, `${e} compartieron`], o = r.id % t.length; M.innerText = t[o] } } function e(e) { return e ? String(e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;") : e } function r() { const e = document.getElementById("detail-prompt-rendered"); if (!e) return ""; let t = e.innerText; return document.querySelectorAll(".var-input").forEach(e => { const o = e.dataset.original, a = e.value.trim() || e.placeholder; o && a && (t = t.replace(o, a)) }), t } function s() { confetti({ particleCount: 100, spread: 70, origin: { y: .6 } }); const e = document.getElementById("social-counter"); if (e) { let t = parseInt(e.innerText.replace(/,/g, "")); e.innerText = (t + 1).toLocaleString() } const t = r(), o = document.createElement("textarea"); o.value = t, document.body.appendChild(o), o.select(); try { document.execCommand("copy") } catch (e) { console.error("Error al copiar:", e) } document.body.removeChild(o) } window.scrollCategories = function (e) { const t = document.getElementById("category-nav"); t && (t.scrollBy({ left: e, behavior: "smooth" }), setTimeout(window.updateScrollArrows, 350)) }, window.updateScrollArrows = function () { const e = document.getElementById("category-nav"), t = document.getElementById("btn-scroll-left"), o = document.getElementById("btn-scroll-right"), a = document.getElementById("gradient-left"), n = document.getElementById("gradient-right"); if (!e || !t || !o) return; const r = e.scrollLeft > 10; t.style.display = r ? "flex" : "none", a && a.classList.toggle("hidden", !r), o && (o.style.setProperty("display", "flex", "important"), o.classList.remove("hidden")); const s = e.scrollWidth > e.scrollLeft + e.clientWidth + 5; n && n.classList.toggle("hidden", !s) }, document.addEventListener("DOMContentLoaded", () => { const e = document.getElementById("category-nav"); e && (e.addEventListener("scroll", window.updateScrollArrows), window.addEventListener("resize", window.updateScrollArrows), e.addEventListener("wheel", t => { e.scrollWidth > e.clientWidth && (t.preventDefault(), e.scrollBy({ left: t.deltaY < 0 ? -100 : 100, behavior: "smooth" })) }, { passive: !1 }), setTimeout(window.updateScrollArrows, 100), setTimeout(window.updateScrollArrows, 500), setTimeout(window.updateScrollArrows, 1e3), setTimeout(window.updateScrollArrows, 100), setTimeout(window.updateScrollArrows, 500), setTimeout(window.updateScrollArrows, 1e3)) }), window.highlightSection = function (e) { if (!e) return; const t = e.toUpperCase(), o = document.getElementById("agia-sections-container"); o && (o.style.transition = "all 0.3s ease", o.style.color = "#64748b"), document.querySelectorAll(".legend-item").forEach(e => { e.id.replace("legend-", "").toUpperCase() === t ? (e.style.opacity = "1", e.style.filter = "none", e.style.transform = "scale(1.08)", e.style.boxShadow = "0 8px 15px -3px rgba(79, 70, 229, 0.2)", e.style.zIndex = "20") : (e.style.opacity = "0.4", e.style.filter = "grayscale(1)", e.style.transform = "scale(0.96)", e.style.boxShadow = "none") }), document.querySelectorAll(".prompt-section").forEach(e => { (e.dataset.section || "").toUpperCase() === t ? (e.style.opacity = "1", e.style.filter = "none", e.style.transform = "scale(1.02)", e.style.zIndex = "10", e.style.position = "relative", e.style.color = "rgb(30, 41, 59)", e.style.boxShadow = "0 4px 6px -1px rgba(0, 0, 0, 0.1)", e.style.backgroundColor = "") : (e.style.backgroundColor = "transparent", e.style.opacity = "0.8", e.style.filter = "grayscale(1)", e.style.color = "#475569", e.style.transform = "scale(1)", e.style.boxShadow = "none") }) }, window.resetLegend = function () { const e = document.getElementById("agia-sections-container"); e && (e.style.color = ""), document.querySelectorAll(".legend-item").forEach(e => { e.style.opacity = "1", e.style.filter = "none", e.style.transform = "scale(1)", e.style.boxShadow = "none", e.style.zIndex = "" }), document.querySelectorAll(".prompt-section").forEach(e => { e.style.opacity = "1", e.style.filter = "none", e.style.transform = "scale(1)", e.style.zIndex = "", e.style.position = "", e.style.boxShadow = "none", e.style.color = "", e.style.backgroundColor = "" }) }, window.copyPromptWithFeedback = function (e) {
                if (!e || e.disabled) return; const currentPrompt = casesData.find(p => p.id === currentCaseId); const promptIsLocked = currentPrompt && currentPrompt.locked === true; if (!isVaultUnlocked && promptIsLocked) { return window.location.href = 'https://aulagenia.web.app/landing-nuevo.html'; } const t = r(), o = document.createElement("textarea"); o.value = t, o.style.position = "fixed", o.style.left = "-9999px", document.body.appendChild(o), o.select(); try { if (document.execCommand("copy")) { const t = e.querySelector(".copy-icon"), o = e.querySelector(".copy-text"); if (!t || !o) return void console.warn("Copy button structure missing expected elements"); const a = e.className, n = t.innerHTML, r = o.textContent; e.className = "text-[10px] font-bold px-3 py-1.5 rounded-lg bg-teal-500 text-white flex items-center gap-1.5 transition-all", t.innerHTML = "check_circle", o.textContent = "¡Prompt Copiado!", "undefined" != typeof confetti && confetti({ particleCount: 100, spread: 70, origin: { y: .6 } }), setTimeout(() => { e.className = "text-[10px] font-bold px-3 py-1.5 rounded-lg bg-indigo-500 text-white flex items-center gap-1.5 transition-all", t.innerHTML = "arrow_forward", o.textContent = "Pégalo en ChatGPT, Gemini o Claude", setTimeout(() => { e.className = a, t.innerHTML = n, o.textContent = r }, 3500) }, 1500) } } catch (e) {
                    console.error("Error al copiar:", e)
                } finally { o && o.parentNode && o.parentNode.removeChild(o) }
            }; const l = { venta: ["vender", "marketing", "comercial", "lead", "cliente", "negocio", "ingreso", "dinero"], marketing: ["publicidad", "anuncio", "redes", "social", "campaña", "promoción", "difusión"], texto: ["redacción", "copy", "escribir", "blog", "artículo", "guion", "email", "correo"], imagen: ["foto", "diseño", "logo", "visual", "arte", "midjourney", "dall-e", "creativo"], empresa: ["pyme", "emprendimiento", "negocio", "startup", "compañía", "marca"], legal: ["contrato", "abogado", "ley", "norma", "sii", "impuesto", "tributario"], curso: ["educación", "aprender", "taller", "clase", "enseñar", "formación"], ia: ["inteligencia", "gpt", "chatgpt", "midjourney", "claude", "bot", "automatización"], idea: ["creatividad", "brainstorming", "invención", "innovación", "concepto"], plan: ["estrategia", "calendario", "cronograma", "organización", "paso a paso"] }; function i(t, o) { if (!o || 0 === o.length) return e(t); let a = e(t); const n = [...o].sort((e, t) => t.length - e.length), r = new RegExp(`(${n.join("|")})`, "gi"); return a.replace(r, e => `<span class="bg-yellow-200 text-yellow-900 font-bold px-0.5 rounded">${e}</span>`) } function c(e, t = []) {
                const o = document.getElementById("case-list"); document.getElementById("total-display").innerText = casesData.length, 0 !== e.length ? o.innerHTML = e.map(e => {
                    let o = "bg-slate-300", a = "Desconocido"; "beginner" === e.difficulty ? (o = "bg-teal-400", a = "Básico: 15 min") : "intermediate" === e.difficulty ? (o = "bg-indigo-400", a = "Intermedio: 45 min") : "advanced" === e.difficulty && (o = "bg-slate-600", a = "Avanzado: 90-120 min"); const n = i(e.title, t), r = i(e.category, t); let s = ""; if (t.length > 0) { const o = t.some(t => e.title.toLowerCase().includes(t)), a = t.some(t => e.category.toLowerCase().includes(t)); if (!o && !a) { const o = function (e, t) { const o = [e.problem, e.badPrompt]; for (let e of o) { if (!e) continue; const o = e.toLowerCase(), a = t.find(e => o.includes(e)); if (a) { const n = o.indexOf(a), r = Math.max(0, n - 15), s = Math.min(e.length, n + a.length + 25); let l = e.substring(r, s); return r > 0 && (l = "..." + l), s < e.length && (l += "..."), i(l, t) } } return null }(e, t); o && (s = `<div class="mt-1.5 text-[10px] text-slate-500 bg-slate-50 p-1.5 rounded border border-slate-100 flex items-start gap-1">\n                                <span class="material-symbols-rounded text-[10px] text-indigo-400 mt-0.5">manage_search</span>\n                                <span class="leading-tight break-words has-highlights">${o}</span>\n                             </div>`) } } return `\n                <div id="case-item-${e.id}" onclick="loadCase(${e.id})" class="case-item group p-3 rounded-lg cursor-pointer hover:bg-slate-50 hover:shadow-sm transition-all border border-transparent hover:border-indigo-100 relative mb-1">\n                    <div class="flex items-center gap-3">\n                        <div class="w-8 h-8 rounded-lg bg-white border border-slate-100 flex items-center justify-center text-slate-400 group-hover:text-indigo-600 group-hover:bg-indigo-50 transition-colors shadow-sm shrink-0">\n                            <span class="material-symbols-rounded text-[16px]">${e.locked ? "lock" : e.icon}</span>\n                        </div>
                        <div class="flex-1 min-w-0">\n                            <h4 class="text-xs font-bold truncate transition-colors text-slate-700 group-hover:text-indigo-900">${n}</h4>\n                            <div class="flex items-center gap-1.5 mt-0.5">\n                                <span class="w-1.5 h-1.5 rounded-full ${o}" title="${a}"></span>\n                                <span class="text-[10px] text-slate-400 truncate font-medium">${e.description || r}</span>\n                            </div>\n                            ${s}\n                        </div>\n                    </div>\n                </div>\n            `
                }).join("") : o.innerHTML = '<div class="p-8 text-center text-xs text-slate-400 flex flex-col items-center"><span class="material-symbols-rounded text-2xl mb-2 opacity-50">search_off</span>Sin resultados.</div>'
            }
        } document.addEventListener("DOMContentLoaded", () => { initApp(); const e = document.getElementById("sidebar"), t = document.getElementById("mobile-menu-toggle"), o = document.getElementById("close-sidebar-btn"); function a() { e && e.classList.add("-translate-x-full") } t && t.addEventListener("click", function () { e && e.classList.remove("-translate-x-full") }), o && o.classList("click", a); const n = document.getElementById("case-list"); n && n.addEventListener("click", e => { window.innerWidth < 768 && e.target.closest("button") && a() }) });

        // TOOLTIP SYNCHRONIZATION: Update parent title attributes when tip content changes
        (function () {
            const tipObserver = new MutationObserver(() => {
                const tipContainer = document.getElementById('tip-container');
                const tipContent = document.getElementById('detail-example-tip');
                if (tipContainer && tipContent && tipContent.textContent.trim()) {
                    tipContainer.setAttribute('title', tipContent.textContent.trim());
                }
            });

            const validationObserver = new MutationObserver(() => {
                const validationContainer = document.getElementById('validation-container');
                const validationContent = document.getElementById('detail-validation-tip');
                if (validationContainer && validationContent && validationContent.textContent.trim()) {
                    validationContainer.setAttribute('title', validationContent.textContent.trim());
                }
            });

            setTimeout(() => {
                const tipElem = document.getElementById('detail-example-tip');
                const validationElem = document.getElementById('detail-validation-tip');
                if (tipElem) {
                    tipObserver.observe(tipElem, { childList: true, characterData: true, subtree: true });
                }
                if (validationElem) {
                    validationObserver.observe(validationElem, { childList: true, characterData: true, subtree: true });
                }
            }, 1000);
        })();
    </script>
    <div id="coupon-modal"
        class="fixed inset-0 bg-black/50 backdrop-blur-sm z-[100] hidden items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-md w-full p-8 shadow-2xl transform transition-all">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-black text-gray-900">¿Tienes un cupón?</h3><button onclick="closeCouponModal()"
                    class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="none" stroke="currentColor"
                        viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M6 18L18 6M6 6l12 12" />
                    </svg></button>
            </div>
            <div class="mb-6"><label class="block text-sm font-bold text-gray-700 mb-2">Código de descuento
                    (opcional)</label> <input type="text" id="modal-coupon-input" placeholder="Ingresa tu código"
                    class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 uppercase font-mono text-lg"
                    maxlength="20">
                <div id="modal-coupon-message" class="mt-2 text-sm font-medium hidden"></div>
            </div>
            <div id="modal-discount-summary" class="mb-6 p-4 bg-green-50 border-2 border-green-200 rounded-lg hidden">
                <div class="flex justify-between items-center mb-2"><span class="text-gray-600">Precio original:</span>
                    <span class="text-gray-900 font-bold" id="modal-original-price"></span>
                </div>
                <div class="flex justify-between items-center mb-2"><span class="text-green-600 font-bold">Descuento
                        (<span id="modal-discount-label"></span>):</span> <span class="text-green-600 font-bold text-xl"
                        id="modal-discount-amount"></span></div>
                <div class="flex justify-between items-center pt-2 border-t-2 border-green-300"><span
                        class="text-gray-900 font-black text-lg">Total a pagar:</span> <span
                        class="text-3xl font-black text-green-600" id="modal-final-price"></span></div>
                <p class="mt-3 text-xs text-gray-500 italic">* El descuento se aplicará automáticamente en Mercado Pago.
                    Si el cupón no se aplica correctamente, contáctanos antes de completar el pago.</p>
            </div>
        </div>
        <!-- Duplicate coupon modal functions removed - defined in main script block -->
</body>

</html>
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGIA Generator 3.0 | B√≥veda Maestra (High Ticket UX)</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #4f46e5;
            --bg-canvas: #f8fafc;
        }

        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: var(--bg-canvas); 
            color: #1e293b;
            -webkit-font-smoothing: antialiased;
        }
        
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        .custom-scroll::-webkit-scrollbar { width: 5px; height: 5px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in { animation: fadeIn 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        
        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.6);
        }

        .hl-tag { 
            display: inline-flex; align-items: center; padding: 1px 5px; border-radius: 4px; margin: 0 2px; 
            font-weight: 700; font-size: 0.85em; cursor: default; border: 1px solid transparent;
        }
        
        .hl-rol { color: #1e40af; background: #eff6ff; border-color: #dbeafe; }
        .hl-contexto { color: #065f46; background: #ecfdf5; border-color: #d1fae5; }
        .hl-meta { color: #854d0e; background: #fffbeb; border-color: #fef3c7; }
        .hl-restricciones { color: #991b1b; background: #fef2f2; border-color: #fee2e2; }
        .hl-formato { color: #6b21a8; background: #faf5ff; border-color: #f3e8ff; }

        .var-highlight { background-color: #e0f2fe; border-bottom: 2px solid #0284c7; color: #0c4a6e; font-weight: 700; padding: 0 4px; border-radius: 4px; }
        .var-highlight-bad { background-color: #f1f5f9; border-bottom: 2px dotted #94a3b8; color: #64748b; font-weight: 600; padding: 0 2px; }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        /* Expandable Prompt Logic */
        .prompt-collapsed { max-height: 200px; overflow: hidden; position: relative; }
        .prompt-collapsed::after {
            content: ''; position: absolute; bottom: 0; left: 0; right: 0; height: 80px;
            background: linear-gradient(to bottom, transparent, #f8fafc); pointer-events: none;
        }
        .prompt-expanded { max-height: none; overflow: visible; }
        
        /* Search Focus Animation */
        .search-focused { border-color: #4f46e5; box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.1); }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden text-slate-800 bg-slate-50">

    <!-- LOADING OVERLAY -->
    <div id="system-status-overlay" class="fixed inset-0 z-[100] bg-white/90 backdrop-blur-xl flex flex-col items-center justify-center p-6 text-center transition-opacity duration-500">
        <div class="bg-white p-8 rounded-[2rem] shadow-2xl shadow-slate-200 border border-slate-100 max-w-md w-full animate-in zoom-in duration-300">
            <div id="status-icon" class="w-12 h-12 bg-white border border-slate-100 text-indigo-600 rounded-xl flex items-center justify-center mx-auto mb-4 shadow-sm">
                <span class="material-symbols-rounded text-2xl animate-spin">sync</span>
            </div>
            <h2 id="status-title" class="text-lg font-extrabold text-slate-900 mb-1">Cargando B√≥veda...</h2>
            <p id="status-desc" class="text-xs text-slate-500 mb-6">Sincronizando recursos.</p>
            <div class="bg-slate-50 p-3 rounded-lg text-left text-[10px] font-mono text-slate-500 overflow-hidden border border-slate-100">
                <p>> Target: <span class="text-indigo-600 font-semibold">aulagenia.cl/db</span></p>
                <p>> Status: <span id="status-code" class="text-slate-600 font-bold">INITIALIZING...</span></p>
            </div>
            <button id="retry-btn" onclick="window.location.reload()" class="hidden w-full mt-4 py-2 bg-slate-900 text-white rounded-lg font-bold text-xs">Reintentar</button>
        </div>
    </div>

    <!-- HEADER -->
    <header class="bg-white border-b border-slate-200 z-30 flex-none h-14">
        <div class="h-full px-4 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 bg-gradient-to-br from-indigo-600 to-violet-600 rounded-lg flex items-center justify-center text-white font-black text-lg shadow-md shadow-indigo-500/20">A</div>
                <div>
                    <h1 class="text-sm font-extrabold text-slate-900 leading-none">AGIA Generator <span class="text-indigo-600">3.0</span></h1>
                    <p class="text-[9px] text-slate-400 font-bold tracking-widest uppercase">AI Prompt Engineering Lab</p>
                </div>
            </div>
            
            <div class="hidden md:flex flex-1 mx-6 space-x-1 overflow-x-auto no-scrollbar mask-gradient-r" id="category-nav"></div>

            <div class="flex gap-2">
                <!-- NEW DOWNLOAD BUTTON -->
                <button onclick="downloadPDF()" class="hidden md:flex text-slate-500 hover:text-indigo-600 transition-colors items-center gap-2 text-xs font-bold px-3 py-1.5 border border-slate-200 rounded-lg hover:border-indigo-200">
                    <span class="material-symbols-rounded text-base">download</span> <span class="hidden lg:inline">Descargar B√≥veda</span>
                </button>
                <button onclick="showTutorial()" class="text-slate-400 hover:text-indigo-600 transition-colors p-1.5">
                    <span class="material-symbols-rounded text-xl">help</span>
                </button>
                <button onclick="openPaywall()" class="bg-slate-900 hover:bg-slate-800 text-white px-3 py-1.5 rounded-lg text-xs font-bold shadow-md flex items-center gap-1.5 transition-transform hover:-translate-y-0.5">
                    <span class="material-symbols-rounded text-sm text-yellow-400">lock_open</span>
                    <span class="hidden sm:inline">Desbloquear</span>
                </button>
            </div>
        </div>
    </header>

    <!-- APP LAYOUT -->
    <div class="flex flex-1 overflow-hidden w-full relative bg-slate-50">
        
        <!-- SIDEBAR -->
        <aside class="w-full md:w-64 lg:w-72 flex flex-col bg-white border-r border-slate-200 z-20 flex-none absolute md:relative h-full transform -translate-x-full md:translate-x-0 transition-transform duration-300" id="sidebar">
            <div class="p-4 border-b border-slate-100">
                <!-- DESTACADO: BUSCADOR MEJORADO -->
                <div class="relative group">
                    <span class="material-symbols-rounded absolute left-3 top-2.5 text-indigo-500 text-xl group-focus-within:text-indigo-600 transition-colors">manage_search</span>
                    <input type="text" id="searchInput" placeholder="Buscar en la B√≥veda..." 
                        class="w-full pl-10 pr-3 py-2.5 bg-white border-2 border-indigo-50 rounded-xl text-sm font-medium focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 outline-none transition-all placeholder:text-slate-400 shadow-sm"
                        onkeyup="filterCases()">
                </div>
            </div>
            
            <!-- COMPLEXITY LEGEND -->
            <div class="bg-slate-50 px-4 py-2 border-b border-slate-100 flex justify-between items-center text-[9px] text-slate-500 font-medium">
                <div class="flex items-center gap-1" title="Simple: Ahorra ~2 HH"><span class="w-2 h-2 rounded-full bg-emerald-400 shadow-sm shadow-emerald-200"></span> 2h</div>
                <div class="flex items-center gap-1" title="Medio: Ahorra ~5-10 HH"><span class="w-2 h-2 rounded-full bg-amber-400 shadow-sm shadow-amber-200"></span> 10h</div>
                <div class="flex items-center gap-1" title="Complejo: Ahorra ~20+ HH"><span class="w-2 h-2 rounded-full bg-rose-400 shadow-sm shadow-rose-200"></span> 20h+</div>
            </div>

            <div class="flex-1 overflow-y-auto custom-scroll p-3 space-y-1" id="case-list"></div>
            <div class="p-3 border-t border-slate-100 bg-slate-50/50 text-[10px] text-slate-400 flex justify-between px-4 font-medium">
                <span>Estado: Online</span>
                <span>Casos: <span id="total-display" class="text-slate-700 font-bold">0</span></span>
            </div>
        </aside>

        <!-- WORKSPACE -->
        <main class="flex-1 flex flex-col overflow-hidden relative w-full h-full bg-slate-100/50">
            <div id="workspace-empty" class="hidden flex-col items-center justify-center h-full text-center p-8">
                <div class="w-24 h-24 bg-white rounded-full flex items-center justify-center mb-4 shadow-xl text-indigo-200"><span class="material-symbols-rounded text-5xl">compare_arrows</span></div>
                <h3 class="text-lg font-bold text-slate-800">Selecciona un caso</h3>
                <p class="text-xs text-slate-500">Comienza tu comparativa en el men√∫ lateral.</p>
            </div>

            <div id="case-detail" class="flex flex-col h-full w-full p-4 gap-4 overflow-hidden">
                <!-- TOP BAR -->
                <div class="flex-none bg-white p-3 rounded-xl border border-slate-200 shadow-sm flex items-center justify-between gap-4">
                    <div class="min-w-0 flex-1">
                        <div class="flex items-center gap-2 mb-1">
                            <span id="detail-category-badge" class="text-[9px] font-bold uppercase tracking-wider px-2 py-0.5 rounded border bg-slate-50 text-slate-600 border-slate-200">CAT</span>
                            
                            <!-- MEJORA: AI SUGGESTION CLARO -->
                            <div id="ai-suggestion-badge" class="hidden text-[9px] font-bold uppercase tracking-wider px-3 py-0.5 rounded-full border bg-slate-900 text-white border-slate-700 items-center gap-1.5 shadow-sm">
                                <span class="material-symbols-rounded text-[12px] text-yellow-400">star</span>
                                <span>IA RECOMENDADA: <span id="ai-name" class="text-yellow-400">CHATGPT</span></span>
                            </div>
                        </div>
                        <h2 id="detail-title" class="text-lg font-bold text-slate-900 leading-tight truncate">T√≠tulo del Caso</h2>
                        <p id="detail-problem" class="text-xs text-slate-500 truncate mt-0.5 font-medium"></p>
                    </div>
                    <div class="flex-none hidden lg:block text-right">
                        <div class="text-[9px] text-slate-400 font-bold uppercase tracking-widest">Modo Comparaci√≥n</div>
                        <div class="flex items-center gap-1 text-xs font-bold text-slate-700 justify-end">
                            <span>VS</span> <span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span>
                        </div>
                    </div>
                </div>

                <!-- SPLIT VIEW -->
                <div class="flex-1 flex flex-col lg:flex-row gap-4 min-h-0">
                    <!-- LEFT -->
                    <div class="flex-1 flex flex-col bg-white rounded-xl border border-slate-200 overflow-hidden shadow-sm h-full">
                        <div class="bg-slate-50/80 px-4 py-2 border-b border-slate-100 flex justify-between items-center flex-none h-10">
                            <div class="flex items-center gap-2 text-slate-500">
                                <span class="material-symbols-rounded text-base">cancel</span>
                                <span class="text-[10px] font-bold uppercase tracking-widest">M√©todo Com√∫n</span>
                            </div>
                        </div>
                        <div class="flex-1 overflow-y-auto custom-scroll p-4 space-y-4">
                            <div>
                                <label class="text-[9px] font-bold text-slate-400 uppercase mb-1.5 block">Prompt (Novato)</label>
                                <div id="bad-prompt-rendered" class="font-mono text-xs text-slate-600 bg-slate-50 p-3 rounded-lg border border-slate-200 italic leading-relaxed"></div>
                            </div>
                            <div class="border-t border-dashed border-slate-200 pt-3">
                                <label class="text-[9px] font-bold text-slate-400 uppercase mb-1.5 block">Resultado Pobre</label>
                                <div id="bad-result-preview" class="text-xs text-slate-500 leading-relaxed bg-white/50 rounded-lg"></div>
                            </div>
                        </div>
                    </div>

                    <!-- RIGHT (AGIA PRO) -->
                    <div class="flex-1 flex flex-col bg-white rounded-xl border border-indigo-200 overflow-hidden shadow-lg shadow-indigo-100 relative h-full ring-1 ring-indigo-50">
                        <div class="bg-gradient-to-r from-indigo-600 to-violet-700 text-white px-4 py-2 flex justify-between items-center flex-none h-10">
                            <div class="flex items-center gap-2">
                                <span class="material-symbols-rounded text-base">verified</span>
                                <span class="text-[10px] font-bold uppercase tracking-widest">M√©todo AGIA Pro</span>
                            </div>
                            <button onclick="copyPrompt()" class="flex items-center gap-1.5 text-[10px] font-bold bg-white/10 hover:bg-white/20 px-2.5 py-1 rounded transition-colors border border-white/20 hover:scale-105 active:scale-95 shadow-sm">
                                <span class="material-symbols-rounded text-xs">content_copy</span> COPIAR
                            </button>
                        </div>

                        <div class="flex-1 overflow-y-auto custom-scroll p-0 relative flex flex-col">
                            <!-- Code Area with Expand Logic -->
                            <div class="relative bg-slate-50 p-4 border-b border-indigo-50 flex-none group/expand">
                                <div class="flex justify-between items-end mb-2">
                                    <label class="text-[9px] font-bold text-indigo-500 uppercase">Estructura Optimizada</label>
                                    <span class="text-[9px] font-bold text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded border border-emerald-100 flex items-center gap-1"><span class="material-symbols-rounded text-[10px]">bolt</span> High Performance</span>
                                </div>
                                
                                <!-- EXPANDABLE CONTAINER -->
                                <div id="prompt-container" class="prompt-collapsed transition-all duration-300">
                                    <div id="detail-prompt-rendered" class="font-mono text-sm leading-relaxed text-slate-800 whitespace-pre-wrap pb-2"></div>
                                </div>
                                
                                <!-- EXPAND BUTTON -->
                                <button id="expand-btn" onclick="togglePrompt()" class="absolute bottom-4 left-1/2 transform -translate-x-1/2 z-10 bg-white border border-slate-200 text-indigo-600 text-[10px] font-bold px-3 py-1.5 rounded-full shadow-sm hover:shadow-md transition-all flex items-center gap-1">
                                    <span class="material-symbols-rounded text-sm">unfold_more</span> Ver Completo
                                </button>
                            </div>

                            <!-- Specs & Result -->
                            <div class="bg-white p-4 space-y-4 flex-1">
                                <div id="interactive-legend" class="flex flex-wrap gap-2">
                                    <span class="legend-item cursor-pointer text-[10px] px-2 py-0.5 bg-slate-50 border border-slate-200 rounded text-slate-500 hover:border-blue-300 hover:text-blue-600 transition-colors" data-type="r">‚óè Rol</span>
                                    <span class="legend-item cursor-pointer text-[10px] px-2 py-0.5 bg-slate-50 border border-slate-200 rounded text-slate-500 hover:border-emerald-300 hover:text-emerald-600 transition-colors" data-type="c">‚óè Contexto</span>
                                    <span class="legend-item cursor-pointer text-[10px] px-2 py-0.5 bg-slate-50 border border-slate-200 rounded text-slate-500 hover:border-amber-300 hover:text-amber-600 transition-colors" data-type="m">‚óè Meta</span>
                                    <span class="legend-item cursor-pointer text-[10px] px-2 py-0.5 bg-slate-50 border border-slate-200 rounded text-slate-500 hover:border-red-300 hover:text-red-600 transition-colors" data-type="l">‚óè Restr.</span>
                                    <span class="legend-item cursor-pointer text-[10px] px-2 py-0.5 bg-slate-50 border border-slate-200 rounded text-slate-500 hover:border-purple-300 hover:text-purple-600 transition-colors" data-type="f">‚óè Formato</span>
                                </div>

                                <div id="tech-specs" class="grid grid-cols-1 md:grid-cols-2 gap-3 pt-2 border-t border-slate-100">
                                    <div id="tip-container" class="hidden bg-amber-50 rounded-lg p-2.5 border border-amber-100">
                                        <div class="flex items-center gap-1.5 mb-1 text-amber-600"><span class="material-symbols-rounded text-sm">lightbulb</span><span class="text-[9px] font-bold uppercase">Ingenier√≠a</span></div>
                                        <p id="detail-example-tip" class="text-[11px] text-amber-900 leading-tight"></p>
                                    </div>
                                    <div id="validation-container" class="hidden bg-emerald-50 rounded-lg p-2.5 border border-emerald-100">
                                        <div class="flex items-center gap-1.5 mb-1 text-emerald-600"><span class="material-symbols-rounded text-sm">fact_check</span><span class="text-[9px] font-bold uppercase">Validaci√≥n</span></div>
                                        <p id="detail-validation-tip" class="text-[11px] text-emerald-900 leading-tight"></p>
                                    </div>
                                </div>

                                <div class="pt-2">
                                    <div class="text-[9px] font-bold text-indigo-400 uppercase mb-1.5 flex gap-1 items-center"><span class="material-symbols-rounded text-xs">auto_awesome</span> Resultado Esperado</div>
                                    <div id="good-result-preview" class="text-xs text-slate-600 leading-relaxed font-medium bg-slate-50 p-2.5 rounded-lg border border-slate-100"></div>
                                </div>
                            </div>
                        </div>

                        <div id="premium-lock" class="hidden absolute inset-0 z-20 flex flex-col items-center justify-center glass-panel text-center p-6">
                            <div class="w-12 h-12 bg-slate-900 rounded-2xl flex items-center justify-center shadow-xl mb-3 rotate-6 text-white"><span class="material-symbols-rounded text-2xl">lock</span></div>
                            <h3 class="text-lg font-black text-slate-900 mb-1">Contenido VIP</h3>
                            <button onclick="openPaywall()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2.5 rounded-lg font-bold shadow-lg text-xs mt-3 transform transition-all hover:scale-105">DESBLOQUEAR</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- MODALS & TOAST -->
    <div id="toast" class="fixed bottom-10 right-10 z-[70] transform translate-x-full transition-all duration-500">
        <!-- Toast content injected by JS -->
    </div>
    
    <div id="sales-toast" class="fixed bottom-16 left-6 z-[50] pointer-events-none md:pointer-events-auto transition-all duration-500 translate-y-24 opacity-0"></div>

    <div id="tutorial-modal" class="hidden fixed inset-0 z-[90] flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-slate-900/80 backdrop-blur-sm transition-opacity" onclick="closeTutorial()"></div>
        <div class="relative bg-white rounded-2xl shadow-2xl max-w-2xl w-full overflow-hidden animate-in zoom-in duration-200">
            <div class="p-6 border-b border-slate-100 flex justify-between items-center">
                <h3 class="font-bold text-lg">Tutorial R√°pido</h3>
                <button onclick="closeTutorial()" class="text-slate-400 hover:text-slate-600"><span class="material-symbols-rounded">close</span></button>
            </div>
            <div class="p-6 overflow-y-auto max-h-[70vh]">
                <div class="aspect-video bg-slate-100 rounded-xl mb-6 flex items-center justify-center text-slate-300 relative group cursor-pointer overflow-hidden">
                    <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1611162617474-5b21e879e113?q=80&w=1000&auto=format&fit=crop')] bg-cover bg-center opacity-50"></div>
                    <span class="material-symbols-rounded text-5xl relative z-10 bg-white/20 p-4 rounded-full backdrop-blur text-white shadow-xl group-hover:scale-110 transition-transform">play_arrow</span>
                </div>
                <div class="grid grid-cols-3 gap-4 text-center">
                    <div class="p-4 bg-slate-50 rounded-lg"><div class="font-bold text-indigo-600 text-sm mb-1">1. Elige</div><p class="text-[10px] text-slate-500">Selecciona un caso real del men√∫.</p></div>
                    <div class="p-4 bg-slate-50 rounded-lg"><div class="font-bold text-emerald-600 text-sm mb-1">2. Compara</div><p class="text-[10px] text-slate-500">Mira la diferencia t√©cnica.</p></div>
                    <div class="p-4 bg-slate-50 rounded-lg"><div class="font-bold text-amber-600 text-sm mb-1">3. Copia</div><p class="text-[10px] text-slate-500">Usa el prompt optimizado.</p></div>
                </div>
            </div>
        </div>
    </div>

    <div id="paywall-modal" class="hidden fixed inset-0 z-[90] flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-slate-900/90 backdrop-blur-sm transition-opacity" onclick="closePaywall()"></div>
        <div class="relative bg-white rounded-2xl shadow-2xl max-w-sm w-full p-8 text-center animate-in zoom-in duration-200">
            <div class="w-12 h-12 bg-yellow-400 rounded-full flex items-center justify-center mx-auto mb-4 font-black text-xl shadow-lg">%</div>
            <h3 class="text-xl font-black text-slate-900 mb-2">Oferta Limitada</h3>
            <p class="text-xs text-slate-500 mb-6">Acceso total a la B√≥veda + Curso AGIA.</p>
            <button onclick="closePaywall()" class="w-full bg-slate-900 text-white py-3 rounded-xl font-bold text-sm shadow-xl hover:scale-105 transition-transform">Desbloquear por $29</button>
            <button onclick="closePaywall()" class="mt-3 text-xs text-slate-400 hover:text-slate-600">No gracias</button>
        </div>
    </div>

    <script type="module">
        // Embedded Database to fix Fetch Error
        const createCase = (id, cat, title, icon, problem, badPrompt, badResPreview, goodPromptTagged, exampleTip, validationTip, goodResPreview, suggestedAI, locked = false, isTool = false, difficulty = 'beginner') => ({
            id, category: cat, title, icon, problem, 
            badPrompt, 
            badResponsePreview: badResPreview,
            agiaPromptTagged: goodPromptTagged, 
            exampleTip, validationTip,
            previewResponse: goodResPreview,
            suggestedAI, locked, isTool, difficulty
        });

        const allCases = [
            
            // ==========================================
            // üöÄ PRODUCTIVIDAD (101-113)
            // ==========================================
            createCase(101, 'productivity', 'El Limpiador de Data', 'cleaning_services', 'Excel: Datos sucios y desordenados.', 
                'Arregla estos nombres que est√°n en may√∫sculas y con espacios raros.',
                '<div class="text-xs text-slate-500 italic">"Juan Perez<br>Maria Gomez"</div><div class="mt-2 text-[10px] text-red-600 font-bold flex gap-1"><span class="material-symbols-outlined text-[12px]">error</span> Falla: No te dio la f√≥rmula, solo el texto procesado.</div>', 
                '{r}Experto Excel.{/r} {c}Tengo datos "sucios" copiados de la web (Celda A2) con espacios extra y may√∫sculas irregulares.{/c} {m}Genera una f√≥rmula anidada para limpiar todo.{/m} {f}Bloque de c√≥digo.{/f}', 
                'Entrada: "  JUAN   perez ".', 'Verifica espacios.', 
                '<div class="font-mono text-xs bg-slate-900 text-green-400 p-2 rounded border-l-4 border-green-600">=NOMPROPIO(ESPACIOS(LIMPIAR(A2)))</div>', 'gemini', false, false, 'beginner'),

            createCase(102, 'productivity', 'El "No" Diplom√°tico', 'block', 'Email: Rechazar sin perder cliente.', 
                'Dile al cliente que no puedo hacer eso gratis.',
                '<div class="text-xs text-slate-500 italic">"No podemos hacerlo gratis. Saludos."</div>', 
                '{r}Gerente de Cuentas.{/r} {c}Cliente pide extras fuera de presupuesto (Scope Creep).{/c} {m}Rechaza la gratuidad pero ofrece cotizaci√≥n (Upsell).{/m} {l}No uses la palabra "No" al inicio.{/l} {f}Email emp√°tico.{/f}', 
                'T√©cnica: S√≠ condicional.', 'Convierte problema en venta.', 
                '<div class="bg-white p-2 text-xs border border-slate-200">"Me encanta la idea. Para implementarla sin afectar los plazos, he preparado esta cotizaci√≥n adicional..."</div>', 'chatgpt', false, false, 'intermediate'),

            createCase(103, 'productivity', 'Resumidor Reuniones', 'groups', 'Gesti√≥n: De audio a acci√≥n.',
                'Resume esta reuni√≥n larga.',
                '<div class="text-xs text-slate-500 italic">"Hablaron de varios temas..."</div>', 
                '{r}Project Manager.{/r} {c}Transcripci√≥n de reuni√≥n desordenada.{/c} {m}Extrae solo Tareas y Responsables.{/m} {f}Tabla Markdown.{/f}',
                'Busca verbos de acci√≥n.', 'Ignora charla social.',
                '<table class="w-full text-[10px] border"><thead><tr class="bg-blue-50"><th>Tarea</th><th>Owner</th></tr></thead><tbody><tr><td>Enviar presupuesto</td><td>Ana</td></tr></tbody></table>', 'claude', false, false, 'beginner'),

            createCase(104, 'productivity', 'Traductor Corporativo', 'translate', 'Email: Ingl√©s profesional.', 
                'Traduce esto para mi jefe gringo: "Hola jefe, hay un problema".',
                '<div class="text-xs text-slate-500 italic">"Hello boss, there is a problem." (Muy informal)</div>', 
                '{r}Editor Ejecutivo.{/r} {c}Reporte de problema para CEO.{/c} {m}Traduce a ingl√©s corporativo formal (C-Level).{/m} {f}Email.{/f}', 
                'Evita "Boss".', 'Usa "Challenge" no "Problem".', 
                '<div class="bg-white p-2 text-xs border border-slate-200">"Dear Mr. Smith, I am writing to address a recent challenge regarding..."</div>', 'chatgpt', false, false, 'intermediate'),

            createCase(105, 'productivity', 'Resumen Hilos Email', 'mail_lock', 'Gesti√≥n: 50 correos reenviados.',
                '¬øEn qu√© qued√≥ esta conversaci√≥n de correos?',
                '<div class="text-xs text-slate-500 italic">"Parece que aprobaron el dise√±o."</div>', 
                '{r}Asistente Ejecutivo.{/r} {c}Hilo de correos confuso.{/c} {m}Resume cronol√≥gicamente e identifica qui√©n tiene la pelota ahora.{/m} {f}Bullets + Estado Actual.{/f}',
                'Cronolog√≠a inversa.', 'Identifica bloqueos.',
                '<p class="text-xs"><strong>Estado:</strong> üî¥ Esperando aprobaci√≥n de Pedro desde el Martes.</p>', 'claude', false, false, 'intermediate'),

            createCase(106, 'productivity', 'Organizador Archivos', 'folder_open', 'Gesti√≥n: Caos de versiones.',
                'Nombres para mis archivos: final, final2...',
                '<div class="text-xs text-slate-500 italic">"Ponle la fecha."</div>', 
                '{r}Experto Documental.{/r} {c}Caos de versiones.{/c} {m}Estructura de nombrado ISO 8601.{/m} {f}Formato + Ejemplo.{/f}',
                'Fecha invertida.', 'Usa v01, v02.',
                '<code class="bg-slate-100 text-xs p-1">2024-12-31_Proyecto_Tipo_v03.pdf</code>', 'chatgpt', false, false, 'beginner'),

            createCase(107, 'productivity', 'Time Blocking', 'schedule', 'Gesti√≥n: Horario productivo.',
                'Hazme un horario para trabajar mejor.',
                '<div class="text-xs text-slate-500 italic">"9:00 Trabajar. 10:00 Descanso."</div>', 
                '{r}Coach Productividad.{/r} {c}Me distraigo f√°cil.{/c} {m}Horario con Bloques de Trabajo Profundo (Deep Work).{/m} {f}Tabla.{/f}',
                'Sin reuniones AM.', 'Bloques de 90 min.',
                '<div class="bg-indigo-50 p-2 text-xs">ü¶Å <strong>08:00-11:00:</strong> Deep Work (Sin celular).</div>', 'chatgpt', false, false, 'beginner'),

            createCase(108, 'productivity', 'Networking LinkedIn', 'connect_without_contact', 'Social: Contactar en fr√≠o.',
                'Mensaje para agregar a un gerente en LinkedIn.',
                '<div class="text-xs text-slate-500 italic">"Hola, busco trabajo." (Ignorado)</div>', 
                '{r}Experto Networking.{/r} {c}Quiero conectar sin pedir nada a√∫n.{/c} {m}Nota de conexi√≥n elogiando un logro reciente suyo.{/m} {f}Max 300 caracteres.{/f}',
                'Personaliza.', 'No vendas.',
                '<p class="text-xs italic">"Hola Ana, le√≠ tu post sobre IA y coincido totalmente. Me encantar√≠a conectar..."</p>', 'claude', false, false, 'intermediate'),

            createCase(109, 'productivity', 'Feedback Constructivo', 'thumbs_up_down', 'RRHH: Corregir empleado.',
                'Dile a Juan que trabaja lento.',
                '<div class="text-xs text-slate-500 italic">"Juan, ap√∫rate m√°s."</div>', 
                '{r}L√≠der Emp√°tico.{/r} {c}Empleado lento pero talentoso.{/c} {m}Feedback modelo SBI (Situaci√≥n-Comportamiento-Impacto).{/m} {f}Guion.{/f}',
                'Enfoca en impacto.', 'Cierra con acuerdo.',
                '<div class="bg-white p-2 text-xs border border-yellow-200">"Juan, cuando entregas tarde (C), el equipo de dise√±o se bloquea (I)..."</div>', 'chatgpt', false, false, 'intermediate'),

            createCase(110, 'productivity', 'Event Planner', 'event', 'Gesti√≥n: Fiesta empresa.',
                'Lista de cosas para la fiesta de fin de a√±o.',
                '<div class="text-xs text-slate-500 italic">"Comida, bebida, m√∫sica."</div>', 
                '{r}Event Planner.{/r} {c}Fiesta 50 pax.{/c} {m}Checklist cronol√≥gico con detalles log√≠sticos.{/m} {f}Lista por semanas.{/f}',
                'Dietas especiales.', 'Plan B lluvia.',
                '<p class="text-xs">üìÖ <strong>1 Mes antes:</strong> Reservar sal√≥n y DJ.</p>', 'gemini', false, false, 'beginner'),

            createCase(111, 'productivity', 'Carta Renuncia', 'logout', 'RRHH: Salir bien.',
                'Carta de renuncia. Me voy a la competencia.',
                '<div class="text-xs text-slate-500 italic">"Chao jefe, renuncio."</div>', 
                '{r}Consultor Carrera.{/r} {c}Renuncia estrat√©gica.{/c} {m}Carta formal agradecida, ofreciendo transici√≥n.{/m} {l}No menciones a d√≥nde vas.{/l} {f}Carta.{/f}',
                'Ofrece capacitar.', 'Puertas abiertas.',
                '<div class="bg-white p-2 text-xs border border-slate-200">"...agradezco las oportunidades y me comprometo a dejar todo al d√≠a..."</div>', 'chatgpt', false, false, 'intermediate'),

            createCase(112, 'productivity', 'Brainstorming SCAMPER', 'lightbulb', 'Creatividad: Ideas negocio.',
                'Ideas para vender m√°s caf√©.',
                '<div class="text-xs text-slate-500 italic">"Haz promociones 2x1."</div>', 
                '{r}Innovador.{/r} {c}Cafeter√≠a estancada.{/c} {m}7 ideas disruptivas usando m√©todo SCAMPER.{/m} {f}Lista.{/f}',
                'Sustituir, Combinar...', 'Ideas locas.',
                '<p class="text-xs"><strong>Combinar:</strong> Caf√© + Librer√≠a (Blind Date with a Book).</p>', 'chatgpt', false, false, 'advanced'),

            createCase(113, 'productivity', 'Respuesta Queja', 'support_agent', 'Soporte: Cliente furioso.',
                'Responde a cliente enojado por retraso.',
                '<div class="text-xs text-slate-500 italic">"Calma, ya llega."</div>', 
                '{r}Customer Success.{/r} {c}Retraso de env√≠o.{/c} {m}Disculpa radical + Explicaci√≥n honesta + Compensaci√≥n.{/m} {f}Email.{/f}',
                'No te excuses.', 'Ofrece env√≠o gratis.',
                '<div class="bg-white p-2 text-xs border border-red-100">"...te pido disculpas sinceras. He reembolsado el env√≠o como compensaci√≥n."</div>', 'chatgpt', false, false, 'intermediate'),

            // ==========================================
            // üí∞ FINANZAS (201-210)
            // ==========================================
            createCase(201, 'finance', 'Analista Buffett', 'trending_up', 'Inversi√≥n: An√°lisis Balance.',
                '¬øInvierto en esta empresa? Mira los n√∫meros.',
                '<div class="text-xs text-slate-500 italic">"S√≠, se ve bien."</div>', 
                '{r}Analista Value.{/r} {c}Balance General.{/c} {m}Calcula ratios clave (Deuda/Equity, ROE) y da veredicto.{/m} {f}Tabla + Conclusi√≥n.{/f}',
                'Busca deuda alta.', 'Veredicto num√©rico.',
                '<p class="text-xs"><strong>Veredicto:</strong> <span class="bg-red-100 text-red-800 font-bold">RIESGO</span>. Deuda supera 3x el patrimonio.</p>', 'claude', true, false, 'advanced'),

            createCase(202, 'finance', 'Bola de Nieve', 'snowboarding', 'Deudas: Plan de pago.',
                'Tengo muchas deudas, ay√∫dame.',
                '<div class="text-xs text-slate-500 italic">"Paga la m√°s grande primero."</div>', 
                '{r}Asesor Financiero.{/r} {c}M√∫ltiples deudas, poco flujo.{/c} {m}Plan matem√°tico "Bola de Nieve" (menor saldo primero).{/m} {f}Tabla meses.{/f}',
                'Victorias r√°pidas.', 'Fecha libertad.',
                '<table class="w-full text-[10px] border"><tr><td>Mes 1</td><td>Pagar Tarjeta A</td></tr></table>', 'chatgpt', false, false, 'intermediate'),

            createCase(203, 'finance', 'Broker Hipotecario', 'real_estate_agent', 'Inmobiliario: Elegir cr√©dito.',
                '¬øBanco A (4.5%) o Banco B (4.7%)?',
                '<div class="text-xs text-slate-500 italic">"Banco A porque la tasa es menor." (Error: Ignora seguros)</div>', 
                '{r}Corredor Matem√°tico.{/r} {c}Comparativa Cr√©ditos.{/c} {m}Calcula Costo Final considerando Seguros y CAE.{/m} {f}Ahorro real en $$.{/f}',
                'Mira el CAE.', 'Seguro desgravamen.',
                '<p class="text-xs text-green-700 font-bold">Gana Banco B. Ahorro total: $2.5M (por seguros m√°s baratos).</p>', 'gemini', false, false, 'advanced'),

            createCase(204, 'finance', 'Calculadora FIRE', 'savings', 'Retiro: Jubilar joven.',
                '¬øCu√°nto necesito para jubilarme a los 40?',
                '<div class="text-xs text-slate-500 italic">"Mucho dinero, ahorra harto."</div>', 
                '{r}Planner FIRE.{/r} {c}Gasto mensual $1000.{/c} {m}Calcula "N√∫mero FIRE" (Regla del 4%) y a√±os faltantes.{/m} {f}Cifra exacta.{/f}',
                'Gasto x 300.', 'Tasa retiro 4%.',
                '<div class="bg-slate-50 p-2 text-xs">Meta: <strong>$300,000 USD</strong>. Faltan: 14 a√±os.</div>', 'chatgpt', false, false, 'intermediate'),

            createCase(205, 'finance', 'Comparador Seguros', 'health_and_safety', 'Seguros: ¬øCu√°l elijo?',
                '¬øPlan barato con copago alto o plan caro con copago bajo?',
                '<div class="text-xs text-slate-500 italic">"Mejor el plan caro por si acaso."</div>', 
                '{r}Corredor Seguros.{/r} {c}Persona sana.{/c} {m}Calcula "Punto de Equilibrio" (visitas al a√±o para que convenga).{/m} {f}Matem√°tica.{/f}',
                'Calcula gasto anual.', 'Considera urgencias.',
                '<p class="text-xs">Si vas al m√©dico menos de 8 veces al a√±o, <strong>elige el Plan Barato</strong>.</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(206, 'finance', 'Explicador Impuestos', 'receipt_long', 'Impuestos: ¬øQu√© es la retenci√≥n?',
                'Expl√≠came la retenci√≥n de boletas f√°cil.',
                '<div class="text-xs text-slate-500 italic">"Es el art√≠culo 42 de la ley de renta..."</div>', 
                '{r}Contador Amigo.{/r} {c}Freelance confundido.{/c} {m}Explica con analog√≠a de "Alcanc√≠a Forzosa".{/m} {f}Explicaci√≥n simple.{/f}',
                'Devoluci√≥n abril.', 'Previsi√≥n social.',
                '<p class="text-xs">"El estado te guarda esa plata en una alcanc√≠a. En abril la rompen para pagar tu salud..."</p>', 'chatgpt', false, false, 'beginner'),

            createCase(207, 'finance', 'Evaluador Proyectos', 'calculate', 'Negocios: ¬øEs rentable?',
                'Quiero vender completos. ¬øEs buen negocio?',
                '<div class="text-xs text-slate-500 italic">"S√≠, a la gente le gusta comer."</div>', 
                '{r}Ingeniero Comercial.{/r} {c}Inversi√≥n $1M.{/c} {m}Calcula Punto de Equilibrio (cu√°ntos vender para recuperar).{/m} {f}C√°lculos.{/f}',
                'Costos fijos vs variables.', 'Meses retorno.',
                '<p class="text-xs">Necesitas vender <strong>1,000 completos</strong> para recuperar tu inversi√≥n inicial.</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(208, 'finance', 'Gastos Hormiga', 'coffee', 'Ahorro: Caf√© diario.',
                'Gasto mucho en caf√©. ¬øImporta?',
                '<div class="text-xs text-slate-500 italic">"S√≠, deber√≠as ahorrar."</div>', 
                '{r}Coach Financiero.{/r} {c}Gasto $3k diario.{/c} {m}Proyecta costo a 10 a√±os con inter√©s compuesto.{/m} {f}Cifra shock.{/f}',
                'Inter√©s compuesto.', 'Costo oportunidad.',
                '<p class="text-xs font-bold text-red-600">Est√°s perdiendo $15 Millones (el valor de un auto nuevo).</p>', 'chatgpt', false, false, 'beginner'),

            createCase(209, 'finance', 'Negociador Deuda', 'call_made', 'Deudas: Repactar.',
                'No puedo pagar la cuota este mes. ¬øQu√© digo?',
                '<div class="text-xs text-slate-500 italic">"Perd√≥n, no tengo plata."</div>', 
                '{r}Abogado Insolvencia.{/r} {c}Iliquidez temporal.{/c} {m}Script para pedir meses de gracia sin mostrar quiebra.{/m} {f}Guion.{/f}',
                'Muestra voluntad.', 'Pide opciones.',
                '<div class="bg-white p-2 text-xs border border-indigo-100">"Tengo toda la intenci√≥n de pagar, pero necesito reprogramar..."</div>', 'chatgpt', false, false, 'advanced'),

            createCase(210, 'finance', 'Diversificaci√≥n', 'pie_chart', 'Inversi√≥n: Portafolio.',
                'Tengo 10 millones. ¬øD√≥nde los pongo?',
                '<div class="text-xs text-slate-500 italic">"Compra Bitcoin."</div>', 
                '{r}Asesor Inversiones.{/r} {c}Perfil moderado.{/c} {m}Asignaci√≥n de activos (Asset Allocation) porcentual.{/m} {f}Gr√°fico texto.{/f}',
                'Renta fija vs variable.', 'ETFs.',
                '<p class="text-xs">40% S&P500 (Crecimiento) | 40% Dep√≥sitos (Seguridad) | 20% Caja.</p>', 'gemini', false, false, 'intermediate'),

            // ==========================================
            // üî• VENTAS (301-313, 406, 502-507)
            // ==========================================
            createCase(301, 'sales', 'FBI Salary', 'verified_user', 'Negociaci√≥n: Aumento sueldo.', 
                'Quiero pedir aumento. Guion.',
                '<div class="text-xs text-slate-500 italic">"Jefe, necesito plata."</div>', 
                '{r}Negociador FBI.{/r} {c}Buenos resultados.{/c} {m}Guion basado en Valor y Preguntas Calibradas.{/m} {f}Di√°logo.{/f}', 
                '¬øC√≥mo se supone que...?','Anclaje.', 
                '<p class="text-xs">"¬øC√≥mo puedo seguir aportando este valor si mi compensaci√≥n no refleja el mercado?"</p>', 'chatgpt', false, false, 'advanced'),

            createCase(302, 'sales', 'Calendario Contenido', 'calendar_today', 'RRSS: Ideas Instagram.',
                'Ideas para posts de ropa.',
                '<div class="text-xs text-slate-500 italic">"Sube fotos de ropa."</div>', 
                '{r}Estratega Digital.{/r} {c}Marca ropa sustentable.{/c} {m}Matriz semanal (Educar, Entretener, Vender).{/m} {f}Tabla con Ganchos.{/f}',
                'Hooks visuales.', 'No solo venta.',
                '<p class="text-xs"><strong>Lun:</strong> "¬øTu ropa es t√≥xica?" (Educar).</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(303, 'sales', 'Cold Email', 'mail', 'Ventas: Email en fr√≠o.',
                'Ofrecer webs a dentistas.',
                '<div class="text-xs text-slate-500 italic">"Hola, hacemos webs."</div>', 
                '{r}Copywriter B2B.{/r} {c}Dentistas ocupados.{/c} {m}Email enfocado en SU dolor (agenda vac√≠a).{/m} {f}Asunto + Cuerpo.{/f}',
                'Menciona problema espec√≠fico.', 'CTA suave.',
                '<div class="bg-white p-2 text-xs">"Intent√© agendar en su web y tard√≥ mucho. Arregl√© esto para..."</div>', 'claude', false, false, 'intermediate'),

            createCase(304, 'sales', 'Buyer Persona', 'person_search', 'Marketing: Perfil cliente.',
                '¬øQui√©n compra robots de juguete caros?',
                '<div class="text-xs text-slate-500 italic">"Padres con dinero."</div>', 
                '{r}Investigador Mercado.{/r} {c}Kits Rob√≥tica $100.{/c} {m}Perfil psicol√≥gico (Miedos y Deseos).{/m} {f}Perfil.{/f}',
                'Miedo a futuro.', 'Validaci√≥n parental.',
                '<p class="text-xs"><strong>Ricardo:</strong> Teme que su hijo quede atr√°s en la era digital.</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(305, 'sales', 'Objeci√≥n Precio', 'price_check', 'Ventas: "Es muy caro".',
                'Cliente dice que es caro.',
                '<div class="text-xs text-slate-500 italic">"Te hago descuento."</div>', 
                '{r}Closer Ventas.{/r} {c}Servicio High-Ticket.{/c} {m}Reencuadra como Inversi√≥n vs Costo Inacci√≥n.{/m} {f}Respuesta.{/f}',
                'No te justifiques.', 'Calcula ROI.',
                '<p class="text-xs">"¬øHas calculado cu√°nto te cuesta NO solucionar este problema hoy?"</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(306, 'sales', 'Script Telef√≥nico', 'call', 'Ventas: Llamada en fr√≠o.',
                'Frase para que no me corten.',
                '<div class="text-xs text-slate-500 italic">"Hola, ¬øtiene un minuto?"</div>', 
                '{r}Telemarketer.{/r} {c}Software RRHH.{/c} {m}Opener de 10 seg con propuesta de valor.{/m} {f}Script.{/f}',
                'Sin permiso.', 'Al grano.',
                '<p class="text-xs">"Ayudo a empresas a reducir 30% el tiempo de n√≥mina..."</p>', 'chatgpt', false, false, 'beginner'),

            createCase(307, 'sales', 'Objeci√≥n "Lo pensar√©"', 'hourglass_empty', 'Ventas: Cliente duda.',
                'Me dijo "lo voy a pensar".',
                '<div class="text-xs text-slate-500 italic">"Ok, av√≠same."</div>', 
                '{r}Coach Ventas.{/r} {c}Cierre reuni√≥n.{/c} {m}Descubre la objeci√≥n real oculta.{/m} {f}Pregunta.{/f}',
                'A√≠sla la objeci√≥n.', 'Es dinero o duda.',
                '<p class="text-xs">"Solo para saber, ¬øes un tema de presupuesto o hay algo del producto que no te convence?"</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(308, 'sales', 'T√≠tulos Webinar', 'video_camera_front', 'Marketing: T√≠tulos gancho.',
                'T√≠tulo para webinar inmobiliario.',
                '<div class="text-xs text-slate-500 italic">"Aprende a invertir."</div>', 
                '{r}Copywriter.{/r} {c}Inversi√≥n principiantes.{/c} {m}F√≥rmula: Logro + Tiempo - Dolor.{/m} {f}5 Opciones.{/f}',
                'Promesa fuerte.', 'Sin riesgo.',
                '<p class="text-xs">"C√≥mo comprar tu 1er depa sin sueldo de gerente."</p>', 'chatgpt', false, false, 'beginner'),

            createCase(309, 'sales', 'Recuperar Carrito', 'shopping_cart_checkout', 'Ecommerce: Email abandono.',
                'Correo para quien dej√≥ el carrito.',
                '<div class="text-xs text-slate-500 italic">"Olvidaste comprar."</div>', 
                '{r}Email Marketer.{/r} {c}Zapatillas.{/c} {m}Email humor√≠stico/persuasivo.{/m} {f}Asunto + Texto.{/f}',
                'No descuento inmediato.', 'Humor.',
                '<p class="text-xs">"Tus zapatillas se sienten solas y fr√≠as en el carrito..."</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(310, 'sales', 'Perfil LinkedIn', 'badge', 'Personal: Bio vendedora.',
                'Mejora mi perfil, soy consultor.',
                '<div class="text-xs text-slate-500 italic">"Consultor responsable."</div>', 
                '{r}Social Seller.{/r} {c}Consultor Log√≠stica.{/c} {m}Headline centrado en cliente (Ayudo a X a lograr Y).{/m} {f}Texto.{/f}',
                'Resultados.', 'Prueba social.',
                '<p class="text-xs">"Ayudo a Gerentes a reducir costos un 15% | +50 casos √©xito."</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(311, 'sales', 'Pedir Testimonio', 'format_quote', 'Marketing: Rese√±as.',
                'Pide un testimonio al cliente.',
                '<div class="text-xs text-slate-500 italic">"¬øMe dejas una rese√±a?"</div>', 
                '{r}Copywriter.{/r} {c}Cliente feliz.{/c} {m}3 preguntas gu√≠a para obtener una historia (Antes-Despu√©s).{/m} {f}Preguntas.{/f}',
                'Evita S√≠/No.', 'Transformaci√≥n.',
                '<p class="text-xs">"¬øCu√°l era tu mayor miedo antes de contratarnos?"</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(312, 'sales', 'Propuesta Valor', 'diamond', 'Estrategia: Diferenciaci√≥n.',
                'Frase para mi negocio de nutrici√≥n.',
                '<div class="text-xs text-slate-500 italic">"Nutrici√≥n de calidad."</div>', 
                '{r}Brand Strategist.{/r} {c}Nicho: Post-parto.{/c} {m}UVP (Unique Value Proposition) √∫nica.{/m} {f}Frase.{/f}',
                'Beneficio √∫nico.', 'Nicho.',
                '<p class="text-xs">"Recupera tu energ√≠a sin afectar la lactancia."</p>', 'chatgpt', false, false, 'advanced'),

            createCase(313, 'sales', 'Guion Video Venta', 'play_circle', 'Marketing: VSL.',
                'Video para vender curso Excel.',
                '<div class="text-xs text-slate-500 italic">"Hola, compren mi curso."</div>', 
                '{r}Guionista.{/r} {c}Curso Excel.{/c} {m}Estructura PAS (Problema-Agitaci√≥n-Soluci√≥n) 1er minuto.{/m} {f}Guion.{/f}',
                'Haz que duela.', 'Soluci√≥n m√°gica.',
                '<p class="text-xs">"¬øSales a las 8PM por culpa de las planillas?..."</p>', 'chatgpt', false, false, 'advanced'),

            createCase(406, 'sales', 'Gesti√≥n Crisis', 'policy', 'RRSS: Hater.',
                'Me dijeron estafador en Instagram.',
                '<div class="text-xs text-slate-500 italic">"Mentira, borra eso."</div>', 
                '{r}PR Manager.{/r} {c}Comentario falso.{/c} {m}Respuesta p√∫blica elegante para llevar a DM.{/m} {f}Respuesta.{/f}',
                'Mata con amabilidad.', 'Transparencia.',
                '<div class="bg-white p-2 text-xs">"Lamento que sientas eso. Tu pedido aparece en ruta, escr√≠benos..."</div>', 'chatgpt', false, false, 'beginner'),

            createCase(502, 'sales', 'Naming Marca', 'badge', 'Branding: Nombre.',
                'Nombre para ropa reciclada.',
                '<div class="text-xs text-slate-500 italic">"EcoRopa."</div>', 
                '{r}Director Creativo.{/r} {c}Pl√°stico oce√°nico.{/c} {m}Nombres evocadores sin "Eco/Bio".{/m} {f}5 Nombres.{/f}',
                'Met√°foras.', 'Sonoridad.',
                '<p class="text-xs"><strong>Thalassa</strong> (Mar en griego).</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(503, 'sales', 'Bio LinkedIn', 'face', 'Personal: Acerca de.',
                'Texto "Acerca de" para contador.',
                '<div class="text-xs text-slate-500 italic">"Soy contador experto."</div>', 
                '{r}Marca Personal.{/r} {c}Impuestos Pymes.{/c} {m}Bio enfocada en beneficios para el cliente.{/m} {f}Texto.{/f}',
                'Habla de ellos, no de ti.', 'Soluci√≥n.',
                '<p class="text-xs">"No solo cuento n√∫meros, recupero capital para tu negocio."</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(504, 'sales', 'Analog√≠a Venta', 'compare_arrows', 'Ventas: Explicar dif√≠cil.',
                'Explica Blockchain f√°cil.',
                '<div class="text-xs text-slate-500 italic">"Libro mayor distribuido."</div>', 
                '{r}Divulgador.{/r} {c}Cliente no t√©cnico.{/c} {m}Analog√≠a de la vida real.{/m} {f}Analog√≠a.{/f}',
                'Cotidiano.', 'Visual.',
                '<p class="text-xs">"Es como escribir en un libro y darle copia a todo el estadio..."</p>', 'chatgpt', false, false, 'beginner'),

            createCase(505, 'sales', 'Lead Magnet', 'magnet', 'Marketing: Regalo.',
                '¬øQu√© regalo para captar emails de abogados?',
                '<div class="text-xs text-slate-500 italic">"Un ebook de leyes."</div>', 
                '{r}Growth Hacker.{/r} {c}Abogados ocupados.{/c} {m}Recurso de alto valor y consumo r√°pido.{/m} {f}Ideas.{/f}',
                'Plantillas.', 'Calculadoras.',
                '<p class="text-xs">"Plantilla de Contrato a prueba de balas (Word)."</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(506, 'sales', 'Estrategia Hashtags', 'tag', 'RRSS: Instagram.',
                'Hashtags para tienda de perros.',
                '<div class="text-xs text-slate-500 italic">"#perro #love"</div>', 
                '{r}SEO Instagram.{/r} {c}Nicho mascotas.{/c} {m}Escalera de hashtags (Peque√±os, Medios, Grandes).{/m} {f}Lista.{/f}',
                'Especificidad.', 'Localizaci√≥n.',
                '<p class="text-xs">#BulldogFrancesChile #AccesoriosMascotas</p>', 'chatgpt', false, false, 'beginner'),

            createCase(507, 'sales', 'Respuesta Rese√±a', 'reviews', 'Fidelizaci√≥n: Cliente.',
                'Gracias por rese√±a 5 estrellas.',
                '<div class="text-xs text-slate-500 italic">"Gracias."</div>', 
                '{r}Fidelizaci√≥n.{/r} {c}Cliente feliz restaurante.{/c} {m}Agradece e invita a probar plato secreto.{/m} {f}Respuesta.{/f}',
                'Personaliza.', 'Call to action.',
                '<p class="text-xs">"¬°Gracias Ana! La pr√≥xima prueba el postre secreto..."</p>', 'chatgpt', false, false, 'beginner'),

            // ==========================================
            // üé® ARTE (401-412)
            // ==========================================
            createCase(401, 'art', 'Foto Producto IA', 'camera', 'Midjourney: Realismo.', 
                'Foto botella jugo naranja.',
                '<div class="text-xs text-slate-500 italic">"Botella de jugo en mesa."</div>', 
                '{r}Fot√≥grafo.{/r} {c}Publicidad.{/c} {m}Prompt t√©cnico con iluminaci√≥n, lente y estilo.{/m} {f}Prompt MJ.{/f}', 
                'Backlighting.', 'Gotas agua.', 
                '<div class="font-mono text-xs bg-slate-900 text-purple-300 p-2">/imagine prompt: cinematic shot, condensation...</div>', 'midjourney', false, false, 'advanced'),

            createCase(402, 'art', 'Concept Art', 'palette', 'Arte: Abstracto.',
                'Imagen de "innovaci√≥n" sin focos.',
                '<div class="text-xs text-slate-500 italic">"Un foco brillando."</div>', 
                '{r}Director Arte.{/r} {c}Concepto abstracto.{/c} {m}Met√°fora visual minimalista.{/m} {f}Descripci√≥n.{/f}',
                'Sin clich√©s.', 'Materiales.',
                '<p class="text-xs">"Cubo de cristal levitando con luz interna..."</p>', 'midjourney', false, false, 'intermediate'),

            createCase(403, 'art', 'Paleta Color', 'colors', 'Dise√±o: Colores.',
                'Colores para cafeter√≠a moderna.',
                '<div class="text-xs text-slate-500 italic">"Caf√© y beige."</div>', 
                '{r}Teor√≠a Color.{/r} {c}Branding.{/c} {m}4 colores con c√≥digos HEX y contraste.{/m} {f}Lista HEX.{/f}',
                'Acento.', 'Contraste.',
                '<p class="text-xs"><span class="text-[#FF6B35]">‚ñ†</span> #FF6B35 (Orange)</p>', 'chatgpt', false, false, 'beginner'),

            createCase(404, 'art', 'Icono App', 'app_shortcut', 'UI: Icono iOS.',
                'Icono app meditaci√≥n.',
                '<div class="text-xs text-slate-500 italic">"Una persona meditando."</div>', 
                '{r}Dise√±ador iOS.{/r} {c}App Store.{/c} {m}Icono minimalista reconocible en tama√±o peque√±o.{/m} {f}Prompt.{/f}',
                'Simpleza.', 'Gradientes.',
                '<p class="text-xs">"Nube abstracta con gradiente suave..."</p>', 'midjourney', false, false, 'intermediate'),

            createCase(405, 'art', 'Logo Minimalista', 'draw', 'Branding: Logo.',
                'Logo drones geom√©trico.',
                '<div class="text-xs text-slate-500 italic">"Un dron volando."</div>', 
                '{r}Dise√±ador Bauhaus.{/r} {c}Startup log√≠stica.{/c} {m}Isotipo geom√©trico abstracto.{/m} {f}Prompt.{/f}',
                'Espacio negativo.', 'Formas b√°sicas.',
                '<p class="text-xs">"Hex√°gono formado por flechas..."</p>', 'midjourney', false, false, 'intermediate'),

            createCase(406, 'art', 'Retrato LinkedIn IA', 'person', 'Foto: Headshot.',
                'Foto profesional para LinkedIn IA.',
                '<div class="text-xs text-slate-500 italic">"Hombre con traje."</div>', 
                '{r}Retratista.{/r} {c}Avatar profesional.{/c} {m}Prompt iluminaci√≥n estudio y bokeh.{/m} {f}Prompt.{/f}',
                'Lente 85mm.', 'Rembrandt lighting.',
                '<div class="font-mono text-xs bg-slate-900 text-purple-300 p-2">/imagine prompt: professional headshot...</div>', 'midjourney', false, false, 'beginner'),

            createCase(407, 'art', 'Slide Impacto', 'slideshow', 'Dise√±o: Presentaci√≥n.',
                'Slide de ventas impactante.',
                '<div class="text-xs text-slate-500 italic">"Mucho texto y un gr√°fico."</div>', 
                '{r}Dise√±ador TED.{/r} {c}Cifra clave.{/c} {m}Composici√≥n minimalista foco en el n√∫mero.{/m} {f}Descripci√≥n.{/f}',
                'Regla tercios.', 'Menos es m√°s.',
                '<p class="text-xs">Fondo oscuro. N√∫mero gigante blanco. Flecha verde.</p>', 'chatgpt', false, false, 'beginner'),

            createCase(408, 'art', 'Textura 3D', 'texture', '3D: Materiales.',
                'Textura madera vieja.',
                '<div class="text-xs text-slate-500 italic">"Madera caf√©."</div>', 
                '{r}Artista 3D.{/r} {c}Render realista.{/c} {m}Textura seamless con detalles imperfecci√≥n.{/m} {f}Prompt.{/f}',
                'Tileable.', 'Normal map.',
                '<div class="font-mono text-xs bg-slate-900 text-purple-300 p-2">/imagine prompt: seamless texture walnut...</div>', 'midjourney', false, false, 'advanced'),

            createCase(409, 'art', 'Ilustraci√≥n Editorial', 'brush', 'Arte: Revista.',
                'Dibujo estilo New Yorker teletrabajo.',
                '<div class="text-xs text-slate-500 italic">"Alguien en el compu."</div>', 
                '{r}Ilustrador.{/r} {c}S√°tira.{/c} {m}Estilo tinta y acuarela.{/m} {f}Prompt.{/f}',
                'L√≠nea fina.', 'Humor.',
                '<div class="font-mono text-xs bg-slate-900 text-purple-300 p-2">/imagine prompt: editorial illustration...</div>', 'midjourney', false, false, 'intermediate'),

            createCase(410, 'art', 'Packaging', 'package_2', 'Dise√±o: Caja.',
                'Caja galletas veganas.',
                '<div class="text-xs text-slate-500 italic">"Caja con logo."</div>', 
                '{r}Packaging Designer.{/r} {c}Sustentable.{/c} {m}Materiales y acabados visuales.{/m} {f}Concepto.{/f}',
                'Kraft.', 'Tinta blanca.',
                '<p class="text-xs">Cart√≥n kraft crudo con tipograf√≠a blanca...</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(411, 'art', 'Flyer Evento', 'campaign', 'Dise√±o: Poster.',
                'Flyer fiesta techno.',
                '<div class="text-xs text-slate-500 italic">"Luces de ne√≥n."</div>', 
                '{r}Dise√±ador Carteles.{/r} {c}Underground.{/c} {m}Estilo Brutalista/Suizo.{/m} {f}Descripci√≥n.{/f}',
                'Tipograf√≠a gigante.', 'Blanco y negro.',
                '<p class="text-xs">Fondo negro. Helv√©tica Bold gigante al borde.</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(412, 'art', 'Moodboard', 'chair', 'Interiorismo: Deco.',
                'Ideas sala peque√±a japonesa.',
                '<div class="text-xs text-slate-500 italic">"Muebles bajos."</div>', 
                '{r}Interiorista Japandi.{/r} {c}Espacio peque√±o.{/c} {m}Moodboard materiales y luz.{/m} {f}Prompt.{/f}',
                'Madera clara.', 'Luz natural.',
                '<div class="font-mono text-xs bg-slate-900 text-purple-300 p-2">/imagine prompt: Japandi living room...</div>', 'midjourney', false, false, 'beginner'),

            createCase(501, 'art', 'Bloqueo Escritor', 'edit', 'Escritura: Terror.', 
                'Idea para cuento terror.',
                '<div class="text-xs text-slate-500 italic">"Casa embrujada."</div>', 
                '{r}Stephen King.{/r} {c}Objeto cotidiano.{/c} {m}Premisa "What if" perturbadora.{/m} {f}Sinopsis.{/f}', 
                'Giro inesperado.', 'Terror psicol√≥gico.', 
                '<p class="text-xs">"Una mancha de humedad que tiene la forma de tu cara..."</p>', 'claude', false, false, 'beginner'),

            // ==========================================
            // üß† TECH (601-612)
            // ==========================================
            createCase(601, 'tech', 'Explicar C√≥digo', 'code', 'Dev: Entender Python.',
                'Explica este script.',
                '<div class="text-xs text-slate-500 italic">"Es un bucle for."</div>', 
                '{r}Senior Mentor.{/r} {c}Principiante.{/c} {m}Explica l√≥gica l√≠nea por l√≠nea en espa√±ol simple.{/m} {f}Comentarios.{/f}',
                'Analog√≠as.', 'Paso a paso.',
                '<code class="text-xs bg-slate-800 text-blue-300">for item in list: # Recorre cada uno</code>', 'chatgpt', false, false, 'intermediate'),

            createCase(602, 'tech', 'SQL Query', 'database', 'Data: Top Clientes.',
                'SQL para mejores clientes.',
                '<div class="text-xs text-slate-500 italic">"SELECT * FROM ventas..."</div>', 
                '{r}Data Engineer.{/r} {c}Tablas Users, Orders.{/c} {m}Query optimizada Top 10 sumando ventas.{/m} {f}SQL.{/f}',
                'JOINs.', 'GROUP BY.',
                '<div class="font-mono text-xs bg-slate-900 text-pink-400 p-2">SELECT u.name, SUM(o.total)...</div>', 'chatgpt', false, false, 'advanced'),

            createCase(603, 'tech', 'Regex Sheets', 'regular_expression', 'Data: Extraer Emails.',
                'Saca el email del texto sucio.',
                '<div class="text-xs text-slate-500 italic">"Usa texto en columnas."</div>', 
                '{r}Experto Regex.{/r} {c}Google Sheets.{/c} {m}F√≥rmula REGEXEXTRACT para email.{/m} {f}F√≥rmula.{/f}',
                'Patr√≥n universal.', 'Una celda.',
                '<div class="font-mono text-xs bg-slate-900 text-green-400 p-2">=REGEXEXTRACT(A2, "[a-zA-Z0-9..."]</div>', 'gemini', false, false, 'advanced'),

            createCase(604, 'tech', 'Analog√≠a Tech', 'terminal', 'Conceptos: API.',
                'Explica qu√© es una API.',
                '<div class="text-xs text-slate-500 italic">"Interfaz de programaci√≥n."</div>', 
                '{r}Profesor Tech.{/r} {c}No t√©cnico.{/c} {m}Analog√≠a del Restaurante (Mesero).{/m} {f}Explicaci√≥n.{/f}',
                'Mesero = API.', 'Cocina = Server.',
                '<p class="text-xs">"La API es el mesero que lleva tu pedido a la cocina..."</p>', 'chatgpt', false, false, 'beginner'),

            createCase(605, 'tech', 'Explicar Git', 'commit', 'Dev: Versionamiento.',
                '¬øPara qu√© sirve Git?',
                '<div class="text-xs text-slate-500 italic">"Para guardar c√≥digo."</div>', 
                '{r}Senior Dev.{/r} {c}Estudiante.{/c} {m}Analog√≠a "Guardar Partida" videojuegos.{/m} {f}Texto.{/f}',
                'Checkpoint.', 'L√≠neas temporales.',
                '<p class="text-xs">"Es como el Save Point de un juego..."</p>', 'chatgpt', false, false, 'beginner'),

            createCase(606, 'tech', 'HTML Landing', 'html', 'Web: Estructura.',
                'C√≥digo p√°gina web simple.',
                '<div class="text-xs text-slate-500 italic">"&lt;h1&gt;Hola&lt;/h1&gt;"</div>', 
                '{r}Frontend Dev.{/r} {c}Landing Page.{/c} {m}Estructura HTML5 + Tailwind CSS.{/m} {f}C√≥digo.{/f}',
                'Viewport.', 'CDN.',
                '<div class="font-mono text-xs bg-slate-900 text-blue-300 p-2">&lt;!DOCTYPE html&gt;...</div>', 'claude', false, false, 'intermediate'),

            createCase(607, 'tech', 'Hosting Advisor', 'dns', 'Infraestructura: Server.',
                '¬øD√≥nde alojo mi web?',
                '<div class="text-xs text-slate-500 italic">"Usa GoDaddy."</div>', 
                '{r}Cloud Architect.{/r} {c}Web peque√±a.{/c} {m}Recomendaci√≥n costo/beneficio (Shared vs VPS).{/m} {f}Consejo.{/f}',
                'Escalabilidad.', 'Facilidad.',
                '<p class="text-xs">Empieza con Shared Hosting (SiteGround). No necesitas AWS a√∫n.</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(608, 'tech', 'Automatizaci√≥n', 'bolt', 'No-Code: Zapier.',
                'Guardar facturas de email a Drive.',
                '<div class="text-xs text-slate-500 italic">"Usa Zapier."</div>', 
                '{r}Automation Expert.{/r} {c}Gmail a Drive.{/c} {m}Pasos Trigger/Action con filtros.{/m} {f}Lista.{/f}',
                'Filtro asunto.', 'Mapeo datos.',
                '<p class="text-xs">Trigger: New Attachment. Action: Upload File.</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(609, 'tech', 'Pantalla Azul', 'bug_report', 'Soporte: Windows.',
                'Error pantalla azul.',
                '<div class="text-xs text-slate-500 italic">"Formatea."</div>', 
                '{r}Soporte IT.{/r} {c}Diagn√≥stico.{/c} {m}Pasos reparaci√≥n (sfc, drivers) antes de borrar todo.{/m} {f}Lista.{/f}',
                'Comandos CMD.', 'Restaurar.',
                '<code class="bg-black text-white text-xs p-1">sfc /scannow</code>', 'gemini', false, false, 'intermediate'),

            createCase(610, 'tech', 'CSS Centrar', 'style', 'Web: Centrar Div.',
                'C√≥mo centro un div.',
                '<div class="text-xs text-slate-500 italic">"margin: 0 auto;"</div>', 
                '{r}CSS Expert.{/r} {c}Centrado vertical/horizontal.{/c} {m}Flexbox snippet.{/m} {f}CSS.{/f}',
                'Display flex.', 'Justify/Align.',
                '<div class="font-mono text-xs bg-slate-900 text-pink-300 p-2">display: flex; justify-content: center;</div>', 'claude', false, false, 'beginner'),

            createCase(611, 'tech', 'README Maker', 'description', 'Dev: Documentaci√≥n.',
                'Escribe el readme de mi repo.',
                '<div class="text-xs text-slate-500 italic">"Esta es mi app."</div>', 
                '{r}Open Source Maintainer.{/r} {c}Proyecto Python.{/c} {m}Estructura MD profesional (Instalaci√≥n, Uso).{/m} {f}Markdown.{/f}',
                'Badges.', 'Snippets.',
                '<div class="font-mono text-xs bg-slate-900 text-white p-2"># T√≠tulo<br>## Instalaci√≥n...</div>', 'chatgpt', false, false, 'intermediate'),

            createCase(612, 'tech', 'Detector Phishing', 'security', 'Seguridad: Email falso.',
                '¬øEs real este correo del banco?',
                '<div class="text-xs text-slate-500 italic">"Parece falso."</div>', 
                '{r}Ciberseguridad.{/r} {c}Correo urgente.{/c} {m}Indicadores clave (Remitente, Urgencia, Link).{/m} {f}An√°lisis.{/f}',
                'Dominio.', 'Sentido urgencia.',
                '<p class="text-xs text-red-600 font-bold">‚ö†Ô∏è PHISHING DETECTADO.</p>', 'gemini', false, false, 'beginner'),

            // ==========================================
            // üéì EDUCACI√ìN (701-712)
            // ==========================================
            createCase(701, 'education', 'Tutor Socr√°tico', 'psychology', 'Math: Guiar no resolver.', 
                'Resuelve x^2 - 5x + 6 = 0.',
                '<div class="text-xs text-slate-500 italic">"x=2, x=3."</div>', 
                '{r}Tutor Socr√°tico.{/r} {c}Alumno aprende.{/c} {m}Gu√≠a con preguntas, no des respuesta.{/m} {f}Di√°logo.{/f}', 
                'Factorizaci√≥n.', 'Pregunta paso a paso.', 
                '<p class="text-xs">"Busca dos n√∫meros que sumados den -5..."</p>', 'chatgpt', false, false, 'beginner'),

            createCase(702, 'education', 'Plan Estudio', 'calendar_month', 'Estudio: Examen.',
                'Horario para examen en 3 meses.',
                '<div class="text-xs text-slate-500 italic">"Estudia mucho."</div>', 
                '{r}Coach Aprendizaje.{/r} {c}Largo plazo.{/c} {m}Plan con Repetici√≥n Espaciada.{/m} {f}Calendario.{/f}',
                'Flashcards.', 'Repaso activo.',
                '<p class="text-xs">Mes 1: Conceptos. Mes 2: Pr√°ctica.</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(703, 'education', 'Traductor Ciencia', 'science', 'Lectura: Paper.',
                'Explica "mitigaci√≥n antropog√©nica".',
                '<div class="text-xs text-slate-500 italic">"Reducci√≥n humana de gases."</div>', 
                '{r}Divulgador.{/r} {c}Ni√±o 12 a√±os.{/c} {m}Explicaci√≥n simple con analog√≠a.{/m} {f}Texto.{/f}',
                'Simple.', 'Analog√≠a llave gas.',
                '<p class="text-xs">"Es como cerrar la llave del gas que dejamos abierta..."</p>', 'chatgpt', false, false, 'beginner'),

            createCase(704, 'education', 'Simulador Oral', 'mic', 'Pr√°ctica: Examen.',
                'Preguntas para examen de Derecho.',
                '<div class="text-xs text-slate-500 italic">"¬øQu√© es la ley?"</div>', 
                '{r}Profesor Estricto.{/r} {c}Caso pr√°ctico.{/c} {m}Preguntas dif√≠ciles con trampa.{/m} {f}Preguntas.{/f}',
                'Justificar.', 'Excepci√≥n.',
                '<p class="text-xs">"¬øEs v√°lido el contrato si...?"</p>', 'chatgpt', false, false, 'advanced'),

            createCase(705, 'education', 'Resumen Libro', 'menu_book', 'Lectura: Ideas clave.',
                'Resume H√°bitos At√≥micos.',
                '<div class="text-xs text-slate-500 italic">"Crea buenos h√°bitos."</div>', 
                '{r}Bibliotecario.{/r} {c}Accionable.{/c} {m}3 ideas pr√°cticas de las Leyes del Cambio.{/m} {f}Lista.{/f}',
                'Hacerlo obvio.', 'Dise√±o ambiente.',
                '<p class="text-xs">1. Deja la guitarra al medio de la sala (Hazlo obvio).</p>', 'claude', false, false, 'intermediate'),

            createCase(706, 'education', 'Generador Quiz', 'quiz', 'Estudio: Test.',
                'Hazme un quiz de la c√©lula.',
                '<div class="text-xs text-slate-500 italic">"¬øQu√© es la c√©lula?"</div>', 
                '{r}Profesor Biolog√≠a.{/r} {c}Selecci√≥n m√∫ltiple.{/c} {m}3 preguntas con distractores plausibles.{/m} {f}Test.{/f}',
                'Dif√≠cil.', 'Sin respuesta inmediata.',
                '<p class="text-xs">1. Funci√≥n mitocondria: a) ADN b) ATP c) L√≠pidos.</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(707, 'education', 'Historia Storytelling', 'history_edu', 'Historia: Chisme.',
                'Revoluci√≥n Francesa como chisme.',
                '<div class="text-xs text-slate-500 italic">"Fue en 1789."</div>', 
                '{r}Narrador.{/r} {c}Contexto social.{/c} {m}Relato estilo chisme de barrio.{/m} {f}Historia.{/f}',
                'Personajes.', 'Drama.',
                '<p class="text-xs">"El Rey hizo una fiesta gigante y le pas√≥ la cuenta a los pobres..."</p>', 'chatgpt', false, false, 'beginner'),

            createCase(708, 'education', 'Corrector Ensayo', 'edit_note', 'Escritura: Acad√©mico.',
                'Mejora mi ensayo.',
                '<div class="text-xs text-slate-500 italic">"Corrige ortograf√≠a."</div>', 
                '{r}Editor Harvard.{/r} {c}Argumentaci√≥n.{/c} {m}Cr√≠tica de estructura y vocabulario.{/m} {f}Feedback.{/f}',
                'Conectores.', 'Sin repetir.',
                '<p class="text-xs">Cambia "cosa" por "fen√≥meno". Refuerza tu tesis.</p>', 'claude', false, false, 'advanced'),

            createCase(709, 'education', 'Roleplay Idioma', 'translate', 'Idiomas: Conversaci√≥n.',
                'Roleplay cafeter√≠a en ingl√©s.',
                '<div class="text-xs text-slate-500 italic">"Hello, coffee please."</div>', 
                '{r}Barista Londres.{/r} {c}Casual.{/c} {m}Di√°logo con modismos (slang).{/m} {f}Chat.{/f}',
                'Cheers.', 'Mate.',
                '<p class="text-xs">"Hiya love! Awful weather today innit?"</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(710, 'education', 'Problema F√≠sica', 'calculate', 'Ciencias: Planteamiento.',
                'Problema auto frenando.',
                '<div class="text-xs text-slate-500 italic">"Respuesta: 4m/s."</div>', 
                '{r}Profesor F√≠sica.{/r} {c}Cinem√°tica.{/c} {m}Identifica Datos, Inc√≥gnita y F√≥rmula.{/m} {f}Pasos.{/f}',
                'Diagrama.', 'Unidades.',
                '<p class="text-xs">Datos: Vo=20, Vf=0. F√≥rmula: Vf=Vo+at.</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(711, 'education', 'Ayudante Tesis', 'school', 'Investigaci√≥n: Hip√≥tesis.',
                'Ayuda tesis IA y empleo.',
                '<div class="text-xs text-slate-500 italic">"La IA es importante."</div>', 
                '{r}Tutor PhD.{/r} {c}Estructura.{/c} {m}Hip√≥tesis falsable y Objetivos.{/m} {f}Texto.{/f}',
                'Verbos infinitivo.', 'Medible.',
                '<p class="text-xs">Hip√≥tesis: "La IA desplaza demanda hacia soft skills..."</p>', 'chatgpt', false, false, 'advanced'),

            createCase(712, 'education', 'Abogado Diablo', 'gavel', 'Debate: Contraargumentos.',
                'Defiende teletrabajo obligatorio.',
                '<div class="text-xs text-slate-500 italic">"Es buena idea."</div>', 
                '{r}Oponente Debate.{/r} {c}Pensamiento cr√≠tico.{/c} {m}3 argumentos en contra s√≥lidos.{/m} {f}Lista.{/f}',
                'Puntos ciegos.', 'Econom√≠a.',
                '<p class="text-xs">1. ¬øQu√© pasa con trabajadores esenciales? Genera desigualdad.</p>', 'chatgpt', false, false, 'advanced'),

            // ==========================================
            // üßò VIDA (801-814)
            // ==========================================
            createCase(801, 'life', 'Paz Familiar', 'handshake', 'Familia: Peleas.', 
                'Hijos pelean por tablet.',
                '<div class="text-xs text-slate-500 italic">"Cast√≠galos."</div>', 
                '{r}Mediador.{/r} {c}Reglas claras.{/c} {m}Contrato de paz divertido.{/m} {f}Texto.{/f}', 
                'Premios.', 'Consecuencias.', 
                '<p class="text-xs">"Si hay gritos, la tablet va a la c√°rcel..."</p>', 'chatgpt', false, false, 'beginner'),

            createCase(802, 'life', 'Chef Sobras', 'restaurant_menu', 'Cocina: Refri vac√≠o.',
                'Tengo arroz y huevo.',
                '<div class="text-xs text-slate-500 italic">"Arroz con huevo."</div>', 
                '{r}Chef Gourmet.{/r} {c}Creatividad.{/c} {m}Receta sofisticada con sobras.{/m} {f}Receta.{/f}',
                'Nombre fancy.', 'T√©cnica.',
                '<p class="text-xs">"Arroz Canton√©s Express saltado al wok..."</p>', 'chatgpt', false, false, 'beginner'),

            createCase(803, 'life', 'Plan Viaje', 'flight', 'Viajes: Roma.',
                'Qu√© ver en Roma 3 d√≠as.',
                '<div class="text-xs text-slate-500 italic">"Coliseo y Vaticano."</div>', 
                '{r}Gu√≠a Local.{/r} {c}Log√≠stica.{/c} {m}Itinerario optimizado por zonas.{/m} {f}D√≠a a d√≠a.{/f}',
                'Comida.', 'Sin vueltas.',
                '<p class="text-xs">D√≠a 1: Antigua Roma (Todo a pie).</p>', 'gemini', false, false, 'intermediate'),

            createCase(804, 'life', 'Entrenador Casa', 'fitness_center', 'Salud: Sin equipo.',
                'Rutina ejercicio en casa.',
                '<div class="text-xs text-slate-500 italic">"Haz abdominales."</div>', 
                '{r}Coach Funcional.{/r} {c}30 min.{/c} {m}Rutina HIIT/Tabata.{/m} {f}Circuito.{/f}',
                'Tiempos.', 'Postura.',
                '<p class="text-xs">Sentadillas (20s) - Descanso (10s).</p>', 'chatgpt', false, false, 'beginner'),

            createCase(805, 'life', 'Sommelier', 'wine_bar', 'Social: Vino.',
                'Vino para lasa√±a.',
                '<div class="text-xs text-slate-500 italic">"Vino tinto."</div>', 
                '{r}Sommelier.{/r} {c}Maridaje.{/c} {m}Recomendaci√≥n cepa espec√≠fica y por qu√©.{/m} {f}Consejo.{/f}',
                'Acidez.', 'Grasa.',
                '<p class="text-xs">Chianti o Sangiovese. Su acidez corta la grasa del queso.</p>', 'chatgpt', false, false, 'beginner'),

            createCase(806, 'life', 'Mentor Estoico', 'self_improvement', 'Mente: Estr√©s.',
                'Consejo para ansiedad trabajo.',
                '<div class="text-xs text-slate-500 italic">"Rel√°jate."</div>', 
                '{r}Estoico.{/r} {c}Control.{/c} {m}Ejercicio Dicotom√≠a del Control.{/m} {f}Reflexi√≥n.{/f}',
                'Qu√© depende de ti.', 'Aceptaci√≥n.',
                '<p class="text-xs">Separa: Lo que controlas (tu esfuerzo) vs Lo que no (el resultado).</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(807, 'life', 'Plan Comidas', 'local_dining', 'Salud: Batch Cooking.',
                'Men√∫ semanal sano r√°pido.',
                '<div class="text-xs text-slate-500 italic">"Lunes ensalada."</div>', 
                '{r}Nutricionista.{/r} {c}Poco tiempo.{/c} {m}Men√∫ Batch Cooking (cocinar 1 vez, comer 3).{/m} {f}Men√∫.{/f}',
                'Base multiuso.', 'Reutiliza.',
                '<p class="text-xs">Lunes: Quinoa con pollo. Martes: Ensalada de Quinoa.</p>', 'chatgpt', false, false, 'beginner'),

            createCase(808, 'life', 'Sue√±o Beb√©', 'crib', 'Familia: Dormir.',
                'Rutina sue√±o beb√© 1 a√±o.',
                '<div class="text-xs text-slate-500 italic">"D√©jalo llorar."</div>', 
                '{r}Consultora Sue√±o.{/r} {c}Respetuoso.{/c} {m}Rutina relajante paso a paso.{/m} {f}Horario.{/f}',
                'Sin pantallas.', 'Asociaci√≥n.',
                '<p class="text-xs">19:00 Ba√±o. 19:30 Cuento. 19:45 Cuna.</p>', 'gemini', false, false, 'intermediate'),

            createCase(809, 'life', 'Cita en Casa', 'favorite', 'Pareja: Creatividad.',
                'Cita rom√°ntica barata en casa.',
                '<div class="text-xs text-slate-500 italic">"Ver Netflix."</div>', 
                '{r}Coach Parejas.{/r} {c}Romper rutina.{/c} {m}Actividad interactiva sin pantallas.{/m} {f}Ideas.{/f}',
                'Juego.', 'Sentidos.',
                '<p class="text-xs">Cata de chocolates a ciegas.</p>', 'chatgpt', false, false, 'beginner'),

            createCase(810, 'life', 'Lista Super', 'shopping_cart', 'Hogar: Eficiencia.',
                'Ordena mi lista de compras.',
                '<div class="text-xs text-slate-500 italic">"Pan, leche, huevos."</div>', 
                '{r}Log√≠stica Hogar.{/r} {c}Ruta √≥ptima.{/c} {m}Ordena por pasillos del s√∫per.{/m} {f}Lista.{/f}',
                'Verduras primero.', 'Congelados final.',
                '<p class="text-xs">1. Verduler√≠a 2. Despensa 3. Fr√≠os.</p>', 'chatgpt', false, false, 'beginner'),

            createCase(811, 'life', 'Mudanza', 'box', 'Hogar: Orden.',
                'Organiza mi mudanza en 1 mes.',
                '<div class="text-xs text-slate-500 italic">"Empaca todo."</div>', 
                '{r}Organizador.{/r} {c}Cronograma.{/c} {m}Checklist regresivo semanal.{/m} {f}Plan.{/f}',
                'Depurar.', 'Maleta d√≠a 1.',
                '<p class="text-xs">Semana 4: Botar lo que no sirve. Semana 1: Maleta supervivencia.</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(812, 'life', 'Meditaci√≥n', 'self_improvement', 'Salud: Ansiedad.',
                'Calma mi ansiedad ahora.',
                '<div class="text-xs text-slate-500 italic">"Respira."</div>', 
                '{r}Gu√≠a Mindfulness.{/r} {c}Crisis.{/c} {m}T√©cnica Grounding 5-4-3-2-1.{/m} {f}Gu√≠a.{/f}',
                'Sentidos.', 'Presente.',
                '<p class="text-xs">Mira 5 cosas. Toca 4 cosas. Escucha 3 cosas...</p>', 'chatgpt', false, false, 'beginner'),

            createCase(813, 'life', 'Pataletas', 'child_care', 'Familia: Crianza.',
                'Ni√±o 3 a√±os berrinche.',
                '<div class="text-xs text-slate-500 italic">"Ign√≥ralo."</div>', 
                '{r}Psic√≥logo Infantil.{/r} {c}Validaci√≥n.{/c} {m}Script validar emoci√≥n + poner l√≠mite.{/m} {f}Frase.{/f}',
                'Conexi√≥n.', 'Firme y amable.',
                '<p class="text-xs">"Veo que est√°s enojado. Est√° bien enojarse, pero no pegar."</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(814, 'life', 'Reparaci√≥n', 'build', 'Hogar: DIY.',
                'Lavadora no centrifuga.',
                '<div class="text-xs text-slate-500 italic">"Llama al t√©cnico."</div>', 
                '{r}T√©cnico.{/r} {c}Diagn√≥stico.{/c} {m}3 causas probables simples.{/m} {f}Checklist.{/f}',
                'Filtro.', 'Desbalance.',
                '<p class="text-xs">1. Revisa el filtro de abajo (monedas). 2. Carga desbalanceada.</p>', 'gemini', false, false, 'intermediate'),

            // ==========================================
            // üõ†Ô∏è INGENIER√çA PROMPTS (901-912)
            // ==========================================
            createCase(901, 'engineering', 'Anti-Patr√≥n', 'warning', 'T√©cnica: Claridad.', 
                'Ayuda con Excel.',
                '<div class="text-xs text-slate-500 italic">"¬øEn qu√© te ayudo?"</div>', 
                '{r}Ingeniero Datos.{/r} {c}Especificidad.{/c} {m}Prompt completo con contexto, input y output deseado.{/m} {f}Prompt.{/f}', 
                'Evita ping-pong.', 'Contexto.', 
                '<p class="text-xs">"Tengo una tabla ventas. Calcula la suma si..."</p>', 'gemini', false, false, 'intermediate'),

            createCase(902, 'engineering', 'Chain of Thought', 'link', 'T√©cnica: Razonamiento.',
                'Resuelve problema l√≥gico r√°pido.',
                '<div class="text-xs text-slate-500 italic">"Respuesta incorrecta."</div>', 
                '{r}L√≥gico.{/r} {c}Complejidad.{/c} {m}Piensa paso a paso antes de responder.{/m} {f}CoT.{/f}',
                'Paso a paso.', 'Menos errores.',
                '<p class="text-xs">Paso 1: Analizar... Paso 2: Calcular... Conclusi√≥n.</p>', 'chatgpt', true, false, 'advanced'),

            createCase(903, 'engineering', 'Alucinaciones', 'fact_check', 'T√©cnica: Verdad.',
                'Precio exacto Tesla en Chile.',
                '<div class="text-xs text-slate-500 italic">"$35 millones (Inventado)."</div>', 
                '{r}Investigador.{/r} {c}Datos reales.{/c} {m}Busca fuente o di "No s√©".{/m} {l}No inventes.{/l} {f}Dato.{/f}',
                'Cita fuentes.', 'Admite ignorancia.',
                '<p class="text-xs text-red-600">Dato no disponible oficialmente.</p>', 'gemini', false, false, 'advanced'),

            createCase(904, 'engineering', 'Iterativo', 'loop', 'T√©cnica: Pulir.',
                'Mejora este texto.',
                '<div class="text-xs text-slate-500 italic">"Texto corregido."</div>', 
                '{r}Editor.{/r} {c}Calidad.{/c} {m}Mejora en 3 iteraciones (Claridad, Tono, Estilo).{/m} {f}Versiones.{/f}',
                'Evoluci√≥n.', 'V1, V2, V3.',
                '<p class="text-xs">V1: Claro. V2: Persuasivo. V3: Perfecto.</p>', 'chatgpt', false, false, 'advanced'),

            createCase(905, 'engineering', 'Rol M√∫ltiple', 'groups_3', 'T√©cnica: Panel expertos.',
                'Consejo negocio Steve Jobs.',
                '<div class="text-xs text-slate-500 italic">"Hazlo simple."</div>', 
                '{r}Panel Expertos.{/r} {c}Estrategia.{/c} {m}Debate entre Jobs, Buffett y Sun Tzu.{/m} {f}Di√°logo.{/f}',
                'Contrastes.', 'Perspectivas.',
                '<p class="text-xs">Jobs: Innova. Buffett: Ahorra.</p>', 'chatgpt', false, false, 'advanced'),

            createCase(906, 'engineering', 'JSON Output', 'data_object', 'T√©cnica: Formato.',
                'Lista pa√≠ses JSON.',
                '<div class="text-xs text-slate-500 italic">"Chile, Per√∫..."</div>', 
                '{r}API.{/r} {c}Programaci√≥n.{/c} {m}Solo JSON v√°lido keys estrictas.{/m} {f}C√≥digo.{/f}',
                'Sin texto extra.', 'Keys.',
                '<div class="font-mono text-xs bg-slate-900 text-green-400 p-2">[{ "pais": "Chile" }]</div>', 'gemini', false, false, 'advanced'),

            createCase(907, 'engineering', 'Semilla', 'forest', 'T√©cnica: Consistencia.',
                'Haz el mismo personaje corriendo.',
                '<div class="text-xs text-slate-500 italic">"(Genera otro personaje)."</div>', 
                '{r}Midjourney.{/r} {c}Personaje fijo.{/c} {m}Usa par√°metro --seed.{/m} {f}Prompt.{/f}',
                'Mismo ID.', 'Continuidad.',
                '<code class="text-xs bg-slate-900 text-purple-300">--seed 12345</code>', 'midjourney', false, false, 'advanced'),

            createCase(908, 'engineering', 'Tree of Thoughts', 'account_tree', 'T√©cnica: Exploraci√≥n.',
                'Acertijo dif√≠cil.',
                '<div class="text-xs text-slate-500 italic">"Respuesta r√°pida."</div>', 
                '{r}Pensador.{/r} {c}Soluci√≥n compleja.{/c} {m}Genera 3 caminos, descarta los malos.{/m} {f}Proceso.{/f}',
                'Ramas.', 'Evaluaci√≥n.',
                '<p class="text-xs">Camino A (Descartado). Camino B (Plausible).</p>', 'chatgpt', true, false, 'advanced'),

            createCase(909, 'engineering', 'Evaluador', 'rate_review', 'T√©cnica: Autocr√≠tica.',
                '¬øEst√° bien mi email?',
                '<div class="text-xs text-slate-500 italic">"S√≠, lindo."</div>', 
                '{r}Cr√≠tico.{/r} {c}Mejora.{/c} {m}Eval√∫a 1-10 y reescribe.{/m} {f}Nota + Texto.{/f}',
                'S√© duro.', 'Criterios.',
                '<p class="text-xs">Nota: 6/10. Muy largo. Versi√≥n mejorada: ...</p>', 'claude', false, false, 'advanced'),

            createCase(910, 'engineering', 'Negativas', 'do_not_disturb_on', 'T√©cnica: Restricci√≥n.',
                'Texto sobre IA sin clich√©s.',
                '<div class="text-xs text-slate-500 italic">"La IA revolucionaria..."</div>', 
                '{r}Escritor.{/r} {c}Originalidad.{/c} {m}Sin palabras: Revoluci√≥n, Futuro, Paradigma.{/m} {f}Texto.{/f}',
                'Fuerza vocabulario.', 'Estilo.',
                '<p class="text-xs">"El software decide..." (Sin usar palabras prohibidas).</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(911, 'engineering', 'Tono Voz', 'equalizer', 'T√©cnica: Estilo.',
                'Tweet lunes divertido.',
                '<div class="text-xs text-slate-500 italic">"Feliz lunes."</div>', 
                '{r}Comediante Sarc√°stico.{/r} {c}Lunes.{/c} {m}Estilo Dr. House.{/m} {f}Tweet.{/f}',
                'Personaje.', 'Humor.',
                '<p class="text-xs">"Ah, lunes. El recordatorio semanal..."</p>', 'chatgpt', false, false, 'intermediate'),

            createCase(912, 'engineering', 'Delimitadores', 'code_blocks', 'T√©cnica: Seguridad.',
                'Resume este texto.',
                '<div class="text-xs text-slate-500 italic">"(Se confunde con instrucciones internas)."</div>', 
                '{r}Resumidor.{/r} {c}Input sucio.{/c} {m}Usa delimitadores """ para separar data.{/m} {f}Prompt.{/f}',
                '"""Texto""".', 'Seguridad.',
                '<code class="text-xs">Resume el texto entre """..."""</code>', 'chatgpt', false, false, 'beginner')
        ];

        
        // UI Elements
        const statusOverlay = document.getElementById('system-status-overlay');
        const statusIcon = document.getElementById('status-icon');
        const statusTitle = document.getElementById('status-title');
        const statusDesc = document.getElementById('status-desc');
        const statusCode = document.getElementById('status-code');
        const retryBtn = document.getElementById('retry-btn');

        function showSystemError(err) {
            statusOverlay.classList.remove('hidden');
            statusOverlay.classList.add('flex');
            statusIcon.innerHTML = '<span class="material-symbols-rounded text-3xl text-red-500">error</span>';
            statusIcon.className = "w-16 h-16 bg-white border border-red-100 text-red-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-sm";
            statusTitle.innerText = "Error de Conexi√≥n";
            
            if (err.message.includes("Failed to fetch") || err.message.includes("NetworkError")) {
                statusDesc.innerText = "No pudimos conectar con el servidor de AulaGenia. Verifica tu conexi√≥n.";
                statusCode.innerText = "NETWORK_ERROR";
            } else {
                statusDesc.innerText = "Error al procesar la base de datos de prompts.";
                statusCode.innerText = "DATA_ERROR: " + err.message;
            }
            statusCode.className = "text-red-500 font-bold";
            retryBtn.classList.remove('hidden');
        }

        async function loadDatabase() {
            try {
                // Simulate network delay to keep the "loading" experience
                await new Promise(resolve => setTimeout(resolve, 800));
                
                casesData = allCases; // Use the local variable directly
                
                setTimeout(() => {
                    statusOverlay.classList.add('hidden');
                    initApp();
                }, 100);
            } catch (err) {
                console.error("System Error:", err);
                showSystemError(err);
            }
        }

        loadDatabase();

        const config = {
            categories: {
                productivity: { label: "Productividad", color: "emerald", icon: "rocket_launch" },
                finance: { label: "Finanzas", color: "amber", icon: "payments" }, 
                sales: { label: "Ventas & Copy", color: "rose", icon: "campaign" },
                art: { label: "Arte Digital", color: "fuchsia", icon: "palette" },
                life: { label: "Lifestyle", color: "orange", icon: "self_improvement" },
                tech: { label: "Tecnolog√≠a", color: "violet", icon: "terminal" },
                education: { label: "Educaci√≥n", color: "cyan", icon: "school" },
                engineering: { label: "Ingenier√≠a", color: "slate", icon: "construction" },
                debug: { label: "Sistema", color: "gray", icon: "settings" }
            }
        };

        let currentPromptTemplate = "";
        let currentBadPromptTemplate = "";
        let currentVariables = {};
        let currentDifficulty = 'beginner'; // New global for copy logic

        function initApp() {
            window.loadCase = loadCase;
            window.filterCases = filterCases;
            window.filterByCategory = filterByCategory;
            window.copyPrompt = copyPrompt;
            window.openPaywall = openPaywall;
            window.closePaywall = closePaywall;
            window.showTutorial = showTutorial;
            window.closeTutorial = closeTutorial;
            window.togglePrompt = togglePrompt;
            window.downloadPDF = downloadPDF;

            renderCategories();
            renderList(casesData);
            updateTotalCounter();
            startCountdown();
            startSocialProof();
            setupLegendInteractions();

            const first = casesData[0];
            if(first) loadCase(first.id);
            else document.getElementById('workspace-empty').classList.replace('hidden', 'flex');
        }

        function loadCase(id) {
            const c = casesData.find(x => x.id === id);
            if(!c) return;

            // Update Global for Copy
            currentDifficulty = c.difficulty || 'beginner';

            document.querySelectorAll('.case-item').forEach(el => {
                el.classList.remove('bg-indigo-50', 'border-indigo-100', 'text-indigo-700');
                el.classList.add('border-transparent', 'text-slate-600');
            });
            const activeItem = document.getElementById(`case-item-${id}`);
            if(activeItem) {
                activeItem.classList.remove('border-transparent', 'text-slate-600');
                activeItem.classList.add('bg-indigo-50', 'border-indigo-100', 'text-indigo-700');
            }

            document.getElementById('workspace-empty').classList.add('hidden');
            document.getElementById('case-detail').classList.remove('hidden');

            document.getElementById('detail-title').innerText = c.title;
            document.getElementById('detail-problem').innerText = c.problem;
            
            document.getElementById('bad-result-preview').innerHTML = c.badResponsePreview;
            document.getElementById('good-result-preview').innerHTML = c.previewResponse;

            const cat = config.categories[c.category] || { label: 'General', color: 'slate' };
            const badge = document.getElementById('detail-category-badge');
            badge.innerText = cat.label;
            badge.className = `text-[9px] font-bold uppercase tracking-wider px-2 py-0.5 rounded border shadow-sm bg-white text-${cat.color}-600 border-${cat.color}-100`;

            const aiBadge = document.getElementById('ai-suggestion-badge');
            const aiName = document.getElementById('ai-name');
            if (c.suggestedAI) {
                let niceName = c.suggestedAI.toUpperCase();
                aiName.innerText = niceName;
                aiBadge.classList.remove('hidden');
                aiBadge.classList.add('flex');
            } else {
                aiBadge.classList.add('hidden');
                aiBadge.classList.remove('flex');
            }

            const tipContainer = document.getElementById('tip-container');
            const validationContainer = document.getElementById('validation-container');
            const tipText = document.getElementById('detail-example-tip');
            const valText = document.getElementById('detail-validation-tip');

            if (c.exampleTip) { tipText.innerHTML = c.exampleTip; tipContainer.classList.remove('hidden'); } else { tipContainer.classList.add('hidden'); }
            if (c.validationTip) { valText.innerHTML = c.validationTip; validationContainer.classList.remove('hidden'); } else { validationContainer.classList.add('hidden'); }

            currentPromptTemplate = c.agiaPromptTagged;
            currentBadPromptTemplate = c.badPromptDynamic || c.badPrompt;
            currentVariables = {};
            
            const regex = /{([a-z0-9_]+)\|([^}]+)}/g;
            let match;
            const varsFound = [];
            while ((match = regex.exec(currentPromptTemplate)) !== null) {
                varsFound.push({ key: match[1], default: match[2] });
                currentVariables[match[1]] = match[2];
            }

            renderPrompts(c.locked);
            resetPromptView(); 
            
            const lockOverlay = document.getElementById('premium-lock');
            if(c.locked) lockOverlay.classList.remove('hidden');
            else lockOverlay.classList.add('hidden');
        }

        // Logic for Expandable Box
        function resetPromptView() {
            const container = document.getElementById('prompt-container');
            const btn = document.getElementById('expand-btn');
            container.classList.remove('prompt-expanded');
            container.classList.add('prompt-collapsed');
            
            setTimeout(() => {
                if(container.scrollHeight <= 200) {
                    btn.classList.add('hidden');
                    container.classList.remove('prompt-collapsed'); 
                } else {
                    btn.classList.remove('hidden');
                    btn.innerHTML = '<span class="material-symbols-rounded text-sm">unfold_more</span> Ver Completo';
                }
            }, 50);
        }

        function togglePrompt() {
            const container = document.getElementById('prompt-container');
            const btn = document.getElementById('expand-btn');
            
            if (container.classList.contains('prompt-collapsed')) {
                container.classList.remove('prompt-collapsed');
                container.classList.add('prompt-expanded');
                btn.innerHTML = '<span class="material-symbols-rounded text-sm">unfold_less</span> Ver Menos';
            } else {
                container.classList.remove('prompt-expanded');
                container.classList.add('prompt-collapsed');
                btn.innerHTML = '<span class="material-symbols-rounded text-sm">unfold_more</span> Ver Completo';
                document.querySelector('.group\\/expand').scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        function downloadPDF() {
            const printContent = `
                <html>
                <head>
                    <title>B√≥veda de Prompts AGIA</title>
                    <style>
                        body { font-family: sans-serif; padding: 40px; color: #333; }
                        h1 { text-align: center; color: #4f46e5; }
                        .case { border-bottom: 1px solid #ddd; padding: 20px 0; page-break-inside: avoid; }
                        .title { font-weight: bold; font-size: 1.2em; margin-bottom: 5px; }
                        .meta { font-size: 0.8em; color: #666; margin-bottom: 10px; }
                        .prompt-box { background: #f8fafc; border: 1px solid #e2e8f0; padding: 15px; border-radius: 8px; font-family: monospace; white-space: pre-wrap; margin-top: 10px; font-size: 0.9em; }
                        .label { font-weight: bold; font-size: 0.8em; text-transform: uppercase; color: #4f46e5; }
                    </style>
                </head>
                <body>
                    <h1>B√≥veda Maestra AGIA - Reporte Completo</h1>
                    <p style="text-align:center; font-size:0.9em; color:#666;">Generado el ${new Date().toLocaleDateString()}</p>
                    ${casesData.map(c => `
                        <div class="case">
                            <div class="title">${c.title}</div>
                            <div class="meta">Categor√≠a: ${c.category.toUpperCase()} | Nivel: ${c.difficulty.toUpperCase()}</div>
                            <p>${c.problem}</p>
                            <div class="label">Prompt Optimizado:</div>
                            <div class="prompt-box">${c.agiaPromptTagged.replace(/{[a-z]+\}|{\/[a-z]+\}/g, '')}</div>
                        </div>
                    `).join('')}
                    <script>window.onload = function() { window.print(); }</sc`+`ript>
                </body>
                </html>
            `;
            const win = window.open('', '_blank');
            win.document.write(printContent);
            win.document.close();
        }

        function renderPrompts(isLocked) {
            let renderedAgia = currentPromptTemplate;
            Object.keys(currentVariables).forEach(key => {
                const val = currentVariables[key] || "___";
                const regex = new RegExp(`{${key}\\|[^}]+}`, 'g');
                renderedAgia = renderedAgia.replace(regex, `<span class="var-highlight">${val}</span>`);
            });

            const tags = { r: 'rol', c: 'contexto', m: 'meta', l: 'restricciones', f: 'formato' };
            Object.keys(tags).forEach(t => {
                const className = `hl-${tags[t]}`;
                const regex = new RegExp(`{${t}}(.*?){/${t}}`, 'gs');
                renderedAgia = renderedAgia.replace(regex, `<span class="hl-tag ${className}" data-tag-type="${t}">$1</span>`);
            });
            renderedAgia = renderedAgia.replace(/\n/g, '<br>');
            document.getElementById('detail-prompt-rendered').innerHTML = renderedAgia;

            let renderedBad = currentBadPromptTemplate;
            Object.keys(currentVariables).forEach(key => {
                const val = currentVariables[key] || "...";
                const regex = new RegExp(`{${key}}`, 'g');
                renderedBad = renderedBad.replace(regex, `<span class="var-highlight-bad">${val}</span>`);
            });
            document.getElementById('bad-prompt-rendered').innerHTML = `"${renderedBad}"`;
        }

        function setupLegendInteractions() {
            const legendContainer = document.getElementById('interactive-legend');
            if(!legendContainer) return;
            legendContainer.addEventListener('mouseover', (e) => {
                const item = e.target.closest('.legend-item');
                if(!item) return;
                const type = item.dataset.type;
                document.querySelectorAll(`.hl-tag[data-tag-type="${type}"]`).forEach(el => el.classList.add('hl-active'));
            });
            legendContainer.addEventListener('mouseout', (e) => {
                const item = e.target.closest('.legend-item');
                if(!item) return;
                const type = item.dataset.type;
                document.querySelectorAll(`.hl-tag[data-tag-type="${type}"]`).forEach(el => el.classList.remove('hl-active'));
            });
        }

        function copyPrompt() {
            const rawText = document.getElementById('detail-prompt-rendered').innerText;
            const textArea = document.createElement("textarea");
            textArea.value = rawText;
            document.body.appendChild(textArea);
            textArea.select();
            try {
                document.execCommand('copy');
            } catch (err) {
                console.error('Error al copiar:', err);
            }
            document.body.removeChild(textArea);

            // Dynamic Feedback based on Difficulty
            let msg = '¬°Copiado con √©xito!';
            let subMsg = 'Listo para pegar.';
            let icon = 'check_circle';
            let colorClass = 'text-green-400';
            
            if (currentDifficulty === 'beginner') {
                msg = '¬°Bien! Ahorraste ~2 horas';
                subMsg = 'Equivalente a una reuni√≥n larga.';
                colorClass = 'text-emerald-400';
            } else if (currentDifficulty === 'intermediate') {
                msg = '¬°Excelente! Te ahorraste ~10 horas';
                subMsg = 'Casi un d√≠a y medio de trabajo.';
                colorClass = 'text-amber-400';
                icon = 'bolt';
            } else if (currentDifficulty === 'advanced') {
                msg = '¬°IMPACTO TOTAL! Ahorraste +20 horas';
                subMsg = 'Nivel de ingenier√≠a de alto rendimiento.';
                colorClass = 'text-rose-400';
                icon = 'rocket_launch';
            }

            const toast = document.getElementById('toast');
            toast.innerHTML = `
                <div class="bg-slate-900 text-white px-5 py-4 rounded-xl shadow-2xl flex items-center gap-4 border border-slate-700">
                    <span class="material-symbols-rounded ${colorClass} text-2xl">${icon}</span>
                    <div>
                        <h4 class="font-bold text-sm text-white">${msg}</h4>
                        <p class="text-[11px] text-slate-400 mt-0.5">${subMsg}</p>
                    </div>
                </div>
            `;
            
            toast.classList.remove('translate-x-full');
            setTimeout(() => {
                toast.classList.add('translate-x-full');
            }, 4000);
        }

        function updateTotalCounter() {
            const totalEl = document.getElementById('total-display');
            if(totalEl) totalEl.innerText = casesData.length;
        }

        function renderCategories() {
            const nav = document.getElementById('category-nav');
            if(!nav) return;
            nav.innerHTML = Object.keys(config.categories).map(key => {
                const conf = config.categories[key];
                // Count cases per category
                const count = casesData.filter(x => x.category === key).length;
                
                return `<button onclick="filterByCategory('${key}')" class="whitespace-nowrap px-3 py-1 rounded-lg text-[10px] font-bold bg-slate-50 border border-slate-200 text-slate-500 hover:border-indigo-300 hover:text-indigo-600 transition-all flex items-center gap-1.5 group">
                    <span class="material-symbols-rounded text-sm text-${conf.color}-500">${conf.icon}</span> 
                    ${conf.label}
                    <span class="bg-${conf.color}-100 text-${conf.color}-700 text-[9px] px-1.5 py-0.5 rounded-full ml-1">${count}</span>
                </button>`;
            }).join('');
        }

        function filterByCategory(cat) {
            document.getElementById('searchInput').value = ''; 
            const filtered = casesData.filter(c => c.category === cat);
            renderList(filtered);
        }

        function filterCases() { 
            const search = document.getElementById('searchInput').value.toLowerCase();
            const filtered = casesData.filter(c => 
                c.title.toLowerCase().includes(search) || 
                c.problem.toLowerCase().includes(search) ||
                c.category.toLowerCase().includes(search)
            );
            renderList(filtered);
        }

        function renderList(cases) {
            const list = document.getElementById('case-list');
            document.getElementById('total-display').innerText = casesData.length;
            
            if(cases.length === 0) {
                list.innerHTML = '<div class="p-8 text-center text-xs text-slate-400 flex flex-col items-center"><span class="material-symbols-rounded text-2xl mb-2 opacity-50">search_off</span>Sin resultados.</div>';
                return;
            }
            
            list.innerHTML = cases.map(c => {
                let dotColor = 'bg-slate-300';
                let tooltip = 'Desconocido';
                if(c.difficulty === 'beginner') { dotColor = 'bg-emerald-400'; tooltip = 'Simple: Ahorra ~2 HH'; }
                else if(c.difficulty === 'intermediate') { dotColor = 'bg-amber-400'; tooltip = 'Medio: Ahorra ~5-10 HH'; }
                else if(c.difficulty === 'advanced') { dotColor = 'bg-rose-400'; tooltip = 'Complejo: Ahorra ~20+ HH'; }

                return `
                <div id="case-item-${c.id}" onclick="loadCase(${c.id})" class="case-item group p-3 rounded-lg cursor-pointer hover:bg-slate-50 hover:shadow-sm transition-all border border-transparent hover:border-indigo-100 relative mb-1">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 rounded-lg bg-white border border-slate-100 flex items-center justify-center text-slate-400 group-hover:text-indigo-600 group-hover:bg-indigo-50 transition-colors shadow-sm shrink-0">
                            <span class="material-symbols-rounded text-[16px]">${c.locked ? 'lock' : c.icon}</span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h4 class="text-xs font-bold truncate transition-colors text-slate-700 group-hover:text-indigo-900">${c.title}</h4>
                            <div class="flex items-center gap-1.5 mt-0.5">
                                <span class="w-1.5 h-1.5 rounded-full ${dotColor}" title="${tooltip}"></span>
                                <span class="text-[10px] text-slate-400 capitalize truncate font-medium">${c.category}</span>
                            </div>
                        </div>
                        ${c.locked ? '<span class="material-symbols-rounded text-xs text-slate-300">lock</span>' : ''}
                    </div>
                </div>
            `}).join('');
        }
        
        function openPaywall() { document.getElementById('paywall-modal').classList.remove('hidden'); }
        function closePaywall() { document.getElementById('paywall-modal').classList.add('hidden'); }
        function showTutorial() { document.getElementById('tutorial-modal').classList.remove('hidden'); }
        function closeTutorial() { document.getElementById('tutorial-modal').classList.add('hidden'); }

        function startCountdown() {
            let minutes = 14; let seconds = 59;
            const el = document.getElementById('countdown');
            setInterval(() => {
                if(seconds === 0) { if(minutes === 0) return; minutes--; seconds = 59; } else { seconds--; }
                el.innerText = `${minutes}:${seconds < 10 ? '0'+seconds : seconds}`;
            }, 1000);
        }

        function startSocialProof() {
            const buyers = ["Carlos R.", "Ana M.", "StartUp Inc", "David L.", "Sofia P.", "Agencia Flow", "Mario B."];
            const locations = ["Madrid", "CDMX", "Santiago", "Bogot√°", "Lima", "Miami", "Barcelona", "Buenos Aires", "Medell√≠n"];
            const toast = document.getElementById('sales-toast');

            const showNotification = () => {
                const name = buyers[Math.floor(Math.random() * buyers.length)];
                const location = locations[Math.floor(Math.random() * locations.length)];
                const timeAgo = Math.random() > 0.7 ? "Hace instantes" : `Hace ${Math.floor(Math.random() * 10) + 1} min`;
                
                toast.innerHTML = `
                <div class="bg-white/95 backdrop-blur border border-slate-100 p-3 rounded-xl shadow-lg flex items-center gap-3 max-w-xs ring-1 ring-black/5 transform transition-all hover:scale-105 cursor-pointer" onclick="openPaywall()">
                    <div class="w-8 h-8 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-bold text-xs relative shadow-md shrink-0">
                        ${name.charAt(0)}
                        <span class="absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-400 rounded-full border-2 border-white animate-pulse"></span>
                    </div>
                    <div>
                        <p class="text-xs text-slate-600 leading-tight"><span class="font-bold text-slate-900">${name}</span> compr√≥ Pack</p>
                        <p class="text-[9px] text-slate-400 font-bold mt-0.5 flex items-center gap-1">${timeAgo} ‚Ä¢ ${location}</p>
                    </div>
                </div>`;
                
                toast.classList.remove('opacity-0', 'translate-y-24');
                setTimeout(() => { toast.classList.add('opacity-0', 'translate-y-24'); }, 5000);
            };

            setTimeout(showNotification, 4000);
            const loop = () => {
                const nextTime = Math.floor(Math.random() * (35000 - 12000 + 1) + 12000);
                setTimeout(() => { showNotification(); loop(); }, nextTime);
            };
            loop();
        }
    </script>
</body>
</html>
